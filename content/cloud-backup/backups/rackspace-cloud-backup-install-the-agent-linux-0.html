---
node_id: 4057
title: Rackspace Cloud Backup - Install the agent on Linux
permalink: article/rackspace-cloud-backup-install-the-agent-linux-0
type: article
created_date: '2014-05-05 17:16:47'
created_by: kyle.laffoon
last_modified_date: '2015-10-16 14:2553'
last_modified_by: catherine.richardson
products: Cloud Backup
categories: Backups
body_format: tinymce
---

<p><a id="backtotop"> </a></p>

<p>The following instructions are for the installation of the Rackspace Cloud Backup agent on your Linux server. If you are using a Windows server, see <a href="http://www.rackspace.com/knowledge_center/article/rackspace-cloud-backup-install-the-agent-windows">Rackspace Cloud Backup - Install the Agent (Windows)</a> for parallel instructions. &nbsp;To schedule and configure backups after the agent is installed, see&nbsp;<a href="/knowledge_center/article/rackspace-cloud-backup-create-a-backup-0">Rackspace Cloud Backup - Create a Backup</a>.</p>

<p><strong>Note:</strong> You can use Cloud Backup on almost any Linux server in the Rackspace Cloud. Exceptions are FreeBSD 9 (not supported) and Debian 5 (End of Life February 2012). &nbsp;If you use FreeBSD 9 or Debian 5 please use an alternate method to backup your data. Also note that 32-bit servers and agents on Linux are not supported.</p>

<table border="1">
	<tbody>
		<tr>
			<td>
			<h2>Contents</h2>

			<p><a href="#establishnet"><strong>1. Establish network routes</strong></a></p>

			<p><a href="#installagent"><strong>2. Install the agent</strong></a></p>

			<ul>
				<li><a href="#apt">Install the agent on APT-based systems, such as Ubuntu and Debian</a></li>
				<li><a href="#rpm">Install the agent on RPM-based systems, such as CentOS, Fedora, and Red Hat</a></li>
				<li><a href="#arch">Install the agent on Arch, Gentoo, and SUSE systems</a></li>
			</ul>

			<p><a href="#troubleshoot"><strong>3. Troubleshooting</strong></a></p>

			<ul>
				<li><a href="#connection">Connection error</a></li>
				<li><a href="#status">Status codes</a></li>
				<li><a href="#agent">Agent logs</a></li>
			</ul>

			<p><a href="#uninstalllinux"><strong>4. Uninstall the agent from Linux</strong></a></p>
			</td>
		</tr>
	</tbody>
</table>

<p>&nbsp;</p>

<h2 id="establishnet">Establish network routes</h2>

<p>If your cloud server was created before June 3, 2013, you might need to add network routes to the server so that it can connect to Cloud Backup through the back-end network (ServiceNet). You can find complete instructions for updating your server's network routes in <a href="/knowledge_center/article/updating-servicenet-routes-on-cloud-servers-created-before-june-3-2013">Updating ServiceNet routes on Cloud Servers</a>.</p>

<p><sup><a href="#backtotop">Back to top</a></sup></p>

<h2>Install the agent</h2>

<p>To see if your server already has the Cloud Backup agent installed, run:</p>

<pre>
sudo cloudbackup-updater -v</pre>

<p>If the command runs without an error, the agent is already installed (this should be&nbsp;the case for servers with a Managed Operations service level).&nbsp;If you get a message that the command can't be found, the agent needs to be installed.</p>

<p>If the Cloud Backup agent is not installed, proceed with the instructions for your Linux distribution:</p>

<ul>
	<li><a href="#apt">Install the agent on APT-based systems, including&nbsp;Ubuntu and Debian</a></li>
	<li><a href="#rpm">Install the agent on RPM-based systems, including CentOS, Fedora, and Red Hat</a></li>
	<li><a href="#arch">Install the agent on Arch, Gentoo, SUSE, and other Linux&nbsp;systems</a></li>
</ul>

<p><strong>Note</strong>: None of the Linux backup agents can be installed without a reboot. However, an agent update does not require a reboot.</p>

<p>&nbsp;</p>

<h3 id="apt">Install the agent on APT-based systems, such as Ubuntu and Debian</h3>

<p>Use SSH to log in to your server and run the following commands consecutively as a user with sudo or superuser privileges.</p>

<ol>
	<li>Update the APT repository information.
	<pre>
sudo apt-get update</pre>
	</li>
	<li>Install the <strong>python-apt</strong> package.
	<pre>
sudo apt-get install python-apt</pre>
	</li>
	<li>Get the auto-updater.
	<pre>
wget 'http://agentrepo.drivesrvr.com/debian/cloudbackup-updater-latest.deb'</pre>
	</li>
	<li>Install the auto-updater.
	<pre>
sudo dpkg -i cloudbackup-updater-latest.deb</pre>

	<p>The updater installs the agent (if it's not already installed) and sets the agent to start at boot. &nbsp;If you see an error, don't worry; we'll fix it in the next step.</p>
	</li>
	<li>To make sure the package configuration process completes,&nbsp;run <code>apt-get</code> with the <code>-f</code> option. &nbsp;This will fix any outstanding package dependency issues on the system.
	<pre>
sudo apt-get install -f</pre>
	</li>
	<li>Check the installation.
	<p>The updater might take a few minutes to download and install the agent. To check the status of the agent installation, run the following command:</p>

	<pre>
sudo cloudbackup-updater -v</pre>

	<p>If the agent installation is not complete, that command will hang until it completes. &nbsp;When it returns you to the shell prompt, proceed to the next step.</p>

	<p>If you get a command not found error, run <code>sudo apt-get install -f</code> per the preceding step.</p>
	</li>
	<li>Configure the bootstrap.
	<p>Run the agent with the <code>--configure</code> option to configure the agent. Use your Rackspace Cloud account username and API key, where indicated by &lt;username&gt; and &lt;API key&gt; in the following command. For information about how to find your API key, see <a href="http://www.rackspace.com/knowledge_center/article/view-and-reset-your-api-key">View and reset your API key.</a></p>

	<p><strong>Tip</strong>: This step asks you to confirm that you want to overwrite your configuration file. Answer yes.</p>

	<pre>
sudo /usr/local/bin/driveclient --configure --username &lt;username&gt; --apikey &lt;apikey&gt; --flavor &lt;flavor&gt; --datacenter &lt;datacenter&gt; --apihost api.drivesrvr.com</pre>

	<p>In the example above, &lt;<em>flavor</em>&gt; is one of <code>privatecloud</code>, <code>raxcloudserver</code>, or <code>dedicated</code>, and is typically <code>raxcloudserver</code>.<br />
	<br />
	<strong>Note</strong>: For installation on an OnMetal server, you <em>must</em> specify the region and host name for the datacenter in order to connect. For an OnMetal server, best results have been received by setting &lt;<em>flavor</em>&gt; to <code>privatecloud</code> with the <code>--snet</code> flag.<br />
	<br />
	If you use any flavor other than <code>raxcloudserver</code>, the Backup Agent is shown as not installed in the <strong>Backups</strong> section at the bottom of the<strong> Cloud Servers Details</strong> page in the Cloud Control Panel, as shown below. However, items do show up as they should under the <strong>Backup</strong> tab in the Cloud Control Panel.<br />
	<br />
	<img alt="" border="2" height="92" src="/knowledge_center/sites/default/files/field/image/Screen%20Shot%202015-10-15%20at%203.38.07%20PM.png" width="567" /></p>
	</li>
	<li>Start the agent.
	<pre>
sudo service driveclient start</pre>
	</li>
</ol>

<p><sup><a href="#backtotop">Back to top</a></sup></p>

<h3>&nbsp;</h3>

<h3 id="rpm">Install the agent on RPM-based systems, such as CentOS, Fedora, and Red Hat</h3>

<p>Use SSH to log in to your server and run the following commands consecutively as a user with sudo or superuser privileges.</p>

<ol>
	<li>Download and install the auto-updater.
	<pre>
sudo rpm -Uvh 'http://agentrepo.drivesrvr.com/redhat/cloudbackup-updater-latest.rpm'</pre>

	<p>The updater installs the agent (if it's not already installed) and sets it to start at boot.</p>
	</li>
	<li>Check the installation.
	<p>The updater might take a few minutes to download and install the agent. To check the status of the agent install, run the following command:</p>

	<pre>
sudo cloudbackup-updater -v</pre>

	<p>If the agent installation is not complete, that command will hang until it completes. &nbsp;When it returns you to the shell prompt, proceed to the next step.</p>
	</li>
	<li>Configure the bootstrap.
	<p>Run the agent with the --configure option to configure the agent. You will be asked for your Rackspace Cloud account username and password.</p>

	<pre>
sudo /usr/local/bin/driveclient --configure --username &lt;username&gt; --apikey &lt;apikey&gt; --flavor &lt;flavor&gt; --datacenter &lt;datacenter&gt; --apihost api.drivesrvr.com</pre>

	<p>In the example above, &lt;<em>flavor</em>&gt; is one of <code>privatecloud</code>, <code>raxcloudserver</code>, or <code>dedicated</code>, and is typically <code>raxcloudserver</code>.<br />
	<br />
	<strong>Note</strong>: For installation on an OnMetal server, you <em>must</em> specify the region and host name for the datacenter in order to connect. For an OnMetal server, best results have been received by setting &lt;<em>flavor</em>&gt; to <code>privatecloud</code> with the <code>--snet</code> flag.<br />
	<br />
	If you use any flavor other than <code>raxcloudserver</code>, the Backup Agent is shown as not installed in the <strong>Backups</strong> section at the bottom of the<strong> Cloud Servers Details</strong> page in the Cloud Control Panel, as shown below. However, items do show up as they should under the <strong>Backup</strong> tab in the Cloud Control Panel.<br />
	<br />
	<img alt="" border="2" height="92" src="/knowledge_center/sites/default/files/field/image/Screen%20Shot%202015-10-15%20at%203.38.07%20PM.png" width="567" /></p>
	</li>
	<li>Start the agent.
	<pre>
sudo service driveclient start</pre>
	</li>
</ol>

<p><sup><a href="#backtotop">Back to top</a></sup></p>

<h3>&nbsp;</h3>

<h3 id="arch">Install the agent on Arch, Gentoo, and SUSE systems</h3>

<p>For Arch, Gentoo, and SUSE Linux systems, you must first download the tarball. Then, use SSH to log in to your server and run the following commands consecutively as a user with sudo or superuser privileges.</p>

<p><strong>Note:</strong> The tarball has the most up-to-date instructions. If the following instructions differ from the tarball instructions, use the tarball instructions.</p>

<ol>
	<li>Download the tarball.
	<pre>
wget http://agentrepo.drivesrvr.com/tar/driveclient-latest.tar.bz2</pre>
	</li>
	<li>Extract the files.
	<p>Use SSH to log in to your server, and then run the following command to extract the installation files.</p>

	<pre>
tar -xvjf driveclient-latest.tar.bz2</pre>
	</li>
	<li>Change to the directory.
	<p>Enter the directory that was created by extracting the files, for example:</p>

	<pre>
cd driveclient-1</pre>
	</li>
	<li>Create directories and copy files.
	<pre>
sudo cp driveclient /usr/local/bin/
sudo chown root:root /usr/local/bin/driveclient
sudo chmod 700 /usr/local/bin/driveclient
sudo mkdir -m 700 /etc/driveclient
sudo cp cacert.pem /etc/driveclient</pre>
	</li>
	<li>Configure the agent.
	<p>Run the agent with the --configure option to configure the agent. You will be asked for your Rackspace Cloud account username and password.</p>

	<p><strong>Tip:</strong> This step asks you to confirm that you want to overwrite your configuration file. Answer yes.</p>

	<pre>
sudo /usr/local/bin/driveclient --configure --username &lt;username&gt; --apikey &lt;apikey&gt; --flavor &lt;flavor&gt; --datacenter &lt;datacenter&gt; --apihost api.drivesrvr.com</pre>

	<p>In the example above, &lt;<em>flavor</em>&gt; is one of <code>privatecloud</code>, <code>raxcloudserver</code>, or <code>dedicated</code>, and is typically <code>raxcloudserver</code>.<br />
	<br />
	<strong>Note</strong>: For installation on an OnMetal server, you <em>must</em> specify the region and host name for the datacenter in order to connect. For an OnMetal server, best results have been received by setting &lt;<em>flavor</em>&gt; to <code>privatecloud</code> with the <code>--snet</code> flag.<br />
	<br />
	If you use any flavor other than <code>raxcloudserver</code>, the Backup Agent is shown as not installed in the <strong>Backups</strong> section at the bottom of the<strong> Cloud Servers Details</strong> page in the Cloud Control Panel, as shown below. However, items do show up as they should under the <strong>Backup</strong> tab in the Cloud Control Panel.<br />
	<br />
	<img alt="" border="2" height="92" src="/knowledge_center/sites/default/files/field/image/Screen%20Shot%202015-10-15%20at%203.38.07%20PM.png" width="567" /></p>
	</li>
	<li>Start the agent.
	<pre>
sudo /usr/local/bin/driveclient --daemon</pre>

	<p>Example init/startup scripts are included in the tarball.</p>
	</li>
</ol>

<p><sup><a href="#backtotop">Back to top</a></sup></p>

<h2>&nbsp;</h2>

<h2 id="troubleshoot">Troubleshooting</h2>

<p>If you encounter issues during installation, use the tips in this section to troubleshoot.</p>

<h3 id="connection">Connection error</h3>

<p>If Cloud Backup indicates that the agent is not running on your server, ensure that your firewall isn't blocking outgoing connections on port 443.</p>

<h3 id="status">Status codes</h3>

<h4>What do the backup statuses Skipped, Missed, Errored, and Failed mean?</h4>

<ul>
	<li>Skipped: The backup job was skipped because a backup job was already queued. A single backup job can be queued only once.</li>
	<li>Missed: The backup job was missed because the agent did not respond. The agent was likely offline.</li>
	<li>Errored: An error occurred during the backup. The backup job did run, but it needs to be investigated.</li>
	<li>Failed: A serious problem occurred, and the backup job did not run.</li>
</ul>

<h4>How do I troubleshoot the Skipped, Missed, Errored, and Failed statuses?</h4>

<ul>
	<li>Skipped: This error likely occurs because the frequency of the backup job is set too high. Consider reducing the frequency of the job, or reducing the amount of data. If this is the initial job, then the subsequent jobs might finish faster.</li>
	<li>Missed: Verify that the agent is running on the server. If the agent is not already running, then start it. Next, check the logs to determine why the backup job failed. An agent should never go offline by itself. Either a software exception occurred or the agent was manually terminated.</li>
	<li>Errored: Look in the logs on the server. The agent stores all the logs in one location (see the following section). Review the logs line by line. If you cannot determine the cause of the error, raise a ticket with the SME group, and they can help you identify the problem.</li>
	<li>Failed: As with the Errored status, check the logs on the server. A failed status is severe.</li>
</ul>

<h3 id="agent">Agent logs</h3>

<p>If you need to read the logs of the agent, you can find them in <code>/var/log</code>.</p>

<p><sup><a href="#backtotop">Back to top</a></sup></p>

<p>&nbsp;</p>

<h2 id="uninstalllinux">Uninstall the agent from Linux</h2>

<p>To uninstall the agent, you can stop and remove both the auto-updater and the backup agent by using the system package manager.</p>

<h3>CentOS or Red Hat</h3>

<pre>
sudo yum remove cloudbackup-updater driveclient</pre>

<h3>Ubuntu</h3>

<pre>
sudo apt-get remove cloudbackup-updater driveclient</pre>

<h3>Other Linux Distributions</h3>

<p>For all other Linux operating systems, follow OS-standard uninstallation operations. Based on the previous installation instructions, use the following commands to uninstall the agent.</p>

<p>Remove <code>/usr/local/bin/driveclient</code>.</p>

<pre>
sudo rm /usr/local/bin/driveclient</pre>

<p>Remove the <code>/etc/driveclient</code> directory.</p>

<pre>
sudo rm -r /etc/driveclient</pre>

<p>If the <code>init</code> script for the <code>driveclient</code> was added for this installation, remove that as well.</p>

<p><sup><a href="#backtotop">Back to top</a></sup></p>
