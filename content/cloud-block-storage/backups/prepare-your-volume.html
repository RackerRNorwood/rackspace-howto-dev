---
node_id: 3132
title: Prepare Your Cloud Block Storage Volume
permalink: article/prepare-your-volume
type: article
created_date: '2012-10-21 07:37:18'
created_by: David Hendler
last_modified_date: '2014-04-11 19:2741'
last_modified_by: kyle.laffoon
products: Cloud Block Storage
categories: Backups
body_format: tinymce
---

<p>After you have <a title="created and attached" href="http://www.rackspace.com/knowledge_center/article/create-and-attach-a-cloud-block-storage-volume" target="_blank">created and attached</a> your Cloud Block Storage volume, you must prepare it for use on your server. To prepare your volume, you must partition, format, and mount it.&nbsp; After you have successfully completed these steps, your volume is usable like a drive on your server.</p><ul><li><a href="#prepare_linux">Prepare Your Volume for Use with a Linux Server</a></li><li><a href="#prepare_windows">Prepare Your Volume for Use with a Windows Server</a></li></ul><h2><a name="prepare_linux"></a>Prepare Your Volume for Use with a Linux Server</h2><h3>Step 1. Use SSH to connect to your server.</h3><p>When you created your server, you were given a password. You will need that password for this step. If you do not have the password, go to the Cloud Servers page of the Cloud Control Panel, click the gear icon next to the server name, and select <strong>Change Password</strong>.</p><ol><li>On the Server Details page of the Control Panel, find the IP address for your server.</li><li>Using SSH, log in to the server as root by using its IP address and root password.</li></ol><p>Example Input:</p><pre>MHC03SDV7M:~ user4975$ ssh root@198.61.222.58<br />root@198.61.222.58's password: </pre><p>Example Output:</p><pre>Linux nosnetdfw 2.6.32-31-server #61-Ubuntu SMP Fri Apr 8 19:44:42 UTC 2011 x86_64 GNU/Linux<br />Ubuntu 10.04 LTS<br /><br />Welcome to the Ubuntu Server!<br />&nbsp;* Documentation:&nbsp; http://www.ubuntu.com/server/doc<br />Last login: Thu Oct 18 02:26:38 2012 from 70.114.215.201</pre><ol><li value="3">After you are logged in, list the disks on your server. <br />Your volume is typically listed as the last drive in this list. In the following example, the 100 GB volume that was created in the <a href="http://www.rackspace.com/knowledge_center/article/create-and-attach-a-cloud-block-storage-volume" target="_self">Create and Attach a Cloud Block Storage Volume</a> article is attached to /dev/xvdb. (It is shown as 107.4 GB because of the way that megabytes are counted.)</li></ol><p>Example Input:</p><pre>root@nosnetdfw:~# fdisk -l</pre><p>Example Output:</p><pre>Disk /dev/xvda: 42.9 GB, 42949672960 bytes<br />255 heads, 63 sectors/track, 5221 cylinders<br />Units = cylinders of 16065 * 512 = 8225280 bytes<br />Sector size (logical/physical): 512 bytes / 512 bytes<br />I/O size (minimum/optimal): 512 bytes / 512 bytes<br />Disk identifier: 0x000dc852<br /><br />&nbsp;&nbsp;&nbsp; Device Boot&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Start&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; End&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Blocks&nbsp;&nbsp; Id&nbsp; System<br />/dev/xvda1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5222&nbsp;&nbsp;&nbsp; 41942016&nbsp;&nbsp; 83&nbsp; Linux<br /><br />Disk /dev/xvdb: 107.4 GB, 107374182400 bytes<br />255 heads, 63 sectors/track, 13054 cylinders<br />Units = cylinders of 16065 * 512 = 8225280 bytes<br />Sector size (logical/physical): 512 bytes / 512 bytes<br />I/O size (minimum/optimal): 512 bytes / 512 bytes<br />Disk identifier: 0x00000000<br /><br />Disk /dev/xvdb doesn't contain a valid partition table</pre><h3>Step 2. Partition the disk.</h3><p>Partitioning the disk tells the server how much space on the drive you want to use. To use all of it, we tell the server to start at the first cylinder of the disk and go to the last.</p><ol><li>Run the fdisk utility and specify the disk.</li></ol><p>Example Input:</p><pre>root@nosnetdfw:~# fdisk /dev/xvdb</pre><p>Example Output:</p><pre>Device contains neither a valid DOS partition table, nor Sun, SGI or OSF disklabel<br />Building a new DOS disklabel with disk identifier 0x59a4ec2c.<br />Changes will remain in memory only, until you decide to write them.<br />After that, of course, the previous content won't be recoverable.<br /><br />Warning: invalid flag 0x0000 of partition table 4 will be corrected by w(rite)<br /><br />WARNING: DOS-compatible mode is deprecated. It's strongly recommended to<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; switch off the mode (command 'c') and change display units to<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sectors (command 'u').<br /><br />Command (m for help): m<br />Command action<br />&nbsp;&nbsp; a&nbsp;&nbsp; toggle a bootable flag<br />&nbsp;&nbsp; b&nbsp;&nbsp; edit bsd disklabel<br />&nbsp;&nbsp; c&nbsp;&nbsp; toggle the dos compatibility flag<br />&nbsp;&nbsp; d&nbsp;&nbsp; delete a partition<br />&nbsp;&nbsp; l&nbsp;&nbsp; list known partition types<br />&nbsp;&nbsp; m&nbsp;&nbsp; print this menu<br />&nbsp;&nbsp; n&nbsp;&nbsp; add a new partition<br />&nbsp;&nbsp; o&nbsp;&nbsp; create a new empty DOS partition table<br />&nbsp;&nbsp; p&nbsp;&nbsp; print the partition table<br />&nbsp;&nbsp; q&nbsp;&nbsp; quit without saving changes<br />&nbsp;&nbsp; s&nbsp;&nbsp; create a new empty Sun disklabel<br />&nbsp;&nbsp; t&nbsp;&nbsp; change a partition's system id<br />&nbsp;&nbsp; u&nbsp;&nbsp; change display/entry units<br />&nbsp;&nbsp; v&nbsp;&nbsp; verify the partition table<br />&nbsp;&nbsp; w&nbsp;&nbsp; write table to disk and exit<br />&nbsp;&nbsp; x&nbsp;&nbsp; extra functionality (experts only)<br /><br />Command (m for help): </pre><ol><li value="2">Enter <strong>n</strong> to create a new partition.</li></ol><p>Example Input:</p><pre>Command (m for help): n</pre><p>Example Output:</p><pre>Command action<br />&nbsp;&nbsp; e&nbsp;&nbsp; extended<br />&nbsp;&nbsp; p&nbsp;&nbsp; primary partition (1-4)</pre><ol><li value="3">Enter <strong>p</strong> to indicate a primary partition.</li></ol><p>Example Input:</p><pre>p</pre><p>Example Output:</p><pre>Partition number (1-4): </pre><ol><li value="4">To create only one partition on this disk, enter<strong> 1</strong>.</li></ol><p>Example Input:</p><pre>Partition number (1-4): 1</pre><p>Example Output:</p><pre>First cylinder (1-13054, default 1):&nbsp;&nbsp; </pre><ol><li value="5">To accept the default start cylinder, which is 1, press <strong>Enter</strong>.</li></ol><p>Example Output:</p><pre>Using default value 1<br />Last cylinder, +cylinders or +size{K,M,G} (1-13054, default 13054):</pre><ol><li value="6">Press <strong>Enter</strong> to use the default, which is 1. Because you are using the entire volume for your partition, start the partition at the beginning.</li></ol><p>Example Ouput:</p><pre>Using default value 13054<br /><br />Command (m for help): </pre><ol><li value="7">Enter <strong>w</strong> to write the partition.</li></ol><p>Example Input:</p><pre>Command (m for help): w</pre><p>Example Output:</p><pre>The partition table has been altered!<br /><br />Calling ioctl() to re-read partition table.<br />Syncing disks.</pre><ol><li value="8">List the disks on your server again.<br />Your Cloud Block Storage volume is ready as a disk. It was attached at /dev/xvdb and you created one partition on it, so now your available disk appears at /dev/xvdb1.</li></ol><p>Example Input:</p><pre>root@nosnetdfw:~# fdisk -l</pre><p>Example Ouput:</p><pre>Disk /dev/xvda: 42.9 GB, 42949672960 bytes<br />255 heads, 63 sectors/track, 5221 cylinders<br />Units = cylinders of 16065 * 512 = 8225280 bytes<br />Sector size (logical/physical): 512 bytes / 512 bytes<br />I/O size (minimum/optimal): 512 bytes / 512 bytes<br />Disk identifier: 0x000dc852<br /><br />&nbsp;&nbsp;&nbsp; Device Boot&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Start&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; End&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Blocks&nbsp;&nbsp; Id&nbsp; System<br />/dev/xvda1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5222&nbsp;&nbsp;&nbsp; 41942016&nbsp;&nbsp; 83&nbsp; Linux<br /><br />Disk /dev/xvdb: 107.4 GB, 107374182400 bytes<br />255 heads, 63 sectors/track, 13054 cylinders<br />Units = cylinders of 16065 * 512 = 8225280 bytes<br />Sector size (logical/physical): 512 bytes / 512 bytes<br />I/O size (minimum/optimal): 512 bytes / 512 bytes<br />Disk identifier: 0x59a4ec2c<br /><br />&nbsp;&nbsp;&nbsp; Device Boot&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Start&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; End&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Blocks&nbsp;&nbsp; Id&nbsp; System<br />/dev/xvdb1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 13054&nbsp;&nbsp; 104856223+&nbsp; 83&nbsp; Linux</pre><h3>Step 3. Format the volume.</h3><p>Formatting the volume enables the server to store information on it. In the following example, ext3 is used. However, you can use other file systems supported by your kernel, such as ext4, in place of ext3.</p><p>Example Input:</p><pre>root@nosnetdfw:~# mkfs -t ext3 /dev/xvdb1</pre><p>Example Output:</p><pre>mke2fs 1.41.11 (14-Mar-2010)<br />Filesystem label=<br />OS type: Linux<br />Block size=4096 (log=2)<br />Fragment size=4096 (log=2)<br />Stride=0 blocks, Stripe width=0 blocks<br />6553600 inodes, 26214055 blocks<br />1310702 blocks (5.00%) reserved for the super user<br />First data block=0<br />Maximum filesystem blocks=4294967296<br />800 block groups<br />32768 blocks per group, 32768 fragments per group<br />8192 inodes per group<br />Superblock backups stored on blocks: <br />32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, <br />4096000, 7962624, 11239424, 20480000, 23887872<br /><br />Writing inode tables: done&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br />Creating journal (32768 blocks): done<br />Writing superblocks and filesystem accounting information: done<br /><br />This filesystem will be automatically checked every 31 mounts or<br />180 days, whichever comes first.&nbsp; Use tune2fs -c or -i to override.</pre><h3>Step 4. Mount the volume.</h3><p>After partitioning and formatting the volume, you must mount it on the server. After the volume is mounted, it is available for use. <br /><br />Run the <strong>mnt</strong> command and assign the volume a name for use on your server. In the following example, the volume is named cbsvolume1.</p><p>Example Input:</p><pre>root@nosnetdfw:~# mkdir -p /mnt/cbsvolume1<br />root@nosnetdfw:~# mount /dev/xvdb1 /mnt/cbsvolume1/</pre><p>After the volume is mounted, the system does not send feedback. However, you can check that your volume is ready by running the df command to show your free disk space. Your new volume is listed last in the list of available drives.</p><p>Example Input:</p><pre>root@nosnetdfw:~# df -h</pre><p>Example Output:</p><pre>Filesystem&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Size&nbsp; Used Avail Use% Mounted on<br />/dev/xvda1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 40G&nbsp; 632M&nbsp;&nbsp; 37G&nbsp;&nbsp; 2% /<br />none&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 493M&nbsp; 136K&nbsp; 493M&nbsp;&nbsp; 1% /dev<br />none&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 498M&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp; 498M&nbsp;&nbsp; 0% /dev/shm<br />none&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 498M&nbsp;&nbsp; 36K&nbsp; 498M&nbsp;&nbsp; 1% /var/run<br />none&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 498M&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp; 498M&nbsp;&nbsp; 0% /var/lock<br />none&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 498M&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp; 498M&nbsp;&nbsp; 0% /lib/init/rw<br />none&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 40G&nbsp; 632M&nbsp;&nbsp; 37G&nbsp;&nbsp; 2% /var/lib/ureadahead/debugfs<br />/dev/xvdb1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 99G&nbsp; 188M&nbsp;&nbsp; 94G&nbsp;&nbsp; 1% /mnt/cbsvolume1</pre><p>Your drive is ready for use with your Linux server. However, you should consider performing the following step to ensure that your volume remains persistent after a server reboot.</p><h3>Step 5. Make the volume permanent.</h3><p>This step is optional, but it keeps your volume attached to your server after restarts.</p><ol><li>Add your volume to the static file system information in the fstab file.</li></ol><p><strong>Note</strong>: In your fstab options, add the _netdev option. This option prevents attempts to mount the volume until all networking is running.</p><p>Example Input:</p><pre>root@nosnetdfw:~# nano /etc/fstab </pre><p>Example Output:</p><pre>#<br /># /etc/fstab<br /># Created by anaconda on Tue May 29 20:13:27 2012<br />#<br /># Accessible filesystems, by reference, are maintained under '/dev/disk'<br /># See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info<br />#<br />/dev/xvda1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ext3&nbsp;&nbsp;&nbsp; defaults,noatime,barrier=0 1 1</pre><p>For this example, add the following line beneath /dev/xvda1... to add the volume to the static file system:</p><pre>/dev/xvdb1 /mnt/cbsvolume1 ext3 defaults,noatime,_netdev,nofail 0 2<br />
</pre><p>Now the volume persists on the server after server restarts.</p><h2><a name="prepare_windows"></a>Prepare Your Volume for Use with a Windows Server</h2><p><strong>Note</strong>: In the examples in the procedure, a 100 GB volume is added to a Windows Server 2012 server. The steps are similar for all next-generation Windows cloud servers.</p><h3>Step 1. Remotely connect to your Server.</h3><p>When you created your server, you were given a password. You need that password for this step. If you do not have the password, go to the Cloud Servers page of the Cloud Control Panel, click the gear icon next to the server name, and select <strong>Change Password</strong>.</p><ol><li>On the Server Details page of the Cloud Control Panel, find the IP address for your server.</li><li>Using the server’s IP address and password, use Remote Desktop to connect to the server as an administrator.</li></ol><p>When you first log in and view the Computer window, you will not see the Cloud Block Storage Volume that is attached to the server. In the following example, only the server's C drive is displayed.</p><p><img title="" src="http://www.rackspace.com/knowledge_center/sites/default/files/field/image/win%20-%20no%20volume.png" alt="" width="550" height="412" /></p><ol><li value="3">Open the Server Manager window by right-clicking on the Computer icon and selecting Manage.</li></ol><p><img title="" src="http://www.rackspace.com/knowledge_center/sites/default/files/field/image/cbs%20-%20manage%20-%20ord.png" alt="" width="441" height="340" /></p><p>The Server Manager window is displayed:</p><p><img title="" src="http://www.rackspace.com/knowledge_center/sites/default/files/field/image/cbs%20-%20win%20-%20server%20mgr.png" alt="" width="547" height="270" /></p><ol><li value="4">In the left pane of the Server Manager window, click <strong>File and Storage Services</strong>.</li></ol><p><img title="" src="http://www.rackspace.com/knowledge_center/sites/default/files/field/image/cbs%20-%20windows%20-%20file%20and%20storage.png" alt="" width="293" height="300" /></p><ol><li value="5">In the left pane, click <strong>Disks</strong>.&nbsp; In the following example, a 100 GB volume is attached to the server. It is listed as Offline, it has 100 GB of unallocated space, and its partition size is Unknown.</li></ol><p><img title="" src="http://www.rackspace.com/knowledge_center/sites/default/files/field/image/cbs%20-%20win%20-%20disks.png" alt="" width="608" height="259" /></p><h3>Step 2. Partition and format the drive.</h3><p>For Windows servers, you partition and format the volume by using the New Volume Wizard. The mounting process, called "bringing it online" in Windows terminology, is required before running this wizard.</p><ol><li>To bring the volume online, in the Disks pane, right-click the offline drive and select <strong>Bring Online</strong> from the pop-up menu.</li><li>In the Disks pane, right-click the drive and select <strong>New Volume</strong> from the pop-up menu. In Windows Server 2008, you right-click the unallocated drive and select <strong>New Simple Volume</strong>.</li></ol><p>The New Volume Wizard opens.</p><p><img title="" src="http://www.rackspace.com/knowledge_center/sites/default/files/field/image/cbs%20-%20win%20-%20new%20volume%20wizard%200.png" alt="" width="565" height="419" /></p><ol><li value="3">Click <strong>Next</strong>. In the Server and Disk page, the unformatted Cloud Block Storage volume is displayed.</li></ol><p><img title="" src="http://www.rackspace.com/knowledge_center/sites/default/files/field/image/cbs%20-%20win%20-%20wizard%201.png" alt="" width="561" height="409" /></p><ol><li value="4">Select the disk and click <strong>Next</strong>.&nbsp; If the Offline or Uninitialized Disk message appears, click <strong>OK</strong>.</li></ol><p><img title="" src="http://www.rackspace.com/knowledge_center/sites/default/files/field/image/win%20-%20init%20-%20disk.png" alt="" width="405" height="156" /></p><ol><li value="5">In the next three wizard pages, specify the drive size, the drive letter, and the format and name for the volume. Confirm your settings in the Confirmation page. In this example, the disk's full 100 GB is used, it is assigned the drive letter D, it is formatted as NTFS, and it is named My New CBS Volume.</li></ol><p><img title="" src="http://www.rackspace.com/knowledge_center/sites/default/files/field/image/cbs%20-%20win%20-%20volume%20details.png" alt="" width="601" height="438" /></p><ol><li value="6">To complete the process, click <strong>Create</strong>.</li></ol><p><img title="" src="http://www.rackspace.com/knowledge_center/sites/default/files/field/image/win%20-%20completion.png" alt="" width="616" height="243" /></p><p>When you open the Computer window now, the new Cloud Block Storage volume is displayed like a regular hard drive.</p><p><img title="" src="http://www.rackspace.com/knowledge_center/sites/default/files/field/image/cbs%20-%20win%20-%20confirmation.png" alt="" width="615" height="164" /></p><p>Your volume is now ready for use.</p>
