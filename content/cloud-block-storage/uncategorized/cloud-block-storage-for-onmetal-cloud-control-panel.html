---
node_id: 4733
title: Attach a Cloud Block Storage volume to an OnMetal server through the Cloud Control Panel
permalink: article/cloud-block-storage-for-onmetal-cloud-control-panel
type: article
created_date: '2015-07-09 20:16:48'
created_by: renee.rendon
last_modified_date: '2015-08-14 13:5213'
last_modified_by: Nate.Archer
products: Cloud Block Storage
categories: Uncategorized
body_format: tinymce
---

<p>Your OnMetal server can connect to a Cloud Block Storage volume.</p>

<p>Connecting an OnMetal server to a Cloud Block Storage volume is useful if you need more than 32 GB of storage but do not have a requirement for the fast I/O normally provided by an OnMetal server. Using an OnMetal server with Cloud Block Storage is particularly useful for OnMetal Compute and Memory v1 flavors. &nbsp;</p>

<p><span>Use the following procedure to attach a volume to your OnMetal server via the Cloud Control Panel.</span><span>&nbsp;The procedure assumes that the server instance&nbsp;already exists.</span></p>

<h2><a id="create" name="create">Create a new volume</a></h2>

<p>If you want to create&nbsp;a new volume, the following steps will guide you. If you have already created a volume, go to <a href="#attach">Attach a volume</a>.</p>

<p>1. Log in to the&nbsp;<a href="https://mycloud.rackspace.com/">Cloud Control Panel</a>.&nbsp;</p>

<p>2. <span>Under the Storage tab, choose <strong>Block Storage Volumes</strong>.</span></p>

<p><img alt="" border="2" height="200" src="/knowledge_center/sites/default/files/field/image/storage.png" width="276" /></p>

<p>3.&nbsp;Click&nbsp;<strong>Create Volume</strong> and and complete the fields.</p>

<p>4. Click&nbsp;<strong>Create Volume</strong>.&nbsp;</p>

<p>&nbsp;</p>

<h2><a id="attach" name="attach">Attach a volume</a></h2>

<p>1. Log in to the&nbsp;<a href="https://mycloud.rackspace.com/">Cloud Control Panel</a>.&nbsp;</p>

<p>2. Under the Storage tab, choose Block Storage Volumes.</p>

<p>3. Click the cog beside the volume that you want to attach and select&nbsp;<strong>Attach Volume</strong>.</p>

<p><img alt="" border="2" height="201" src="/knowledge_center/sites/default/files/field/image/attach%20volume.png" width="226" /></p>

<p>4. Select a server from the list and click <strong>Attach Volume</strong>.&nbsp;</p>

<p>&nbsp; &nbsp; Note:&nbsp;<span>You can attach more than one volume to a server.</span></p>

<p>You must use a CLI to complete steps 5 - 12.&nbsp;</p>

<p>5. Go into the instance to complete the setup.</p>

<pre>
$ export IP=50.57.63.76
$ ssh root@$IP</pre>

<p>6. From inside the instance, perform all instructions as root.</p>

<p>7. Set some variables from the metadata.</p>

<pre>
$ export TARGET_IQN=iqn.2010-11.com.rackspace:3e7af99d-655f-4af1-93bb-9160ee505d9f
$ export TARGET_PORTAL=10.190.254.69:3260
$ export INITIATOR_NAME=iqn.2008-10.org.openstack:9f956df7-3412-48e1-ac8b-017e2d643cf9</pre>

<p>8. Ensure that the iSCSI tooling is installed.</p>

<p>For Ubuntu and Debian:</p>

<pre>
$ apt-get update
$ apt-get install open-iscsi</pre>

<p>For Fedora and Centos:</p>

<pre>
$ yum install iscsi-initiator-utils</pre>

<p>9. Discover what block devices exist, so that you can find your new one later. The output might vary depending on the server flavor.</p>

<pre>
$ lsblk
NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
sda      8:0    0  28.9G  0 disk
├─sda1   8:1    0  28.8G  0 part /
└─sda2   8:2    0    64M  0 part
sdb      8:16   0   1.5T  0 disk
sdc      8:32   0   1.5T  0 disk</pre>

<p>10. Set up the iSCSI client.</p>

<pre>
$ echo InitiatorName=$INITIATOR_NAME &gt; /etc/iscsi/initiatorname.iscsi</pre>

<p>11. Attach the Cloud Block Storage volume.</p>

<pre>
$ iscsiadm -m discovery --type sendtargets --portal $TARGET_PORTAL
10.190.254.69:3260,1 iqn.2010-11.com.rackspace:3e7af99d-655f-4af1-93bb-9160ee505d9f
10.13.236.75:3260,1 iqn.2010-11.com.rackspace:3e7af99d-655f-4af1-93bb-9160ee505d9f
$ iscsiadm -m node --targetname=$TARGET_IQN --portal $TARGET_PORTAL --login
Logging in to [iface: default, target: iqn.2010-11.com.rackspace:3e7af99d-655f-4af1-93bb-9160ee505d9f, portal: 10.190.254.69,3260] (multiple)
Login to [iface: default, target: iqn.2010-11.com.rackspace:3e7af99d-655f-4af1-93bb-9160ee505d9f, portal: 10.190.254.69,3260] successful.</pre>

<p>12. Find the block device that was just added.&nbsp; In this case, it is sdd.</p>

<pre>
$ lsblk
NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
sda      8:0    0  28.9G  0 disk
├─sda1   8:1    0  28.8G  0 part /
└─sda2   8:2    0    64M  0 part
sdb      8:16   0   1.5T  0 disk
sdc      8:32   0   1.5T  0 disk
sdd      8:48   0     2G  0 disk</pre>

<p>Now you can use the device, just like on other cloud servers. For more information, see <a href="/knowledge_center/article/prepare-your-cloud-block-storage-volume">Prepare Your Cloud Block Storage Volume</a>.</p>

<p>&nbsp;</p>

<h2><a id="detach" name="detach">Detach a volume</a></h2>

<p>If you want detach a volume from an OnMetal server, be sure that the volume is <a href="http://www.rackspace.com/knowledge_center/article/detach-and-delete-cloud-block-storage-volumes">fully unmounted</a> from within the OnMetal server before following the steps below.</p>

<p>1.&nbsp;<span>Under the Storage tab, choose Block Storage Volumes.</span></p>

<p><span>2. Click the cog beside the volume that you want to attach and select&nbsp;</span><strong>Detach Volume</strong><span>.</span></p>

<p><span>3. Click <strong>Detach Volume</strong>.</span></p>

<p><span>Note: If any volumes are attached to an instance, deleting the instance fails. Detaching the instances and re-deleting will succeed.</span></p>
