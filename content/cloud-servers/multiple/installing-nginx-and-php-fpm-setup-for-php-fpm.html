---
node_id: 1320
title: Installing NGINX and PHP-FPM  - Setup for PHP-FPM
permalink: article/installing-nginx-and-php-fpm-setup-for-php-fpm
type: article
created_date: '2012-03-13 01:02:53'
created_by: Kevin Carter
last_modified_date: '2014-08-22 17:1626'
last_modified_by: jered.heeschen
products: Cloud Servers
categories: 'Apache,Nginx,Ubuntu/Debian Linux'
body_format: tinymce
---

<p>The steps in this article guide you through adding pool information to the PHP-FPM setup that you <a href="/knowledge_center/article/installing-nginx-and-php-fpm-setup-for-nginx">previously completed</a>.</p>
<p>When you entered the command to install PHP-FPM, the system created a default configuration for PHP-FPM. This default configuration might have included a directory for your sockets to reside in while they are active. If it did not, you must create this directory. In the following example, the sockets are placed in the <code>/var/run/php5-fpm/</code> directory. Use the following command to create the directory:</p>
<pre>mkdir -p /var/run/php5-fpm/</pre>
<p>Sockets automatically spawn in this if you are using the virtualhost setup and PHP-FPM pool template provided. No more action is required on your part.</p>
<p>To complete the setup, move to the <code>/etc/php5/fpm/pool.d/</code> directory where you will set up the different UNIX sockets on which PHP-FPM will function.</p>
<p><strong>NOTE:</strong> For your system to function properly, you must create a new pool for every virtual host that you set up.</p>
<p>The pool files should follow this naming convention: <code>YOURDOMAIN.conf</code></p>
<p>Following is a template for the pool files. Replace all instances of DOMAINNAME with your domain name.</p>
<pre>[DOMAINNAME]

listen = /var/run/php5-fpm/DOMAINNAME.socket
listen.backlog = -1
listen.owner = nginx
listen.group = www-data
listen.mode=0660

; Unix user/group of processes
user = (THE USERNAME OF THE USER THAT OWNS THE SITE FILES)
group = www-data

; Choose how the process manager will control the number of child processes.
pm = dynamic
pm.max_children = 75
pm.start_servers = 10
pm.min_spare_servers = 5
pm.max_spare_servers = 20
pm.max_requests = 500

; Pass environment variables
env[HOSTNAME] = $HOSTNAME
env[PATH] = /usr/local/bin:/usr/bin:/bin
env[TMP] = /tmp
env[TMPDIR] = /tmp
env[TEMP] = /tmp

; host-specific php ini settings here
; php_admin_value[open_basedir] = /var/www/DOMAINNAME/htdocs:/tmp
</pre>
<p>&nbsp;</p>
