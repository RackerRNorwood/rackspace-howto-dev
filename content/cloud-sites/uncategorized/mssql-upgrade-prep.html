---
node_id: 679
title: MSSQL 2005 - 2008 Upgrade Testing
permalink: article/mssql-upgrade-prep
type: article
created_date: '2011-03-16 21:57:40'
created_by: RackKCAdmin
last_modified_date: '2014-08-25 03:3054'
last_modified_by: rose.contreras
products: Cloud Sites
categories: Uncategorized
body_format: tinymce
---

<p><strong>NOTE:</strong> This article refers to the <a href="https://manage.rackspacecloud.com/" target="_blank">Cloud Sites Control Panel</a>. You can access this interface from the <a href="https://mycloud.rackspace.com/" target="_blank">Cloud Control Panel</a> by clicking your username in the upper-right corner of the control panel and selecting Cloud Sites Control Panel.<em><br /></em></p>
<p><a id="Pre-Migration_Tasks:" name="Pre-Migration_Tasks:"></a></p>
<h2><span class="mw-headline">Pre-Migration Tasks:</span></h2>
<p>If followed correctly, site impact during the migration process should be minimal. With that said, it is highly suggested to perform this migration at a non-peak time to minimize business impact. Here are some tips for database migration:</p>
<ul>
<li>You can set your default page to reflect that your site is currently under maintenance to limit the traffic that would be hitting the database.</li>
</ul>
<ul>
<li>Confirm that your current hosting plan has an adequate number of databases allotted. You may need to add additional databases to the plan to perform this migration successfully. If that’s the case, please review the following article: <a title="How do I modify the number of databases my site can have?" href="/knowledge_center/index.php/How_do_I_modify_the_number_of_databases_my_site_can_have%3F">How do I modify the number of databases my site can have?</a></li>
</ul>
<ul>
<li>You can set the database to READ_ONLY mode to ensure there are no updates done to the database while the migration is performed. If you would like to do this, please make your backup <em>just prior </em>to setting the database to READ_ONLY mode; otherwise you will not be able to restore the backup to the new database server.
<ul>
<li>To set the database to READ_ONLY you may use this query:
<pre>ALTER DATABASE [NumXYZ_OldDbName] SET READ_ONLY</pre>
</li>
<li>When the new database is restored set it to READ_WRITE:
<pre>ALTER DATABASE [NumXYZ_NewDbName] SET READ_WRITE</pre>
</li>
</ul>
</li>
</ul>
<p>&nbsp;</p>
<p><a id="Recommended_Steps:" name="Recommended_Steps:"></a></p>
<h2><span class="mw-headline">Recommended Steps:</span></h2>
<p>1) Create a new MSSQL 2008 database in the Cloud Sites Control Panel under the "Features" tab of the domain your MSSQL2005 database is on. <img src="http://c0476992.cdn.cloudfiles.rackspacecloud.com/createdb1.JPG" alt="createdb1.JPG" /></p>
<p><br /> 2) After the database has been created, please view its properties (as shown below) and note the change in the hostname. The information for you database will vary from the image depending on what data center your account is hosted in. Please use this new MSSQL 2008 hostname to update your connection strings. <img src="http://c0476992.cdn.cloudfiles.rackspacecloud.com/dbinfo.JPG" alt="dbinfo.JPG" /></p>
<p><br /> 3) Next use the web based admin tool, MyLittleAdmin, to back up your MSSQL 2005 database. The link for the online tool can be found in your Cloud Sites Control Panel by clicking on the database under the <strong>Features</strong> tab. For this backup please add "mlb" to the end of the URL. It is important to add this to the URL and not to go through the standard MyLittleAdmin link found in your Cloud Sites Control Panel. Using the links instead of adding the “mlb” may cause session issues between the two MyLittleAdmin versions. For example: <code>https://mssqladmin.websitesettings.com/mlb</code> <img src="http://c0476992.cdn.cloudfiles.rackspacecloud.com/mlb1.JPG" alt="mlb1.JPG" /></p>
<p><br /> 4) Login to your original MSSQL 2005 source database. <img src="http://c0476992.cdn.cloudfiles.rackspacecloud.com/mlb2.JPG" alt="mlb2.JPG" /></p>
<p>5) Now back up your MSSQL 2005 database use the MyLittleAdmin tool. When the backup has completed click on the file link to save the backup file to your local machine.</p>
<p><br /> 6) Log in to the MyLittleAdmin link again using your MSSQL 2008 database and login. Remember the login you use to restore will become the new owner of the database. Choose restore and upload the backup file you just downloaded in Step 5. Proceed with the restore.</p>
<p><img src="http://c0476992.cdn.cloudfiles.rackspacecloud.com/mlb3.JPG" alt="mlb3.JPG" /></p>
<p>7) The restore tool may notify you that the old users have no login mapping on the new SQL 2008 cluster. At this point your new database will be ready. The only access, at this point, is allowed to the owner login that you used to restore the database. If you need to change the owner to another login you created in the Cloud Sites Control Panel or remap users in your database to new logins please refer to the KB article on remapping database users and changing ownership in MSSQL.</p>
