---
node_id: 1508
title: Connect to a Cloud Databases instance
permalink: article/connecting-to-your-cloud-database
type: article
created_date: '2012-07-24 00:35:53'
created_by: RackKCAdmin
last_modified_date: '2015-09-03 20:1820'
last_modified_by: constanze.kratel
products: Cloud Databases
categories: Remote Access
body_format: full_html
---

<p>This article describes the following methods for connecting to a Cloud Databases instance:</p>

<ul>
	<li><a href="#ssh">Connect through a cloud server by using SSH and the hostname</a></li>
	<li><a href="#direct">Connect to the database directly by using the hostname</a></li>
	<li><a href="#lb">Connect by using a cloud load balancer </a></li>
</ul>

<h2 id="ssh">Connect through a cloud server by using SSH and the hostname</h2>

<ol>
	<li>Log in to the <a href="http://mycloud.rackspace.com/">Cloud Control Panel</a>.</li>
	<li>In the top navigation bar, select <strong>Databases &gt; Database Instances</strong>.</li>
	<li>Click the name of the instance to which you want to connect.</li>
	<li>Copy the hostname string.</li>
	<li>From a terminal window, use SSH to log in to a cloud server that's been created in the same region as your cloud database instance. Following is an example SSH command:
	<pre>
ssh user@IPaddress
        </pre></li>
	<li>On your server, use the MySQL client (or a similar tool) to access the database. For MySQL, use the following command and paste the hostname string following the <code>-h</code> option:
	<pre>
mysql -h hostname_string -u database_instance_username -p
        </pre></li>
</ol>

<h2 id="direct">Connect to the database directly by using the hostname</h2>

<p>This section provides a sample script that creates a very simple webpage. You can use this webpage to test that your MySQL database is working. You can also use it as a very simple calculator. You copy the script and paste it into a text editor. Then you modify the script with your own hostname, user name, password, and database instance name information and save the changes. Finally, you copy the script to your cloud server and execute the script to display the simple webpage and test your connection to your database instance.</p>

<p>Your web server must be in the same region as your database instance (that is, able to connect to the instance via the cloud private network).</p>

<p><strong>Note:</strong> This process assumes that your web server and PHP are configured correctly.</p>

<h3>Copy and paste the PHP script</h3>

<p>Copy the following PHP script and paste it into a text editor:</p>
<pre>
&lt;html&gt; 
&lt;head&gt;&lt;title&gt;Connecting to Cloud Databases&lt;/title&gt;&lt;/head&gt; 
&lt;body&gt;&lt;pre&gt; 
&lt;?php 
    // phpinfo(); 
    $THE_HOST = "5c70345ad036fc112dc0a14ee1db7992f5c172db.rackspaceclouddb.com"; 
    $THE_USER = "fmdb_readonly"; 
    $THE_PWD = "fmdb_readonly"; 
    $THE_DB = "FEATUREMANIA"; 

    // 
    // Get "e" 
    // 
    $arg_expr = trim($_POST["e"]); 
    if($arg_expr == "") { 
        $arg_expr = "PI()"; 
    } 
    else { 
        if(get_magic_quotes_gpc()) { 
         $arg_expr = stripslashes($arg_expr); 
        } 
        
        // 
        // Connect to the database 
        // 
        $connection = mysql_connect($THE_HOST, $THE_USER, $THE_PWD); 
        if (!$connection) { 
             die('I could not connect to the database. The error is: ' . mysql_error()); 
        } 
        mysql_select_db($THE_DB, $connection); 
        // 
        // Calculation 
        // 
        $result = mysql_query("SELECT (" . $arg_expr . ");", $connection); 
        $row = mysql_fetch_array($result, MYSQL_NUM); 
        $eValue = $row[0]; 
        printf("The database connection worked, and MySQL says that %s = %s&lt;BR&gt;%s", $arg_expr, $eValue, mysql_error());
        mysql_free_result($result); 
        mysql_close($connection); 
    } 
?&gt; 
    &lt;FORM ACTION='clouddatabases.php' METHOD='POST'&gt; 
        Enter a MySQL expression: 
        &lt;INPUT TYPE="TEXT" NAME="e" VALUE="&lt;? echo $arg_expr; ?&gt;"/&gt; 
        &lt;INPUT TYPE="SUBMIT"&gt; 
    &lt;/FORM&gt; 
    This is a simple PHP example to test your connection to Rackspace Cloud Databases. 
    It does not require your database to have any tables. 
    It doubles as a handy way to calculate simple MySQL expressions from the browser. 
    &lt;BR&gt; 
    Because this sample uses string concatenation to compose SQL statements, only use this in your development environment in your password-protected site. 
    &lt;BR&gt;  
    EXAMPLES: 
        PI()*3*3 
        curdate() 
        3=3 AND 4&gt;4 
        MID('Rackspace',1,4) 
        SIN(PI()/2) 
        SHA1('Rackspace Cloud Databases') 
    &lt;/pre&gt;&lt;/body&gt; 
&lt;/html&gt;
</pre>

<h3>Copy the instance hostname</h3>

<ol>
	<li>Log in to the <a href="http://mycloud.rackspace.com/">Cloud Control Panel</a>.</li>
	<li>In the top navigation bar, select <strong>Databases&nbsp;&gt; Database Instances</strong>.</li>
	<li>Click the name for the instance to which you want to connect and view the details for the instance.</li>
	<li>Copy the hostname string.</li>
</ol>

<h3>Paste the instance hostname into the text editor </h3>

<ol>
	<li>Locate the following line of the script in the text editor:
	<pre>
$THE_HOST = "5c70345ad036fc112dc0a14ee1db7992f5c172db.rackspaceclouddb.com";
</pre>
	</li>
	<li>Paste the hostname string inside the double quotation marks, replacing the following value:<br />
	<br />
	<pre>
5c70345ad036fc112dc0a14ee1db7992f5c172db.rackspaceclouddb.com
        </pre></li>
</ol>

<h3>Modify the information in the script to specify your database user, password, and database instance name</h3>

<ol>
	<li>Locate the following line of the script in the text editor:
	<pre>
$THE_USER = "fmdb_readonly";
</pre>
	</li>
	<li>Replace the <code>fmdb_readonly</code> value with the name of your database user (you can find this information in the Users section of the database instance details page in the control panel).</li>
	<li>Locate the following line of the script in the text editor:
        <pre>
$THE_PWD = "fmdb_readonly";
        </pre></li>
	<li>Replace the <code>fmdb_readonly</code> value with the password for the user.</li>
	<li>Locate the following line of the script in the text editor:<br />
	<pre>
$THE_DB = "FEATUREMANIA";
        </pre></li>
	<li>Replace the <code>FEATUREMANIA</code> value with the name of your database.</li>
	<li>Save the changes you made to the script in the editor to a file name that ends in <strong>.php</strong> (for example, <strong>clouddatabases.php</strong>).
	<p><strong>Note:</strong> If you change the script file name to something other than <strong>clouddatabases.php</strong>, you must modify the following line in the script to replace the <strong>clouddatabases.php</strong> value with the name you chose for your script:
       <pre>
&lt;FORM ACTION='clouddatabases.php' METHOD='POST'&gt;
       </pre></li>
</ol>

<h3>Copy the modified script and execute it on your server </h3>

<ol>
	<li>Copy the modified script to your server (for example, to the website's <strong>cgi-bin</strong> folder).</li>
	<li>Execute the script to test connectivity to your database.
	<p>If the connection to your database succeeds, the web page will run and display a message similar to the following  one: <code>The database connection worked, and MySQL says that PI()*3*3 = 28.274334</code></p>
	</li>
	<li>Type a MySQL expression (for example, <strong>PI()*3*3</strong>) and click <strong>Submit</strong> to have it evaluated.</li>
</ol>

<h2 id="lb">Connect by using a cloud load balancer </h2>

<p><strong>Note:</strong> This load balancer should be used only to access your Cloud Databases instance. Do not add other nodes to the load balancer.</p>

<h3>Copy the instance hostname</h3>

<ol>
       <li>Log in to the <a href="http://mycloud.rackspace.com/">Cloud Control Panel</a>.</li>
       <li>In the top navigation bar, select <strong>Databases &gt; Database Instances</strong>. </li>
       <li>Click the name of the instance that you want to connect to the load balancer and view the details for the instance. </li>
       <li>Note the region that this database is in. You must create the load balancer in the same region.</li>
       <li>Copy the hostname string.</li>
</ol>

<h3>Create a load balancer for the instance</h3>

<ol>
        <li>In the top navigation bar of the Cloud Control Panel, click <strong>Networking</strong>.</li>
        <li>In the menu, under <strong>Create Resources</strong>, click <strong>Load Balancer</strong>.
        <p>The Create Load Balancer page appears.</p></li>
        <li>Enter a name for the load balancer. </li>
        <li>Specify the same region in which your database instance is located.</li>
        <li>In the Configuration section, select <strong>Accessible on the Public Internet</strong> for the <strong>Virtual IP</strong> option.</li>
        <li>Select <strong>MySQL</strong> for the <strong>Protocol/Port</strong>.</li>
        <li>In the Add Nodes section, click <strong>Add External Node</strong>.</li>
        <li>Paste the hostname string of the database instance in the <strong>IP or Hostname</strong> field.</li>
        <li>Enter the default MySQL port <strong>3306</strong> for port.</li>
        <li>Click <strong>Add External Node</strong>.
        <li>Click <strong>Create Load Balancer</strong>.
</ol>

<p>The load balancer is created and your database is now accessible through the load balancer.</p>

<p><strong>Note:</strong> Using a load balancer to access your database instance incurs normal load balancing and bandwidth charges. For more information, see <a href="http://www.rackspace.com/cloud/cloud_hosting_products/loadbalancers/pricing/">Cloud Load Balancers Pricing and Calculator</a>.</p>
