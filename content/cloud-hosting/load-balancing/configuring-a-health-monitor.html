---
node_id: 1492
title: Configure a Health Monitor
permalink: article/configuring-a-health-monitor
type: article
created_date: '2012-07-24 00:10:08'
created_by: RackKCAdmin
last_modified_date: '2015-05-12 13:5343'
last_modified_by: kyle.laffoon
products: Cloud Hosting
categories: Load Balancing
body_format: tinymce
---

<h2>What is a health monitor?</h2>

<p>The Cloud Load Balancers&nbsp;service includes a health monitoring operation that periodically checks the health of the nodes associated with your load balancer to ensure that they are responding correctly. You can&nbsp;enable one health monitor per load balancer.</p>

<h2>Why is a health monitor important?</h2>

<p>If the health monitor determines that a node is not responding, the node is removed from the load balancer's rotation until the health monitor determines that the node is functional.&nbsp;The health monitor periodically performs health checks of each node, including new nodes that are added to the load balancer.&nbsp;By performing these health checks, the health monitor helps keep your load balancer operating smoothly by routing traffic only to nodes that are functioning properly.</p>

<h3>To configure a health monitor</h3>

<ol start="1">
	<li>Log in to the Cloud Control Panel.</li>
	<li>In the top navigation bar, click&nbsp;<strong>Networking &gt;&nbsp;Load Balancers.</strong><strong>​</strong>​&nbsp;All existing load balancers for your account are displayed.</li>
	<li>Click the gear icon next to the name of the load balancer for which you want to create a health monitor, and select&nbsp;<strong>Edit Health Monitoring</strong>.<br />
	<img alt="" border="2" height="380" src="/knowledge_center/sites/default/files/field/image/1492-confighealthmon-2_0.png" width="212" /></li>
	<li>In the popup dialog&nbsp;box, select a <strong>Monitor Type:</strong>


<ul>
	<li><strong>CONNECT</strong>: The Connect health monitor connects to each node on its defined port to ensure that the service is listening correctly. The Connect monitor is the most basic type of health check and does no postprocessing or protocol-specific health checks. Provide the required information for this monitor.<br />
	<br />
	<img alt="" border="2" height="338" src="/knowledge_center/sites/default/files/field/image/1492-confighealthmon-3.png" width="354" /><br />
	&nbsp;
	<ul>
		<li><strong>Interval</strong>:&nbsp;Minimum number of seconds to wait before executing the health monitor;&nbsp;must be a number between 1 and 3600.</li>
		<li><strong>Timeout</strong>:&nbsp;Maximum number of seconds to wait for a connection to be established before timing out; must be a number between 1 and 300.</li>
		<li><strong>Attempts</strong>:&nbsp;Number of permissible monitor failures before removing a node from rotation; must be a number between 1 and 10.</li>
	</ul>
	</li>
	<li><strong>HTTP</strong>:&nbsp;The HTTP health monitor is more intelligent than the Connect monitor. It can process an HTTP response to determine the actual condition of a node. Provide the required information for this monitor.<br />
	<br />
	<img alt="" border="2" height="378" src="/knowledge_center/sites/default/files/field/image/1492-confighealthmon-4.png" width="323" /><br />
	&nbsp;
	<ul>
		<li><strong>Interval</strong>:&nbsp;Minimum number of seconds to wait before executing the health monitor; must be a number between 1 and 3600.</li>
		<li><strong>Timeout</strong>:&nbsp;Maximum number of seconds to wait for a connection to be established before timing out; must be a number between 1 and 300.</li>
		<li><strong>Attempts</strong>:&nbsp;Number of permissible monitor failures before removing a node from rotation; must be a number between 1 and 10.</li>
		<li><strong>HTTP Path</strong>:&nbsp;The HTTP path that will be used in the sample request.</li>
		<li><strong>Status Regex</strong>:&nbsp;A regular expression that will be used to evaluate the HTTP status code returned in the response. For example, you could use the regular expression <strong>^(500|40[1348])$</strong> to look for&nbsp;<em>unsuccessful</em>&nbsp;status codes (500, 401, 403, 404, and 408) returned in the response, or you could use the regular expression <strong>^[2][0][02]$</strong> to look for&nbsp;<em>successful</em>&nbsp;status codes of 200 and 202 in the response.</li>
		<li><strong>Body Regex</strong>:&nbsp;A regular expression that will be used to evaluate the contents of the body of the response. For example you could use the regular expression <strong>^.*(Unauthorized|Forbidden|Not Found|Timeout|Server Error).*$</strong> to look for any of those potentially problematic strings in the body of the response, or you could use the regular expression <strong>^success$</strong> to look for the string <strong>success</strong>.</li>
	</ul>
	</li>
</ul>

<p><strong>Note</strong>:&nbsp;The system&nbsp;evaluates only the first 2048 bytes of the response&nbsp;against the body regex that you&nbsp;specify, so you should test accordingly.&nbsp;</p>

<p><strong>Tip</strong>: To debug the HTTP&nbsp;health monitoring, you should test the body regex against the IP address of the nodes&nbsp;that are being disabled.&nbsp;&nbsp;You can use the following cURL command to see what the health monitoring analyzes:&nbsp;</p>

<pre>
curl -s -r 0-2048 https://<i>YOUR_IP_ADDRESS</i> | head -c 2048 | egrep "<i>YOUR_REGULAR_EXPRESSION</i>"</pre></li>


	<li>Click&nbsp;<strong>Save Monitoring Settings</strong></li>
</ol>

<p><br />
You have now configured a health monitor for your load balancer. To disable the health monitor, follow steps 1 through 3,&nbsp;and then click&nbsp;<strong>Disable&nbsp;</strong>in the pop up dialog box. In the confirmation dialog box, click <strong>Disable Health Monitor</strong>.</p>

<p>&nbsp;</p>

<p>&nbsp;</p>
