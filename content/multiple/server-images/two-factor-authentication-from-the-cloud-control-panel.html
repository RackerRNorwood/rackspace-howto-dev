---
node_id: 4140
title: Multi-factor authentication from the Cloud Control Panel
permalink: article/two-factor-authentication-from-the-cloud-control-panel
type: article
created_date: '2014-07-17 01:59:40'
created_by: margaret.eker
last_modified_date: '2015-10-07 20:4409'
last_modified_by: margaret.eker
products: 'Cloud Servers,Cloud Backup,Cloud Monitoring,Cloud Files,Cloud Load Balancers,Cloud Databases,Cloud Block Storage,Cloud Big Data,Cloud Orchestration,Auto Scale'
categories: Server Images
body_format: tinymce
---

<p>Customers can increase security on Rackspace Cloud accounts by using the multi-factor authentication capabilities provided by the Rackspace Cloud Identity service. Multi-factor authentication adds an extra layer of identity verification to the log in process by requiring a user to submit a time-sensitive passcode that the Identity service sends to an SMS or OTP (one-time password) device associated with the&nbsp;user's account:</p>

<ul>
	<li>an SMS device is a mobile phone, notebook, or other digital device with an associated phone number that is capable of recieving SMS text messages.<br />
	&nbsp;</li>
	<li>an OTP device is created in an OTP client application installed on your phone, notebook, or other digital device.</li>
</ul>

<p>You can add multi-factor authentication by updating your account settings in the <a href="https://mycloud.rackspace.com">Rackspace Cloud Control Panel</a>.&nbsp; After you pair a device with your account, authentication becomes a two-step process:</p>

<ol>
	<li>Each time you log in, the Rackspace authentication service generates a passcode and sends it to the associated device.<br />
	&nbsp;</li>
	<li>After the passcode is sent, the system prompts you to type the passcode and submit it to the Identity service to complete the authentication process.&nbsp;<br />
	<br />
	<strong>Note:</strong> Standard text message rates and data fees apply based on your contract with your mobile device provider.</li>
</ol>

<p>Additionally, Rackspace Cloud account administrators can configure account-wide settings to specify a multi-factor authentication policy for all account users.&nbsp; By default, account users have the option to set up and use multi-factor authentication.&nbsp; Administrators can update the account-wide settings&nbsp; to require multi-factor authentication for all users. When this setting is enabled, users cannot access their account until they configure multi-factor authentication.&nbsp; Current users are logged out as soon as the account-wide requirement is applied.&nbsp; At the next login, users are notified of the increased security and prompted to complete the setup process.</p>

<p>For more information, see the following sections:</p>

<ul>
	<li><a href="#configure-mfa-sms">Configure multi-factor authentication by SMS device</a></li>
	<li><a href="#configure-mfa-otp">Configure multi-factor authentication by OTP device</a></li>
	<li><a href="#configure-mfa-default">Set default multi-factor authentication method</a></li>
	<li><a href="#mfa-accountWide-settings">Configure account-wide multi-factor authentication settings from an Administrator account.</a></li>
	<li><a href="#mfa-config-login">Configure multi-factor authentication during account log in</a></li>
	<li><a href="#login2Factor">Log in to the Rackspace Cloud by using multi-factor authentication</a></li>
	<li><a href="#manage2Factor">Manage multi-factor authentication</a></li>
	<li><a href="#troubleshoot">Troubleshooting</a></li>
</ul>

<p>&nbsp;</p>

<hr />
<h3><a name="Notes"></a><strong>Notes</strong></h3>

<ul>
	<li>
	<p>MyRackspace also implements multi-factor authentication, but it is not implemented through the Rackspace Cloud Identity 2.0 API. For information about using multi-factor authentication with MyRackspace, see&nbsp; <em><a href="/knowledge_center/article/myrackspace-two-factor-authentication" title="MyRackspace Two-Factor Authentication">MyRackspace Two-Factor Authentication</a></em>.</p>
	</li>
	<li>
	<p>You cannot configure multi-factor authentication from the Cloud Sites Control Panel.&nbsp;However, if you set up multi-factor authentication for your Rackspace Cloud account using the <a href="https://mycloud.rackspace.com/">Cloud Control Panel</a>, the configuration also applies to your Cloud Sites account. Multi-factor authentication can only be enabled for the main account user login; sub-account user logins are not able to use this feature. In addition, FTP user accounts (main or sub) cannot use multi-factor authentication.</p>
	</li>
	<li>
	<p>When multi-factor authentication is enabled for an account, it is enabled only for authentication via username and password credentials.<br />
	If a client a user supplies a valid username and API key credentials, the client receives the authentication token immediately. This behavior allows automated processes or agents to run operations by using the username and API key credentials.&nbsp;</p>
	</li>
	<li>
	<div>
	<p>If you use an OpenStack or Rackspace CLI tool&nbsp;to authenticate with username and password, you cannot authenticate if you add multi-factor authentication to your account because the CLI tools do not support multi-factor authentication.&nbsp; To work around this problem, try one of the following approaches:</p>

	<ul>
		<li>Do not enable multi-factor authentication for accounts that require username and password authentication through a CLI tool.</li>
		<li>If you are using the nova-client, configure the client to authenticate with an&nbsp;API key.</li>
		<li>If you are using a client that supports token authentication, use cURL to get the authentication token. Export the token value to the token environment variable for the client--for example, OS_TOKEN or OS_AUTH_TOKEN. Then, use the CLI to submit API requests to the Rackspace Cloud.&nbsp;<br />
		&nbsp;</li>
	</ul>
	</div>
	</li>
	<li>You can also manage multi-factor authentication from the <a href="http://docs.rackspace.com/auth/api/v2.0/auth-client-devguide/content/MFA_Ops.html">Rackspace Identity service API. </a></li>
</ul>

<p>&nbsp;</p>

<hr />
<h2><a name="configure-mfa-sms"></a>Configure your account to authenticate by using an SMS device</h2>

<p>To configure you account to use an SMS device for multi-factor authentication, you need the phone number associated with your digital device. The device must be enabled to receive SMS text messages.</p>

<p><strong>To register and verify an SMS device</strong></p>

<ol>
	<li>
	<p>Log in to the <a href="https://mycloud.rackspace.com/" title="Cloud Control Panel">Rackspace Cloud Control Panel</a>.</p>
	</li>
	<li>
	<p>Click <strong>Account: <em>yourUsername</em> </strong>in the top-right corner, and then, select <strong>Account Settings </strong>from the menu<strong>.</strong></p>
	</li>
	<li>
	<p>In the <strong>Multi-factor authentication</strong> field, click <strong>Add</strong>.</p>
	</li>
	<li>
	<p><a name="device-config-steps"></a>On the Register SMS Device form, select the country code for the device, and then type the device phone number. Click <strong>Add SMS Device. </strong><br />
	<br />
	<img alt="Add an SMS device to your account so you can set up multi-factor authentication" border="2" src="/knowledge_center/sites/default/files/field/image/add-sms-device.png" /><br />
	<br />
	When you click <strong>Add SMS Device</strong>, the Identity service sends an SMS text message with a four-digit PIN to the specified phone.<br />
	<br />
	&nbsp;&nbsp;&nbsp; <img alt="" border="2" height="200" src="/knowledge_center/sites/default/files/field/image/verify_code.png" width="290" /></p>
	</li>
	<li>
	<p>On the Verify Code form in the control panel, type the PIN code sent to your mobile device in the verification code field. Then, click <strong>Verify Device</strong>.<br />
	<br />
	<img alt="Enter the verification code to pair the SMS device with your Rackspace Cloud account" border="2" src="/knowledge_center/sites/default/files/field/image/verify-sms-device.png" /><br />
	<br />
	After you submit the verification code, the Cloud Control Panel login page is displayed so that you can re-authenticate by using the multi-factor authentication process.</p>
	</li>
</ol>

<h2><a name="configure-mfa-otp"></a>Configure your account to authenticate by using an OTP device</h2>

<p>To configure your account to use an OTP device for multi-factor authentication, you must have one of the following OTP client applications installed on your device:&nbsp; <a href="https://www.authy.com/">Authy</a>, <a href="https://www.duosecurity.com/">Duo</a>,<br />
<a href="https://support.google.com/accounts/answer/1066447?hl=en">Google Authenticator</a>, or <a href="https://www.secureauth.com/Support/Downloads/Client-Applications.aspx">SecureAuth OTP</a> .&nbsp;</p>

<p><strong>To register and verify an OTP device</strong></p>

<ol>
	<li>
	<p>Log in to the <a href="https://mycloud.rackspace.com/" title="Cloud Control Panel">Rackspace Cloud Control Panel</a>.</p>
	</li>
	<li>
	<p>Click <strong>Account: <em>yourUsername</em> </strong>in the top-right corner, and then, select <strong>Account Settings </strong>from the menu<strong>.</strong></p>
	</li>
	<li>
	<p>In the <strong>Multi-factor Authentication Mobile Passcode</strong> field, click <strong>Add</strong>.</p>
	</li>
	<li>
	<p><a name="otp-device-config-steps"></a>On the Name of your Device form, type a <strong>Device nickname</strong> for the OTP device. Then, click <strong>Add Device.</strong><br />
	<br />
	<img alt="Add an OTP device to your Rackspace Cloud account" border="2" src="/knowledge_center/sites/default/files/field/image/name-your-otp-device.png" /><br />
	<br />
	After you click <strong>Add Device</strong>, the Identity service generates a barcode that you can use to link your Rackspace Cloud account with an OTP device.</p>
	</li>
	<li>
	<p>To pair your Rackspace Cloud account with your device, use the OTP client application on your device to scan the barcode on the Verify Code form.<br />
	<br />
	<img alt="Scan barcode by using the OTP application on your device to pair your Rackspace Cloud account with your device." border="2" src="/knowledge_center/sites/default/files/field/image/scan-barcode.png" /><br />
	<br />
	After you scan the code, the OTP application on your device creates the OTP device using the device name you specified. It also generates a passcode.<br />
	<br />
	<img alt="OTP device with generated passcode for use with one-time password authentication." src="/knowledge_center/sites/default/files/field/image/OTP-device.png" /><br />
	&nbsp;</p>
	</li>
	<li>
	<p>To verify the new device, enter the passcode on the Verify Code form. Then, click <strong>Verify Mobile Passcode</strong>.<br />
	<br />
	<strong>Note:&nbsp; </strong>As soon as you submit the verification code, you will be logged out.<br />
	<br />
	<img alt="Verify new OTP device for multi-factor authentication" src="/knowledge_center/sites/default/files/field/image/otp-verify-device-code.png" /><br />
	<br />
	<strong>Note:&nbsp;</strong> By default, the new OTP device will be the default method for authentication. If you do not want it<br />
	to be the default or if you do not want to be logged out of your account, remove the selection from<strong> Make this my default authentication method</strong>.<br />
	You can update the default authentication method on the Account settings page.</p>
	</li>
	<li>
	<p>On the Cloud Control panel, enter your username and password. Then, enter the verification code from the OTP device that you paired with your account</p>
	</li>
</ol>

<hr />
<h2><strong><a name="configure-mfa-default"></a>Change default multi-factor authentication method</strong></h2>

<p>If your account has been configured with both SMS and OTP devices, you can select the default multi-factor authentication method from the Account Settings page.</p>

<ol>
	<li>
	<p>Log in to the <a href="https://mycloud.rackspace.com/" title="Cloud Control Panel">Rackspace Cloud Control Panel</a>.</p>
	</li>
	<li>
	<p>Click <strong>Account: </strong><em><strong>yourUsername</strong>&nbsp;</em>in the top-right corner, and then select <strong>Account Settings </strong>from the menu<strong>.</strong></p>
	</li>
	<li>
	<p>In the Multi-Factor Authentication section, review the default authentication method setting.&nbsp; Click <strong>Edit</strong> to change it.<br />
	<br />
	<img alt="Change default authentication method." border="2" src="/knowledge_center/sites/default/files/field/image/default-authentication-method.png" /></p>
	</li>
</ol>

<hr />
<h2><strong><a name="mfa-accountWide-settings"></a>Configure account-wide multi-factor authentication settings from an Administrator account</strong></h2>

<p>Account administrators can update Rackspace Cloud account-wide settings to require all users to authenticate by using multi-factor authentication. When this setting is enabled, users cannot access their accounts until they add and verify a device on their account.</p>

<h3><strong>Prerequisites</strong></h3>

<ul>
	<li>Administrator account <a href="#configure2Factor">configured for multi-factor authentication</a>.</li>
	<li>To prevent service interruptions, ask account users to configure multi-factor authentication before you add the account-wide requirement.<br />
	If multi-factor authentication is already enabled, users do not lose account access when the required setting is applied.</li>
</ul>

<p><strong><strong>To configure account-wide settings for multi-factor authentication</strong></strong></p>

<ol>
	<li>
	<p>Log in to the <a href="https://mycloud.rackspace.com/" title="Cloud Control Panel">Rackspace Cloud Control Panel</a>.</p>
	</li>
	<li>
	<p>Click <strong>Account: </strong><em><strong>yourUsername</strong>&nbsp;</em>in the top-right corner, and then select <strong>Account Settings </strong>from the menu<strong>.</strong></p>
	</li>
	<li>
	<p>In the <strong>Account-Wide Settings</strong>&nbsp;section, click the pencil to edit the <strong>Require multi-factor authentication</strong> setting.</p>
	</li>
	<li>
	<p>On the Account-wide two-factor authentication form, click the selection to set the policy for account users. Then, click <strong>Save Setting</strong> to apply the change.</p>
	<img alt="Update the account-wide multi-factor authentication enforcement setting." border="2" height="118" src="/knowledge_center/sites/default/files/field/image/mfa-required-setting_0.png" width="550" /><br />
	<br />
	If you update the setting to required, users who do not have multi-factor authentication configured must add it the next time they log in. Current users who have not set up multi-factor authentication are logged out after seeing an error message like the following one:<br />
	<br />
	<img alt="Force user to log out when mulit-factor authentication requirement is not met." border="2" height="112" src="/knowledge_center/sites/default/files/field/image/mfa-force-logout.png" width="513" /><br />
	<br />
	When these users log back in, they are guided through the multi-factor authentication set up.</li>
</ol>

<hr />
<h2><strong><a name="mfa-config-login"></a>Configure multi-factor authentication during account login</strong></h2>

<p><strong>If your account is not configured for multi-factor authentication when it is required, you are notified about the increase in security requirements and prompted to set up authentication.</strong></p>

<p><br />
<strong><img alt="Updated account with two-factor authentication requirement" border="2" height="212" src="/knowledge_center/sites/default/files/field/image/mfa-setup-required.png" /></strong></p>

<p>To access your account, click <strong>Set Up Multi-Factor Authentication. </strong>Then, follow the <a href="#device-config-steps">steps</a> to register and verify a device, and authenticate by using the passcode sent to the device.</p>

<hr />
<h2><strong><strong><strong><a name="login2Factor"></a></strong></strong>Log in to the Rackspace Cloud by using multi-factor authentication</strong></h2>

<p>If you add multi-factor authentication capabilities to your account,&nbsp; authentication is a two-step process.</p>

<h3><strong>Prerequisites</strong></h3>

<ul>
	<li>Rackspace Cloud accounts with valid username and password credentials</li>
	<li>Access to the registered and verified SMS or OTP device paired with your Rackspace Cloud account</li>
</ul>

<p>To log in to the Rackspace Cloud with multi-factor authentication</p>

<ol>
	<li>
	<p>Log in to the <a href="https://mycloud.rackspace.com/" title="Cloud Control Panel">Rackspace Cloud Control Panel</a>&nbsp;with your user name and password.<br />
	<br />
	<img alt="" border="2" height="206" src="/knowledge_center/sites/default/files/field/image/control_panel_login.png" width="362" /><br />
	<br />
	If you account is configured to use multi-factor authentication with an SMS device, the Rackspace Cloud Identity service sends an SMS text message with a 7-digit passcode to the device registered to your account.<br />
	<br />
	<img alt="SMS text message with Rackspace passcode for two-factor authentication" border="2" height="207" src="/knowledge_center/sites/default/files/field/image/mfa_passcode.png" width="366" /><br />
	<br />
	If your device is configured to use multi-factor authentication by OTP device, open the OTP client application and get the passcode from the OTP device associated with your Rackpspace Cloud account.<br />
	<br />
	<img alt="OTP device with generated passcode for use with one-time password authentication." height="189" src="/knowledge_center/sites/default/files/field/image/OTP-device.png" width="360" /><br />
	&nbsp;</p>
	</li>
	<li>When prompted, type the passcode in the <strong>Passcode</strong> field on the control panel. Then, click <strong>Verify Code</strong> to log in to your account:<br />
	<br />
	<img alt="Form to supply the two-factor authentication passcode sent to mobile device registered to Rackspace Cloud account." border="2" height="250" src="/knowledge_center/sites/default/files/field/image/enter_mfa_passcode.png" width="439" /><br />
	<br />
	If the passcode is expired or invalid, refresh the page to return to the Rackspace Cloud Control Panel login page. Then, log in again and click the Resend code option on the Account Settings page to get a new passcode.</li>
</ol>

<p><strong>&nbsp;</strong></p>

<hr />
<h2><strong><a name="manage2Factor"></a>Manage multi-factor authentication</strong></h2>

<p><span>Rackspace Cloud users can view and manage the multi-factor authentication configuration from the Account Settings menu in the cloud control panel.</span></p>

<p><img alt="Rackspace Cloud Account multi-factor authentication settings" border="2" src="/knowledge_center/sites/default/files/field/image/account-settings-mfa.png" /></p>

<p><strong><strong>To view multi-factor authentication settings</strong></strong></p>

<ol>
	<li>After logging in to the control panel, click <strong>Account: <em>yourUsername</em> &gt; Account Settings</strong> to open the Account Settings page for your Rackspace Cloud account.</li>
	<li>In the Login Details section, review the information in the <strong>Multi-Factor Authentication</strong> field.</li>
</ol>

<h4><strong><strong><strong>To verify your device</strong></strong></strong><br />
<br />
You can verify your SMS or OTP device from the Account Settings page.</h4>

<ul>
	<li>
	<h4>If you have an SMS device on your account that has not been verified, use the Verify option to complete the verification process.</h4>
	</li>
	<li>If you have an OTP device that has not been verified, use the Manage option to complete the verification process.<br />
	<br />
	<img alt="Verify multi-factor authentication device options" border="2" src="/knowledge_center/sites/default/files/field/image/verify-device-options.png" /></li>
</ul>

<p><strong><strong><strong>To recover an account</strong></strong></strong></p>

<p>You can&nbsp;generate up to 10 bypass codes that you can use to authenticate if the device associated with your account is not available. You save the generated codes to a file on your computer for future use.</p>

<p><strong>Important:</strong> To avoid losing access to your account, generate and save the bypass codes as soon as you enable multi-factor authentication.</p>

<ol>
	<li>
	<p>After logging in to the control panel, click&nbsp;<strong>Account: <em>yourUsername</em> &gt; Account Settings</strong>&nbsp;to open the Account Settings page.</p>
	</li>
	<li>
	<p>In the Login Details section, click <strong>Generate Recovery Codes</strong>.<br />
	<br />
	<img alt="Generate recovery codes." border="2" src="/knowledge_center/sites/default/files/field/image/generate-recovery-codes.png" /></p>
	</li>
	<li>
	<p>In the Quantity field, select the number of codes to generate or accept the default value.</p>
	</li>
	<li>
	<p>Click&nbsp;<strong>Generate Codes</strong>. &nbsp;</p>
	</li>
	<li>
	<p>Copy the recovery codes to a text file, or click save your codes.</p>
	</li>
</ol>

<h4><strong><strong><strong>To remove multi-factor authentication</strong></strong></strong></h4>

<p>You can turn off multi-factor authentication and remove all devices associated with your account.</p>

<ol>
	<li>
	<p>After logging in to the control panel, click <strong>Account: yourUserName&nbsp;&gt; Account Settings</strong> to open the Account Settings page.</p>
	</li>
	<li>In the Login Details section, click <strong>Remove all devices </strong>in the Multi-Factor Authentication field.</li>
</ol>

<h4><strong><strong><strong>To change the mobile phone number</strong></strong></strong></h4>

<p>To change the mobile phone number paired with your account, use the Remove&nbsp;option to remove the existing phone number (for instructions, see the preceding task).&nbsp; Then, update the account settings with the new phone number and verify the device.<br />
<br />
<strong>To remove an SMS or OTP device</strong></p>

<p>To remove an SMS device, use the <strong>Remove all devices</strong>.<br />
To remove an OTP device, use the Manage option to delete the device from your account.</p>

<hr />
<h2><strong><strong><strong><a name="troubleshoot"></a>Troubleshooting</strong></strong></strong></h2>

<p><strong>Use the following information to resolve common issues that can occur when configuring and using multi-factor authentication.</strong></p>

<table align="left" border="0" cellpadding="1" cellspacing="1" height="384" width="1413">
	<tbody>
		<tr>
			<td align="left" valign="top"><strong><strong>Issue</strong></strong></td>
			<td align="left" valign="top"><strong><strong>Resolution</strong></strong></td>
		</tr>
		<tr>
			<td align="left" valign="top">
			<h4><strong><strong><strong>Invalid phone number</strong></strong></strong></h4>
			</td>
			<td align="left" valign="top">If you get an error message when registering a phone number, verify that you have entered the correct country code and a valid phone number with no extra characters or spaces.</td>
		</tr>
		<tr>
			<td align="left" scope="row" valign="top">
			<h4><strong><strong><strong>Invalid PIN when verifying device</strong></strong></strong></h4>
			</td>
			<td align="left" valign="top">
			<p>When you try to verify a mobile device, you might receive an error caused by an invalid PIN. Confirm that you are entering the correct four-digit PIN that you received via SMS text message.&nbsp; Ensure that you are using the mobile device that is paired with the Rackspace Cloud account.</p>
			</td>
		</tr>
		<tr>
			<td align="left" valign="top">
			<h4><strong><strong><strong>Locked account</strong></strong></strong></h4>
			</td>
			<td align="left" valign="top">If you enter an incorrect passcode more than six times during the multi-factor authentication process, your account will be locked. Contact Rackspace Support to restore access to a locked account.&nbsp;</td>
		</tr>
		<tr>
			<td align="left" valign="top">
			<h4><strong><strong><strong>Cannot link cloud account in MyRackspace with multi-factor enabled</strong></strong></strong></h4>
			</td>
			<td align="left" valign="top">
			<p>If you are using MyRackspace, you cannot link to an existing Rackspace Cloud account that has been enabled for multi-factor authentication.</p>
			</td>
		</tr>
		<tr>
			<td align="left" valign="top">
			<h4><strong><strong><strong>Account recovery</strong></strong></strong></h4>
			</td>
			<td align="left" valign="top">
			<p>If your account is configured for multi-factor authentication, and you do not have access to your device or your generated account&nbsp;recovery codes, &nbsp;contact Rackspace Support.</p>
			</td>
		</tr>
	</tbody>
</table>
