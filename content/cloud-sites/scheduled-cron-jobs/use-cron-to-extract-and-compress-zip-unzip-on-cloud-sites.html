---
node_id: 699
title: 'Use cron to extract and compress (zip & unzip) on Cloud Sites'
permalink: article/use-cron-to-extract-and-compress-zip-unzip-on-cloud-sites
type: article
created_date: '2011-03-16 21:57:40'
created_by: RackKCAdmin
last_modified_date: '2014-02-12 22:4626'
last_modified_by: ross.diaz
products: Cloud Sites
categories: Scheduled Cron Jobs
body_format: tinymce
---

<h3>Scripting extraction and compression of files</h3><h5>General Process:</h5><p>In Cloud Sites, the general process for extracting and compressing files through a cron job consists of the following steps:</p><ol><li>Creating the script File</li><li>Uploading the aforementioned file to the site through FTP.</li><li>Scheduling the cron job through the Cloud Sites Control Panel's Features tab.</li></ol><p><strong>IMPORTANT NOTE:</strong> Please make sure that you set up the cron job "command type" to be <strong>Perl</strong> to properly execute the shell script (.sh file). Cron jobs that run over 900 seconds (15 minutes) are automatically terminated.</p><h3>Creating the Script File</h3><p>To create the script file, simply open up a text editor on your local machine and copy/paste the sample code (provided in the examples below) for the operation you wish to accomplish:</p><ul><li>Compressing: <a href="#zip">zip</a> or <a href="#tar">tar</a></li><li>Decompressing: <a href="#unzip">unzip</a> or <a href="#untar">tar</a></li></ul><p>Once complete, save the file with the <strong>.sh</strong> extension.&nbsp;</p><h3><span style="text-decoration: underline;">I. Compressing</span></h3><p><strong>Suggested Filename: </strong><em>compress.sh</em></p><h4><a name="zip"></a></h4><p><strong>NOTE: </strong>For these examples make sure to replace "/SOURCE/DIRECTORY/" and "/DESTINATION DIRECTORY" with the appropriate Web directories (like "/mnt/stor1-wc1-dfw1/123456/www.example.com/web/content/archives/").</p><h4>Zip compression</h4><p>To compress a directory to zip format add these lines to the script:</p><pre>#!/bin/sh
zip -9pr /DESTINATION/DIRECTORY/file.zip /SOURCE/DIRECTORY/  
</pre><p>Where "file.zip" is the name that you assign to the zip file.</p><p>The final script should look similar to this:</p><p><img src="/knowledge_center/sites/default/files/field/image/Zip_script_visual.png" alt="" width="709" height="142" /></p><p><strong>Note: </strong><em>If you're only compressing a single file the script would be similar, but would not require the "r" in the options. </em></p><p><em>For example:</em></p><pre>#!/bin/sh
zip -9p /DESTINATION/DIRECTORY/file.zip /SOURCE/DIRECTORY/targetfile.txt </pre><h4><a name="tar"></a></h4><h3>&nbsp;</h3><h3>Tar.gz compression</h3><p>Put this in the script to archive and compress a directory into a gzipped tar format:</p><pre>#!/bin/sh
tar -cvzf /DESTINATION/DIRECTORY/file.tar.gz /SOURCE/DIRECTORY/   
</pre><p>Where "file.tar.gz" is the name that you assign to the compressed file.</p><p>The final script should look similar to this:</p><p><img src="/knowledge_center/sites/default/files/field/image/Zip_script_visual.png" alt="" width="727" height="145" /></p><h3><span style="text-decoration: underline;">II. Extracting</span></h3><h4><a name="unzip"></a></h4><p><strong>Suggested Filename: </strong><em>decompress.sh</em></p><h4>Zip extraction</h4><p>Add these lines to decompress from zip format:</p><pre>#!/bin/sh                                           
unzip -o /SOURCE/DIRECTORY/file.zip -d /DESTINATION/DIRECTORY/
</pre><p>Where "file.zip" is the name of the zip file to be uncompressed.</p><p>The final script should look similar to this:</p><p><img src="/knowledge_center/sites/default/files/field/image/Unzip_script_visual_0.png" alt="" width="717" height="138" /></p><h4><a name="untar"></a></h4><p>(<strong>NOTE: the -o option will force unzip to overwrite existing files!</strong>)</p><p>Where "file.tar" is the name that you assign to the compressed file.</p><h4>Tar.gz extraction</h4><p>Put this in the script to extract from tar format:</p><pre>#!/bin/sh  
tar -xvzf /SOURCE/DIRECTORY/file.tar.gz -C /DESTINATION/DIRECTORY/
</pre><p>Where "file.tar.gz" is the name of the compressed file.</p><p>The final script should look similar to this:</p><p><img src="/knowledge_center/sites/default/files/field/image/Untar_script_visual.png" alt="" width="712" height="136" /></p><h3>Cron FAQ's:</h3><p><a class="external free" title="What is a cron job?" href="/knowledge_center/index.php/What_is_a_cron_job">What is a cron job?</a></p><p><a class="external free" title="How do I enable or disable cron?" href="/knowledge_center/index.php/How_do_I_enable/disable_a_cron_job">How do I enable or disable cron?</a></p><p><a class="external free" title="How do I schedule a cron job?" href="/knowledge_center/index.php/How_do_I_schedule_a_cron_job">How do I schedule a cron job?</a></p><p><a class="external free" title="How do I import a large mysql database?" href="/knowledge_center/index.php/How_do_I_import_a_large_Mysql_Database">How do I import a large mysql database?</a></p>
