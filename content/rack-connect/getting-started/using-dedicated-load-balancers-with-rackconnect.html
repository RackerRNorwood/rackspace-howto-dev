---
node_id: 2028
title: Using Dedicated Load Balancers with RackConnect v2.0
permalink: article/using-dedicated-load-balancers-with-rackconnect
type: article
created_date: '2012-08-21 19:41:31'
created_by: juan.perez
last_modified_date: '2015-07-15 20:1948'
last_modified_by: kelly.holcomb
products: RackConnect
categories: Getting Started
body_format: tinymce
---

<p><strong>Applies to</strong>: RackConnect v2.0</p>

<p>Load balancers distribute workloads across 2 or more servers, network links or other resources. This distribution maximizes throughput, minimizes response time and helps avoid overload. The following information discusses several available options with dedicated load balancers.</p>

<h2>F5 Load Balancers</h2>

<p>When you use your cloud servers to host an application that scales up and down (for example, the web tier of an application), it is important to have a method for adding and removing cloud servers from their associated load balancer pool(s). If you use an F5 BIG-IP Local Traffic Manager (LTM) with RackConnect, you can specify the load balancer pool name that a cloud server should be placed in when it is created. When you delete the cloud server, it will automatically be removed from the pool.<br />
<br />
With RackConnect, there are two ways that you can automatically associate your cloud servers with one or more load balancer pools on your BIG-IP LTM:<br />
<br />
<strong>Option 1 — Metadata: </strong>When creating a cloud server, use the metadata option to specify the pool or pools.<br />
<br />
<strong>Metadata Key</strong>: RackConnectLBPool<br />
<strong>Metadata Value</strong>: The exact name of the pool as defined on the load balancer. Use a semicolon separated list for more than one pool.</p>

<p>You can specify the metadata values when you use the Cloud Servers API to create new cloud servers. View the API documentation for more details about how to use the API to enter metadata information for a cloud server: <a href="http://docs.rackspace.com/servers/api/v2/cs-devguide/content/Create_or_Replace_Metadata-d1e5358.html">API Developer Guide: Set Metadata.</a></p>

<p>This is the method to use if you want Auto Scale to use RackConnect with F5 load balancers. Read more about this on the <a href="http://www.rackspace.com/knowledge_center/article/rackspace-auto-scale-tips-and-how-tos#cloudBurst">Auto Scale Tips and How To's</a> page about cloud bursting.</p>

<p><strong>NOTE:</strong> &nbsp;If you are using next generation Cloud Servers, you can now update a cloud server's metadata at any time to add/remove cloud servers from load balancer pools. These metadata updates can be made via the Cloud Server's API.</p>

<p><br />
<strong>Option 2 — Name Match: </strong>Before you create your cloud servers, provide Rackspace with the preferred names and the pool(s) to associate with your cloud servers. Currently, you must configure this through a ticket request to your Support team.<br />
<br />
Regardless of which option you select, consider the following requirements:</p>

<ul>
	<li>Verify that an appropriate health check has been configured for members of the load balancer pool or pools being used. The health check should confirm that the website or application is fully ready to accept end-user traffic, because the cloud server might be added almost immediately after creation, but before your application is ready to accept traffic, depending on the timing of the automation. For example, it would be advisable to use a URL content check instead of a TCP port check to confirm that a web application is ready to accept end-user requests.</li>
</ul>

<ul>
	<li>The service port for each member of the load balancer pool must match or the automation will not be able to determine which service port to use. (For this same reason, there should always be at least one member in the pool.)&nbsp; If a common service port cannot be determined, a notification will be routed to your Support team for manual intervention.</li>
</ul>

<p>To get the name of one or more load balancer pools, contact your Support team.</p>

<p><strong>NOTE:</strong>&nbsp; Any cloud servers that were originally added to a load balancer pool as a result of a name match rule will be automatically removed if the respective name match rule is deleted.</p>

<h4>Inbound RackConnect Traffic Flow with a F5 Load Balancer</h4>

<p>The following diagram shows the path that inbound (and return) load balancer pool traffic follows to your cloud servers when you use an F5 BIG-IP load balancer with RackConnect:<br />
<img alt="" class="image-full_width" src="http://www.rackspace.com/knowledge_center/sites/default/files/styles/full_width/public/field/image/RackConnect.F5.TrafficFlow.png" title="" /></p>

<h2><br />
Brocade Load Balancers</h2>

<p>The Brocade ADX can also be used as a load balancer that balances traffic between dedicated and cloud servers. In this case, the RackConnect Connected Device will be a Cisco ASA firewall and any traffic that needs to be load balanced to cloud servers will flow from the ADX to the firewall to the cloud servers.</p>

<p><strong>The benefits of using&nbsp; a Brocade load balancer with RackConnect are as follows:</strong></p>

<ul>
	<li>The ability to load balance traffic between dedicated servers and cloud servers</li>
</ul>

<ul>
	<li>The ability to use cloud servers as sorry servers for a load balancer pool. A sorry server normally contains a static maintenance page that users are directed to when health checks fail for all the members of a load balancer pool.</li>
</ul>

<ul>
	<li>The ability to maintain Client Identity (source IP persistence) to RackConnect Cloud Servers through the use of X-Forwarded headers. Your Support team can provide more details about the caveats of client identity maintenance.</li>
</ul>

<p><strong>The limitations of using&nbsp; a Brocade load balancer with RackConnect are as follows:</strong></p>

<ul>
	<li>Because the Brocade load balancer cannot function as a RackConnect Connected Device, the RackConnect Automation feature that automatically adds and removes cloud servers from your load balancer pools is not available</li>
</ul>

<ul>
	<li>The Brocade load balancer must function as a full proxy for all external requests to your cloud servers.</li>
</ul>

<h4>Inbound RackConnect Traffic Flow with a Brocade Load Balancer</h4>

<p>The following diagram shows the path that inbound and return load balancer pool traffic follows to your cloud servers when you use a Brocade ADX load balancer with RackConnect:<br />
<img alt="" class="image-full_width" src="http://www.rackspace.com/knowledge_center/sites/default/files/styles/full_width/public/field/image/RackConnect.Brocade.TrafficFlow.png" title="" /></p>

<p>If you have any questions about using Dedicated load balancers with RackConnect, contact your Support team.</p>

<p><a href="http://www.rackspace.com/knowledge_center/article/accessing-rackconnected-cloud-servers">Accessing RackConnected Cloud Servers</a> &lt;---Previous | Next ---&gt;&nbsp;<a href="http://www.rackspace.com/knowledge_center/article/using-cloud-load-balancers-with-rackconnect">Using Cloud Load Balancers with RackConnect</a></p>
