---
node_id: 3193
title: Troubleshooting the Rackspace Monitoring Agent
permalink: article/troubleshooting-the-monitoring-agent
type: article
created_date: '2012-11-13 03:30:06'
created_by: Susan Million
last_modified_date: '2015-12-17 18:3358'
last_modified_by: constanze.kratel
products: Cloud Monitoring
categories: Monitoring and Troubleshooting
body_format: tinymce
---

<p>This article describes issues related to the Rackspace Monitoring Agent and provides actions that you can perform to resolve the issues. Issues with the monitoring agent are typically related to the agent id. The agent id that is associated with the entity is the unique identifier that is automatically detected by the agent. This identifier is unique for each account and is typically the ID of the cloud instance, but can be a unique string.</p>

<h2>Issue: The Rackspace Monitoring Agent is not connected to my server</h2>

<p>This issue might have one of the following causes:</p>

<ul>
	<li>The Rackspace Monitoring agent is not installed on your server. To install the agent, log in to your cloud server (as root on Linux or as an Administrator on Windows)&nbsp;and install the agent. For installation instructions, see <a href="/knowledge_center/node/3194">Install and configure the Rackspace Monitoring Agent</a>.</li>
	<li>The agent is installed but is not connected to your server. For the agent to work correctly, it must be associated with your server by using a Rackspace Monitoring entity. The entity is a representation of your server in the monitoring system.</li>
	<li>The monitoring agent is unable to determine the appropriate entity because there are duplicate entities associated with your account.</li>
</ul>

<h2>Resolution steps</h2>

<p>Verify that the agent is installed and associated with your server by performing the following steps:</p>

<h3>Linux</h3>

<ol>
	<li>Verify that the<a> Rackspace monitoring agent </a>is installed under<strong> /usr/bin/rackspace-monitoring-agent</strong>.</li>
	<li>Verify that the <strong>/etc/</strong><strong>rackspace-monitoring-agent.cfg</strong> file exists and contains a valid agent token.</li>
	<li>Check for errors and status information in the <strong>/var/log/rackspace-monitoring-agent.log</strong> file.</li>
	<li>Verify that port 443 is open (added as a public firewall rule).</li>
	<li>Run the following command to verify that the agent is running:
	<pre>
$ ps aux | grep rackspace-monitoring-agent</pre>
	</li>
</ol>

<h3>Windows</h3>

<ol>
	<li>Verify that the <a>Rackspace monitoring agent</a> is installed under <strong>C:\Program Files\Rackspace Monitoring\rackspace-monitoring-agent.exe</strong>.<br />
	If you use a 32-bit version on a 64-bit Windows computer, the monitoring agent is installed under <strong>C:\Program Files (x86)\Rackspace Monitoring\rackspace-monitoring-agent.exe</strong>.</li>
	<li>Verify that the <strong>C:\ProgramData\Rackspace Monitoring\config\rackspace-monitoring-agent.cfg</strong> file exists and contains a valid agent token.</li>
	<li>Check for errors and status information in the <strong>C:\ProgramData\Rackspace Monitoring\log.txt</strong> file.</li>
	<li>In the Windows Control Panel, open the settings for Windows Firewall and verify that port 443 is open (added as an inbound firewall rule).</li>
	<li>Verify that the monitoring agent is running by opening the Task Manager, clicking the <strong>Services </strong>tab and locating the <strong>Rackspace Monitoring</strong> agent service.</li>
</ol>

<h3>Check for duplicate entities</h3>

<h4>Use Raxmon to check for duplicate entities</h4>

<p>You can use the Rackspace Monitoring Command Line Interface (Raxmon) to troubleshoot your monitoring agent. To install the Raxmon tool, read <a href="http://www.rackspace.com/knowledge_center/article/getting-started-with-rackspace-monitoring-cli">Getting Started with Rackspace Monitoring CLI</a>.</p>

<p>To troubleshoot a monitoring agent by using Raxmon, complete the following steps:</p>

<ol>
	<li id="">Create a config file in the following location: <code>~/.raxrc</code></li>
	<li>Populate the config file with the following content:
	<pre>
[credentials]

username=ACCOUNT_USERNAME

api_key=ACCOUNT_APIKEY

[api]

url=https://monitoring.api.rackspacecloud.com/v1.0

[auth_api]

url=https://identity.api.rackspacecloud.com/v2.0

[ssl]

verify=true </pre>

	<p><strong>Note</strong>: <code>ACCOUNT_USERNAME</code> and <code>ACCOUNT_APIKEY</code> are the Rackspace Cloud account username and your API key.</p>
	</li>
	<li>Type the following at a command-line interface:
	<pre>
raxmon-entities-list</pre>
	</li>
	<li>Examine the output to see if it has two entites as shown in the example below:
	<pre>
Entity: id=enRDIKf7zG label=Krisna provider=Rackspace Monitoring...
Entity: id=enhqYnVEnc label=krisna provider=Rackspace Monitoring...</pre>
	</li>
	<li>If your output has two entities, with different label cases (upper and lower case), open a ticket with Support to fix this issue.</li>
	<li>After Support has fixed the problem with duplicate entities, restart the monitoring agent, so that the changes can take full effect.</li>
</ol>

<h4 id="">Use cURL to check for duplicate entities</h4>

<p>You can use cURL to check for duplicate entities.</p>

<p>To check for duplicate entities by using cURL, do the following:</p>

<ol>
	<li>Authenticate against the Rackspace Cloud API by issuing the following command at a command-line interface:
	<pre>
curl -s https://identity.api.rackspacecloud.com/v2.0/tokens -X 'POST' \
    -d '{"auth":{"RAX-KSKEY:apiKeyCredentials":{"username":"yourUserName", "apiKey":"yourApiKey"}}}' \
    -H "Content-Type: application/json" | python -m json.tool</pre>
	After a successful authentication, make sure to write down the authentication token.</li>
	<li>Issue the following command to obtain a list of entities:
	<pre>
curl -i -X GET \
   -H 'X-Auth-Token: '$token''\
   -H 'Content-Type: application/json' \
   -H 'Accept: application/json' \
&nbsp;  'https://monitoring.api.rackspacecloud.com/v1.0/$accountid/entities'</pre>
	Make sure to replace the <em>$token</em> placeholder with the authentication token you have obtained during authentication and the <em>$accountid</em> placeholder with your Rackspace Cloud account id.</li>
	<li>If the call is successful, you will receive a list of entities and their corresponding metadata as shown in the following example:
	<pre>
&nbsp;&nbsp;&nbsp; "values": [
         {
            "id": "en5wmQxCsz",
            "label": "test1",
            "ip_addresses": {
                   "access_ip0_v6": "2001:4800:7818:0103:be76:4eff:fe04:d3b6",
                   "access_ip1_v4": "104.130.141.220"
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "metadata": null,
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "managed": false,
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "uri": "https://dfw.servers.api.rackspacecloud.com/1234567/servers/1b62e690-7745-4bbf-9ee8-7fcd361db227",
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "agent_id": "1b62e690-7745-4bbf-9ee8-7fcd361db227",
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "active_suppressions": [],
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "scheduled_suppressions": [],
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "created_at": 1416625774775,
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "updated_at": 1416625774775
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  },
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "id": "enInNqsafG",
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "label": "test2",
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "ip_addresses": {
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  "public0_v4": "104.130.240.201",
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  "private0_v4": "10.209.65.2",
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "metadata": null,
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "managed": false,
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "uri": "https://dfw.servers.api.rackspacecloud.com/1234567/servers/880d31fb-06e7-456f-b849-aa35044d4a9b",
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "agent_id": "880d31fb-06e7-456f-b849-aa35044d4a9b",
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "active_suppressions": [],
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "scheduled_suppressions": [],
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "created_at": 1424970771920,
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "updated_at": 1424970771920
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },</pre>
	</li>
	<li>Examine the output and check whether there are duplicate entities with varying label cases. If duplicate entities exist, open a ticket with Support.</li>
</ol>

<h3 id="ManuallyconfiguretheCloudMonitoringagenttofunctionbehindanHTTPSproxy">M<span>anually configure the Rackspace Monitoring agent to function behind an HTTPS proxy</span></h3>

<p>If you need to connect the agent through an HTTP proxy, you can manually configure the Rackspace Monitoring agent to function behind an HTTPs proxy by setting the <code>monitoring_proxy_url</code> parameter in the agent configuration file.</p>

<p>For information about configuring the monitoring agent by using the agent configuration file, see <a href="https://developer.rackspace.com/docs/cloud-monitoring/v1/developer-guide/#configure-agent-manually">Configure the agent manually</a>. For information about the agent configuration file, see <a href="https://developer.rackspace.com/docs/cloud-monitoring/v1/developer-guide/#agent-configuration-file">Agent configuration file</a>.</p>

<p>Related information</p>

<p><a href="/knowledge_center/node/3192">About the Rackspace Monitoring Agent</a>.</p>
