---
node_id: 5001
title: RackConnect v3.0 retained public IP addresses
permalink: article/rackconnect-v3-retained-public-ips
type: article
created_date: '2015-12-04 20:20:53'
created_by: sean.laszakovits
last_modified_date: '2015-12-11 18:4716'
last_modified_by: Nate.Archer
products: RackConnect
categories: Features
body_format: tinymce
---

<h2>Introduction</h2>

<p>With RackConnect v3.0, when a new cloud server is created and a public IP address is assigned through the&nbsp;RackConnect v3.0 API or the myCloud Portal, the public IP address is stored as a separate database record that is linked to that server.&nbsp;</p>

<p>A RackConnect <em>public IP record</em> references a public IP address that has been provided from an IP address block assigned exclusively to your dedicated environment (the same IP address blocks used to assign public IP addresses to dedicated servers).</p>

<p>By default, a RackConnect public IP record is destroyed when the assigned server is deleted or the public IP address is unassigned from that server.&nbsp;If you want to prevent this behavior, you can use the&nbsp;<em>Retained Public IP</em>&nbsp;<em>Address</em> automation feature.</p>

<p>The RackConnect public IP record uses the&nbsp;<strong>retain</strong>&nbsp;flag to&nbsp;enable&nbsp;or&nbsp;disable&nbsp;the&nbsp;Retained Public IP&nbsp;Address automation feature. By default, the&nbsp;<strong>retain</strong>&nbsp;flag is set to&nbsp;false, and you can enable it by using a RackConnect v3 API call. Enabling the&nbsp;<strong>retain</strong>&nbsp;flag not only prevents the RackConnect public IP record from being deleted, but also allows users to change the assigned cloud server on the fly.</p>

<h2>API capabilities</h2>

<p>You can use the RackConnect v3 API to perform the following actions related to public IP records.&nbsp;</p>

<ul>
	<li><strong>List public IP records where the retain flag is set to true (or false</strong>).</li>
	<li><strong>Toggle the retain flag for a RackConnect public IP</strong>&nbsp;address that is currently assigned to a server.</li>
</ul>

<ul>
	<li><strong>Assign a public IP</strong>&nbsp;address with the&nbsp;<strong>retain</strong>&nbsp;flag set to true to a cloud server (the server must not have an existing public IP address at the time of assignment).</li>
	<li><strong>Move a public IP address from one cloud server to another</strong>&nbsp;(the destination server must not have an existing public IP address at the time of assignment).</li>
</ul>

<p style="margin-left:.5in;">The old server’s existing static NAT configuration (which is used to link the public IP address to the server’s private IP address) on the edge network device is removed and replaced with a new static NAT configuration that translates the retained public IP address to the new server’s private IP address.</p>

<ul>
	<li><strong>Unassign a public IP address from a cloud server</strong>&nbsp;without deleting the RackConnect public IP record (if the public IP record has its&nbsp;<strong>retain</strong>&nbsp;flag set to true).</li>
</ul>

<p style="margin-left:.5in;">Doing so completely removes the static NAT configuration (used to link the public IP address to its assigned server’s private IP address) on the edge network device.</p>

<p>You can find detailed RackConnect v3 API documentation for the Retained Public IP feature at <a href="http://docs.rcv3.apiary.io/#reference/public-ips/single-public-ip/modify-public-ip">http://docs.rcv3.apiary.io/#reference/public-ips/single-public-ip/modify-public-ip</a>.</p>

<h2>Requirements</h2>

<p>This section explains the requirements for and limitations of using the Retained Public IP Address feature.]&nbsp;</p>

<h3>API only</h3>

<p>The Retained Public IP feature is available only via the RackConnect v3 API. There is currently no UI support for the feature.</p>

<h3>Limits</h3>

<p>A default limit of five retained public IP addresses is applied to each Cloud Account that is attached to a RackConnect v3 configuration.</p>

<p>If you do not know how many retained public IP addresses you have used, you can request that Network Security report this value to you.</p>

<p>If you have reached your limit of retained public IP addresses, when you attempt to set the&nbsp;<strong>retain</strong>&nbsp;flag for a specified public IP record, the API responds with a message indicating that you have reached your limit</p>

<h3>RackConnect automation</h3>

<p>The&nbsp;retain&nbsp;feature relies on the use of RackConnect public IP records. RackConnect public IP records are created as a result of RackConnect automation assigning a public IP address. Therefore, public IP addresses that were manually assigned and configured by Network Security are not recognized by RackConnect automation. These addresses must be removed before public IP address assignments or retainable public IP addresses can be used.</p>

<h2>Caveats</h2>

<p>When using the Retained Public IP Address feature, be aware of the following caveats.]</p>

<h3>Removing a cloud network from an active cloud server</h3>

<p>If a cloud network is removed from an active cloud server, any assigned public IP records are also removed.</p>

<ul>
	<li>If the&nbsp;<strong>retain</strong>&nbsp;flag was set to false at the time of removal, the public IP record is deleted.</li>
	<li>If the&nbsp;<strong>retain</strong>&nbsp;flag was set to true at the time of removal, the public IP record is <em>not</em> deleted. The assigned server is updated to be NULL (no owner). If you want the server to use the same public IP record, use the API call to reassign the server to the public IP address.</li>
</ul>

<h3>Moving a retained public IP address from one cloud server to another</h3>

<p>When you move a retained public IP address from one cloud server to another, the destination server must <em>not</em> have an existing public IP address at the time of assignment. If the destination server has a public IP address assigned, the API returns a message indicating that it could not assign the new public IP address. The API call fails until the destination server's existing public IP address assignment is removed.</p>

<p>&nbsp;</p>
