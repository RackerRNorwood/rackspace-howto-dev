---
node_id: 1718
title: 'Next Generation Cloud Servers: Sample Code'
permalink: article/next-generation-cloud-servers-sample-code
type: article
created_date: '2012-07-24 22:15:44'
created_by: Jerry Schwartz
last_modified_date: '2015-09-03 20:2848'
last_modified_by: constanze.kratel
products: Cloud Servers
categories: '- Getting Started -,FAQ,File Transfers and File Sharing'
body_format: tinymce
---

<h3>Next Generation Cloud Servers:&nbsp; Sample Code<strong><br /></strong></h3><p><strong><a href="#aa1">List of API Operations</a></strong></p><p><strong>Code Sample - cURL</strong></p><ul><li><a href="#aa2">Add a user to your account through the API</a></li></ul><p><strong>Code Samples - XML</strong></p><ul><li><a href="#aa3">Create Server Request</a></li><li><a href="#aa4">Create Server Response</a></li><li><a href="#aa5">Get Server Details Response</a></li><li><a href="#aa6">Reboot Server Request</a></li></ul><p><strong>Code Samples - JSON</strong></p><ul><li><a href="#aa7">Create Server Request</a></li><li><a href="#aa8">Create Server Response</a></li><li><a href="#aa9">Get Server Details Response</a></li><li><a href="#aa10">Reboot Server Request</a></li></ul><p><strong><a href="#aa11">Legal Disclaimer</a></strong></p><hr /><h3><a id="aa1" name="aa1"></a>API Operations</h3><ul><li>Servers<ul><li>List Servers</li><li>Create Server</li><li>Get Server Details</li><li>Update Server</li><li>Delete Server</li><li>Server Addresses<ul><li>List Addresses</li><li>List Addresses by Network</li><li>Server Actions<ul><li>Change Administrator Password</li><li>Reboot Server</li><li>Rebuild Server</li><li>Resize Server</li><li>Confirm Resized Server</li><li>Revert Resized Server</li><li>Create Image</li><li>Volume Attachment Actions<ul><li>Attach Volume to Server</li><li>List Volume Attachments</li><li>Get Volume Attachment Details</li><li>Delete Volume Attachment</li></ul></li><li>Flavors<ul><li>List Flavors</li><li>Get Flavor Details</li></ul></li><li>Images<ul><li>List Images</li><li>Get Image Details</li><li>Delete Image</li></ul></li><li>Metadata<ul><li>List Metadata</li><li>Set Metadata</li><li>Update Metadata</li><li>Get Metadata Item</li><li>Set Metadata Item</li><li>Delete Metadata Item</li></ul></li></ul></li></ul></li></ul></li></ul><hr /><h3>cURL</h3><h4><a id="aa2" name="aa2"></a>Code Sample – Add User To Your Account Through API (cURL)</h4><p>To add a user to your account through the API, you can do the following:</p><ol><li>Get a token.<ul><li>Through password-authentication:<pre>curl -X POST https://identity.api.rackspacecloud.com/v2.0/tokens -d '{"auth":{"passwordCredentials":{"username":"theUserName","password":"thePassword"}}}' -H "Content-type: application/json"
</pre></li><li>Through API key authentication:<pre>curl -X POST https:// identity.api.rackspacecloud.com/v2.0/tokens -d '{ "auth":{ "RAX-KSKEY:apiKeyCredentials":{ "username":"theUserName", "apiKey":"00a00000a000a0000000a000a00aaa0a" } } }' -H "Content-type: application/json"
</pre></li></ul>The access.token.id in the response is the token.</li><li>Create a new user.<ul><li>Specifying a password:<pre>curl –X POST https://identity.api.rackspacecloud.com/v2.0/users -d '{"user": {"username": "theUserName", "email": "john.smith@example.org", "enabled": true, "OS-KSADM:password":"thePassword"}}'  -H "Content-type: application/json" -H "X-Auth-Token: theToken”
</pre></li><li>Not specifying a password (one will be generated and sent back in the response):<pre>curl –X POST https://identity.api.rackspacecloud.com/v2.0/users -d '{"user": {"username": "theUserName", "email": "john.smith@example.org", "enabled": true, "OS-KSADM:password":"thePassword"}}'  -H "Content-type: application/json" -H "X-Auth-Token: theToken”
</pre></li></ul></li></ol><p>Any newly-created user for your account will have the same access that you have, except that they will not be able to create or update other users.</p><p>You can also update or delete a user.</p><ul><li>Update:<pre>curl –X POST https://identity.api.rackspacecloud.com/v2.0/users/{userID} -d '{"user": {"username": "theUserName", "email": "john.smith@example.org", "enabled": true, "OS-KSADM:password":"thePassword"}}'  -H "Content-type: application/json" -H "X-Auth-Token: theToken”
</pre></li><li>Delete:<pre>curl -X DELETE https://identity.api.rackspacecloud.com/v2.0/users/{userID} -H "X-Auth-Token: "XXXXXXX"
</pre></li></ul><hr /><h3>XML</h3><h4><a id="aa3" name="aa3"></a>Code Sample: Create Server Request (XML)</h4><pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;server xmlns="http://docs.openstack.org/compute/api/v1.1" imageRef="5f68715f-201f-4600-b5a1-0b97e2b1cb31" flavorRef="2" diskConfig="auto" name="new-server-test" min_count="1" max_count="1"&gt;
    &lt;metadata&gt;
        &lt;meta key="My Server Name"&gt;Ubuntu 10.04 LTS&lt;/meta&gt;
    &lt;/metadata&gt;
    &lt;personality&gt;
        &lt;file path="/etc/banner.txt"&gt;
ICAgICAgDQoiQSBjbG91ZCBkb2VzIG5vdCBrbm93IHdoeSBp
dCBtb3ZlcyBpbiBqdXN0IHN1Y2ggYSBkaXJlY3Rpb24gYW5k
IGF0IHN1Y2ggYSBzcGVlZC4uLkl0IGZlZWxzIGFuIGltcHVs
c2lvbi4uLnRoaXMgaXMgdGhlIHBsYWNlIHRvIGdvIG5vdy4g
QnV0IHRoZSBza3kga25vd3MgdGhlIHJlYXNvbnMgYW5kIHRo
ZSBwYXR0ZXJucyBiZWhpbmQgYWxsIGNsb3VkcywgYW5kIHlv
dSB3aWxsIGtub3csIHRvbywgd2hlbiB5b3UgbGlmdCB5b3Vy
c2VsZiBoaWdoIGVub3VnaCB0byBzZWUgYmV5b25kIGhvcml6
b25zLiINCg0KLVJpY2hhcmQgQmFjaA==
&lt;/file&gt;
    &lt;/personality&gt;
&lt;/server&gt;
</pre><h4><a id="aa4" name="aa4"></a>Code Sample: Create Server Response (XML)</h4><pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;server xmlns:OS-DCF="http://docs.openstack.org/compute/ext/disk_config/api/v1.1" xmlns:atom="http://www.w3.org/2005/Atom" xmlns="http://docs.openstack.org/compute/api/v1.1" id="827bf583-0b54-4526-b58b-8c3dca04ab28" adminPass="123456789abc" OS-DCF:diskConfig="AUTO"&gt;
    &lt;metadata/&gt;
    &lt;atom:link href="https://dfw.servers.api.rackspacecloud.com/v2/123456/servers/827bf583-0b54-4526-b58b-8c3dca04ab28" rel="self"/&gt;
    &lt;atom:link href="https://dfw.servers.api.rackspacecloud.com/123456/servers/827bf583-0b54-4526-b58b-8c3dca04ab28" rel="bookmark"/&gt;
&lt;/server&gt;
</pre><h4><a id="aa5" name="aa5"></a>Code Sample:&nbsp;&nbsp;Get Server Details Response (XML)</h4><pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;server xmlns:RAX-SERVER="http://docs.rackspace.com/servers/api/ext/server_bandwidth/" xmlns="http://docs.openstack.org/compute/api/v1.1" xmlns:atom="http://www.w3.org/2005/Atom" id="52415800-8b69-11e0-9b19-734f000004d2" tenant_id="1234" user_id="5678" name="sample-server" status="BUILD" updated="2010-10-10T12:00:00Z" created="2010-08-10T12:00:00Z" progress="60" hostId="e4d909c290d0fb1ca068ffaddf22cbd0" accessIPv4="67.23.10.132" accessIPv6="::babe:67.23.10.132"&gt;
    &lt;image id="52415800-8b69-11e0-9b19-734f6f006e54"&gt;
        &lt;atom:link rel="self" href="http://servers.api.rackspacecloud.com/v2/1234/images/  52415800-8b69-11e0-9b19-734f6f006e54"/&gt;
        &lt;atom:link rel="bookmark" href="http://servers.api.rackspacecloud.com/1234/images/  52415800-8b69-11e0-9b19-734f6f006e54"/&gt;
    &lt;/image&gt;
    &lt;flavor id="52415800-8b69-11e0-9b19-734f216543fd"&gt;
        &lt;atom:link rel="self" href="http://servers.api.rackspacecloud.com/v2/1234/flavors/  52415800-8b69-11e0-9b19-734f216543fd"/&gt;
        &lt;atom:link rel="bookmark" href="http://servers.api.rackspacecloud.com/1234/flavors/  52415800-8b69-11e0-9b19-734f216543fd"/&gt;
    &lt;/flavor&gt;
    &lt;metadata&gt;
        &lt;meta key="Server Label"&gt;Web Head 1&lt;/meta&gt;
        &lt;meta key="Image Version"&gt;2.1&lt;/meta&gt;
    &lt;/metadata&gt;
    &lt;addresses&gt;
        &lt;network id="public"&gt;
            &lt;ip version="4" addr="67.23.10.132"/&gt;
            &lt;ip version="6" addr="::babe:67.23.10.132"/&gt;
            &lt;ip version="4" addr="67.23.10.131"/&gt;
            &lt;ip version="6" addr="::babe:4317:0A83"/&gt;
        &lt;/network&gt;
        &lt;network id="private"&gt;
            &lt;ip version="4" addr="10.176.42.16"/&gt;
            &lt;ip version="6" addr="::babe:10.176.42.16"/&gt;
        &lt;/network&gt;
    &lt;/addresses&gt;
    &lt;atom:link rel="self" href="http://servers.api.rackspacecloud.com/v2/1234/servers/  52415800-8b69-11e0-9b19-734f000004d2"/&gt;
    &lt;atom:link rel="bookmark" href="http://servers.api.rackspacecloud.com/1234/servers/  52415800-8b69-11e0-9b19-734f000004d2"/&gt;
    &lt;RAX-SERVER:bandwidth&gt;
        &lt;RAX-SERVER:interface audit_period_end="2012-05-07T14:35:13Z" audit_period_start="2012-05-01T00:00:00Z" bandwidth_inbound="972430" bandwidth_outbound="384" interface="public"/&gt;
    &lt;/RAX-SERVER:bandwidth&gt;
&lt;/server&gt;
</pre><h4><a id="aa6" name="aa6"></a>Code Sample:&nbsp;&nbsp;Reboot Server Request (XML)</h4><pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;reboot xmlns="http://docs.openstack.org/compute/api/v1.1" type="HARD"/&gt;
</pre><hr /><h3>JSON</h3><h4><a id="aa7" name="aa7"></a>Code Sample:&nbsp;&nbsp;Create Server Request (JSON)</h4><pre>{
    "server": {
        "name": "new-server-test",
        "min_count": 1,
        "max_count": 1,
        "imageRef": "5f68715f-201f-4600-b5a1-0b97e2b1cb31",
        "flavorRef": "2",
        "diskConfig": "auto",
        "metadata": {
            "My Server Name": "Ubuntu 10.04 LTS"
        },
        "personality": [{
            "path": "/etc/banner.txt",
            "contents": "ICAgICAgDQoiQSBjbG91ZCBkb2VzIG5vdCBrbm93IHdoeSBp
dCBtb3ZlcyBpbiBqdXN0IHN1Y2ggYSBkaXJlY3Rpb24gYW5k
IGF0IHN1Y2ggYSBzcGVlZC4uLkl0IGZlZWxzIGFuIGltcHVs
c2lvbi4uLnRoaXMgaXMgdGhlIHBsYWNlIHRvIGdvIG5vdy4g
QnV0IHRoZSBza3kga25vd3MgdGhlIHJlYXNvbnMgYW5kIHRo
ZSBwYXR0ZXJucyBiZWhpbmQgYWxsIGNsb3VkcywgYW5kIHlv
dSB3aWxsIGtub3csIHRvbywgd2hlbiB5b3UgbGlmdCB5b3Vy
c2VsZiBoaWdoIGVub3VnaCB0byBzZWUgYmV5b25kIGhvcml6
b25zLiINCg0KLVJpY2hhcmQgQmFjaA=="
        }]
    }
}
</pre><h4><a id="aa8" name="aa8"></a>Code Sample: Create Server Response (JSON)</h4><pre>{
    "server": {
        "OS-DCF:diskConfig": "AUTO",
        "adminPass": "123456789abc",
        "id": "edd91280-3438-4663-9137-26d8f62665ce",
        "links": [{
            "href": "https://dfw.servers.api.rackspacecloud.com/v2/123456/servers/edd91280-3438-4663-9137-26d8f62665ce",
            "rel": "self"
        }, {
            "href": "https://dfw.servers.api.rackspacecloud.com/123456/servers/edd91280-3438-4663-9137-26d8f62665ce",
            "rel": "bookmark"
        }]
    }
}
</pre><h4><a id="aa9" name="aa9"></a>Code Sample:&nbsp;&nbsp;Get Server Details Response (JSON)</h4><pre>{
    "server": {
        "OS-DCF:diskConfig": "AUTO",
        "RAX-SERVER:bandwidth": [{
            "audit_period_end": "2012-05-09 15:58:22",
            "audit_period_start": "2012-05-09 06:00:00",
            "bandwidth_inbound": 5316481,
            "bandwidth_outbound": 0,
            "interface": "public"
        }],
        "accessIPv4": "",
        "accessIPv6": "",
        "addresses": {
            "private": [{
                "addr": "10.180.4.157",
                "version": 4
            }],
            "public": [{
                "addr": "50.56.175.68",
                "version": 4
            }, {
                "addr": "2001:4800:780e:0510:d87b:9cbc:ff04:37ec",
                "version": 6
            }]
        },
        "config_drive": "",
        "created": "2012-04-06T18:44:18Z",
        "flavor": {
            "id": "1",
            "links": [{
                "href": "https://dfw.servers.api.rackspacecloud.com/
5678/flavors/1",
                "rel": "bookmark"
            }]
        },
        "hostId": "6447b7cb298c44dd1337be6e82d98dc7121918d3426725b31c6683d3",
        "id": "bbb0ad33-e4c7-4ab7-997f-e57b00d03176",
        "image": {
            "id": "3afe97b2-26dc-49c5-a2cc-a2fc8d80c001",
            "links": [{
                "href": "https://dfw.servers.api.rackspacecloud.com/
5678/images/3afe97b2-26dc-49c5-a2cc-a2fc8d80c001",
                "rel": "bookmark"
            }]
        },
        "key_name": "",
        "links": [{
            "href": "https://dfw.servers.api.rackspacecloud.com/v2/
5678/servers/bbb0ad33-e4c7-4ab7-997f-e57b00d03176",
            "rel": "self"
        }, {
            "href": "https://dfw.servers.api.rackspacecloud.com/5678/
servers/bbb0ad33-e4c7-4ab7-997f-e57b00d03176",
            "rel": "bookmark"
        }],
        "metadata": {},
        "name": "testinstance",
        "progress": 100,
        "status": "ACTIVE",
        "tenant_id": "5678",
        "updated": "2012-04-06T18:51:55Z",
        "user_id": "1234"
    }
}
</pre><h4><a id="aa10" name="aa10"></a>Code Sample:&nbsp;&nbsp;Reboot Server Request (JSON)</h4><pre>{
    "reboot": {
        "type": "HARD"
    }
}
</pre><hr /><p><a id="aa11" name="aa11"></a><strong>Legal Disclaimer</strong></p><p>This information is intended for software developers who want to develop applications by using the next generation Rackspace Cloud Servers powered by OpenStack application programming interface (API). The information is for informational purposes only and is provided “as is.”</p><p>Rackspace makes no representations or warranties of any kind, express or implied, as to the accuracy or completeness of the contents of this information and reserves the right to make changes to specifications and product/services description at any time without notice. Rackspace services offerings are subject to change without notice. Users must take full responsibility for application of any services mentioned herein. Except as set forth in Rackspace general terms and conditions and/or cloud terms of service, Rackspace assumes no liability whatsoever, and disclaims any express or implied warranty, relating to its services including, but not limited to, the implied warranty of merchantability, fitness for a particular purpose, and noninfringement.</p>
