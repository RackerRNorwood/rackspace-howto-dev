---
node_id: 4782
title: Migrate a First Generation server to a Next Generation server with minimal downtime
permalink: article/migrating-a-first-generation-server-to-next-generation-server-with-minimal-downtime
type: article
created_date: '2015-08-10 16:29:18'
created_by: Rackspace Support
last_modified_date: '2015-08-14 14:0209'
last_modified_by: rose.contreras
products: Cloud Servers
categories: Server Migration
body_format: full_html
---

<! ---- Migrate a First Generation server to a Next Generation server with minimal downtime ---- />

<p>This article describes the process of migrating an existing First Generation (First Gen) cloud server to a Next Generation (Next Gen) cloud server with little to no downtime by using Cloud Load Balancers and server imaging. To learn more about the Next Generation Cloud Servers platform and the migration process, see <a href="http://www.rackspace.com/knowledge_center/article/next-generation-cloud-servers-migration-considerations-and-options"> Next-Generation Cloud Servers migration considerations and options</a>.</p>

<p><strong>Note:</strong> This article assumes that you host your Cloud Servers and DNS with Rackspace.  However, if you host DNS elsewhere, you will need to perform the steps in the  <a href="#rept">Repoint your DNS to the load balancer</a> section of this article via your DNS portal of where it is hosted.</p>

<table border="1">
  <tr>
    <td><h3>Contents</h3>
      <p><ul>
        <li><a href="#create">Create a load balancer</a></li>
        <li><a href="#config">Configure the load balancer</a></li>
        <li><a href="#rept">Repoint your DNS to the load balancer</a></li>
        <li><a href="#image">Create a Next Gen image</a>
        <li><a href="#nexgen">Create a Next Gen server</a></li>
        <li><a href="switch">Switch the servers</a></li>
      </ul></p></td>
  </tr>
</table>

<a id="create"> </a>

<h2>Create a load balancer</h2>

<p>The load balancer makes a seamless migration from First Gen server to Next Gen server possible. You use it to update your DNS entries by having your stale DNS entry traffic continue to reach your cloud server while allowing the updated traffic to continue being passed on through the load balancer.</p>

<ol>
  <li>Log in to your <a href="https://mycloud.rackspace.com">Cloud Control Panel.<br /><br /></li>
  <li>From the <strong>Networking</strong> menu, select <strong>Load Balancers</strong>.<br /><br /</li>
    <li>Click <strong>Create Load Balancer</strong>.<br />
    <p><img src="/knowledge_center/sites/default/files/field/image/1941-2_0.png" width="520" height="104" border="1" alt=""  /></p></li>
  <li>In the Identification section, enter a name and select the same region your server is in for your load balancer.<br /><br /></li>
  <li>In the Configuration section, select <strong>Accessible on the Public Internet</strong> for Virtual IP.<br /><br /></li>
    </ul></li>
  <li>Click <strong>Create Load Balancer</strong>.<br /><br /></li></ol>

<a id="config"> </a>

<h2>Configure the load balancer</h2>

<p>After you create the load balancer, click on it to view the advanced configuration options. To configure the load balancer, go to the Nodes section and add the First Gen server to the load balancer.</p>

<p><strong>Note:</strong> If you have SSL termination on your server, you will need additional configuration. Enable SSL termination through the load balancer or have two load balancers sharing the same IP to direct HTTP and HTTPS traffic to your server.</p>

<p><img src="/knowledge_center/sites/default/files/field/image/4782-3_8.png" width="555" height="230" border="1" alt=""  /></p>

<a id="rept"> </a>

<h2>Repoint your DNS to the load balancer</h2>

<ol>
  <li>Go to the Cloud DNS section of the <a href="https://mycloud.rackspace.com/">Cloud Control Panel</a>.<br />

    <p><p><img src="/knowledge_center/sites/default/files/field/image/4782-DNS-1_1.png" width="506" height="157" border="1" alt=""  /></p></li>

  <li>Select the domain that is currently pointing to your First Gen server.<br />

    <p><img src="/knowledge_center/sites/default/files/field/image/4782-4-New_0.png" width="419" height="418" border="1" alt=""  /></li>

  <li>Click the gear next to your A record and select <strong>Modify Record</strong>.<br /><br /></li>

  <li>Type your load balancer IP address directly in to your browser's address bar to verify that your website is loading correctly.<br /><br /></li>
</ol>

<a id="image"> </a>

<h2>Create a Next Gen server image</h2>

<p>Follow the steps in this section to create an image of the First Gen server that you will then use to create a Next Gen server.</p>

<p><strong>Note:</strong> If you are on a Linux server with under 40 GB of disk in use, you can resize down to a 1 GB flavor before taking the image. This will allow you to boot to any Next Generation flavors that can take advantage of our <a href="http://www.rackspace.com/knowledge_center/article/boot-a-server-from-a-cloud-block-storage-volume">Boot From Volume Offering</a>.</p>

<ol>
  <li>On the Cloud Servers page, click the gear icon next to the First Gen server that you are imaging and select <strong>Create Image</strong>.<br />

<p><img src="/knowledge_center/sites/default/files/field/image/4782-5_0.png" width="230" height="329" border="1" alt=""  /></p></li>

  <li>Enter a name for the image in the <strong>Saved Image Name</strong> field.<br /><br /></li>

  <li>Choose <strong>Next Generation Cloud Server Image</strong>.<br />

    <p><img src="/knowledge_center/sites/default/files/field/image/4782-6_0.png" width="246" height="244" border="1" alt=""  /></p></li>

  <li>Click <strong>Create Image</strong>.</li>
</ol>

<a id="nexgen"> </a>

<h2>Create a Next Gen server</h2>

<p>Follow the steps below to create a Next Gen server.</p>

<ol>
  <li>On the Cloud Servers page of the Cloud Control Panel, click <strong>Saved Images</strong>.<br />

    <p><img src="/knowledge_center/sites/default/files/field/image/4782-7_0.png" border="1" alt=""  /></p></li>

  <li>Look for the image you just created and select <strong>Create Server with Image</strong>.<br />

    <p><img src="/knowledge_center/sites/default/files/field/image/4782-8_0.png" border="1" alt=""  /></p></li>

  <li>Name your server and choose your preferred flavor.<br />
    <p><img src="/knowledge_center/sites/default/files/field/image/4782-9_0.png" width="401" height="324" border="1" alt=""  /></p></li>

  <li>Click <strong>Create Server</strong> at the bottom of the page.<br /><br /></li>
</ol>

<a id="switch"> </a>

<h2>Switch the servers</h2>

<p>After the server has been created, you attach it to your load balancer by performing the following steps.</p>

  <ol>
    <li>On the Load Balancer Details page, click <strong>Add Cloud Servers</strong>.<br /><br /></li>

    <li>Select the server that you just created and click <strong>Add Selected Servers</strong>.<br />

      <p><img src="/knowledge_center/sites/default/files/field/image/4782-11_0.png" width="388" height="287" border="1" alt=""  /></p></li>

    <li>Click the gear icon next to the First Gen server and select <strong>Remove from Load Balancer</strong>. Click <strong>Remove Node</strong>.<br />

      <p><img src="/knowledge_center/sites/default/files/field/image/4782-13_0.png" width="315" height="157" border="1" alt=""  /></p>

      <p><strong>Note:</strong> You can remove the First Gen server by using the Edit Node Condition feature instead. With this option, anyone currently on the server will be unaffected by the transition but will not be allowed to start new connections.</p>

      <ol type="a">
        <li>Click the gear icon next to the server and select <strong>Edit Node Condition</strong>.<br />

          <p></p></li>

        <li>Select <strong>Draining Connections</strong>.<br />

          <p><img src="/knowledge_center/sites/default/files/field/image/4782-14_1.png" width="308" height="248" border="1" alt=""  /></p></li>

        <li>Click <strong>Save Condition</strong>.</li>
      </ol></li>
    </ol>

<p>Your server traffic will now use your Next Gen server.</p>


<h2>Optional synchronization tools</h2>

<p>You can use a tool to synchronize new data to your server.</p>

  <ul>
    <li>Rsync is the preferred tool for Linux servers. Learn more about it at <a href="http://www.rackspace.com/knowledge_center/article/migrating-a-linux-server-from-the-command-line-0">Migrating a Linux server from the command line</a>.<br /><br /></li>
    <li>FTP is the recommended tool for synchronizing data on a Windows server.<br /><br /></li>
  </ul>
