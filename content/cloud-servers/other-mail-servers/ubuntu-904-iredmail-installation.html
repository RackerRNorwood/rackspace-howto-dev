---
node_id: 145
title: Ubuntu 9.04 - iRedMail Installation
permalink: article/ubuntu-904-iredmail-installation
type: article
created_date: '2011-03-15 19:17:01'
created_by: RackKCAdmin
last_modified_date: '2013-08-05 19:2304'
last_modified_by: jered.heeschen
products: Cloud Servers
categories: Other Mail Servers
body_format: tinymce
---

<p>This tutorial will walk you through the process of installing the <a class="external text" title="http://code.google.com/p/iredmail/" href="http://code.google.com/p/iredmail/" rel="nofollow">iRedMail</a> bundled mail server to successfully send and receive e-mail.</p><p>This tutorial assumes a few things:</p><ul><li>You have followed the Ubuntu 9.04 setup guide</li><li>You are running on a new server with no other software installed</li><li>You are running the commands as a normal user with sudo privileges</li><li>The current version of iRedMail at the time of writing is 0.6.0 and it is in <strong>beta</strong>.</li></ul><p><br /> <strong>Read this before continuing:</strong></p><p>Mail servers are complex pieces of software and can be difficult to setup and maintain. An improperly configured mail server could cause quite a havoc not only on your server but for the rest of the Internet if spammers begin using your servers to send spam. Before attempting to run a mail server please be sure that you have a comfortable understanding of DNS (SPF/TXT/MX records), Domain Keys, Sender Policy Framework, and how mail servers/mail flow works. If you are not sure about any of these topics please read up before continuing otherwise you may run into problems and become frustrated very quickly.</p><p>&nbsp;</p><table id="toc" class="toc" summary="Contents"><tbody><tr><td><div id="toctitle"><h2>Contents</h2></div><ul><li class="toclevel-1"><a href="#Reverse_DNS"><span class="tocnumber">1</span> <span class="toctext">Reverse DNS</span></a></li><li class="toclevel-1"><a href="#Perl_Locale_Fix"><span class="tocnumber">2</span> <span class="toctext">Perl Locale Fix</span></a></li><li class="toclevel-1"><a href="#Aptitude_Update"><span class="tocnumber">3</span> <span class="toctext">Aptitude Update</span></a></li><li class="toclevel-1"><a href="#Setting_the_Host_Name"><span class="tocnumber">4</span> <span class="toctext">Setting the Host Name</span></a></li><li class="toclevel-1"><a href="#Modify_your_Host_File"><span class="tocnumber">5</span> <span class="toctext">Modify your Host File</span></a></li><li class="toclevel-1"><a href="#Reboot"><span class="tocnumber">6</span> <span class="toctext">Reboot</span></a></li><li class="toclevel-1"><a href="#Enable_Aptitude_Sources"><span class="tocnumber">7</span> <span class="toctext">Enable Aptitude Sources</span></a></li><li class="toclevel-1"><a href="#Install_Pre-requisite_Packages"><span class="tocnumber">8</span> <span class="toctext">Install Pre-requisite Packages</span></a></li><li class="toclevel-1"><a href="#Enable_ACL"><span class="tocnumber">9</span> <span class="toctext">Enable ACL</span></a></li><li class="toclevel-1"><a href="#Remount_the_File_System"><span class="tocnumber">10</span> <span class="toctext">Remount the File System</span></a></li><li class="toclevel-1"><a href="#Switch_to_Root_User"><span class="tocnumber">11</span> <span class="toctext">Switch to Root User</span></a></li><li class="toclevel-1"><a href="#Download_iRedMail"><span class="tocnumber">12</span> <span class="toctext">Download iRedMail</span></a></li><li class="toclevel-1"><a href="#Uncompress_iRedMail"><span class="tocnumber">13</span> <span class="toctext">Uncompress iRedMail</span></a></li><li class="toclevel-1"><a href="#Download_Installation-Related_Packages"><span class="tocnumber">14</span> <span class="toctext">Download Installation-Related Packages</span></a></li><li class="toclevel-1"><a href="#Start_the_iRedMail_Installer"><span class="tocnumber">15</span> <span class="toctext">Start the iRedMail Installer</span></a><ul><li class="toclevel-2"><a href="#Welcome_Screen"><span class="tocnumber">15.1</span> <span class="toctext">Welcome Screen</span></a></li><li class="toclevel-2"><a href="#vmail_User"><span class="tocnumber">15.2</span> <span class="toctext">vmail User</span></a></li><li class="toclevel-2"><a href="#Preferred_Backend"><span class="tocnumber">15.3</span> <span class="toctext">Preferred Backend</span></a></li><li class="toclevel-2"><a href="#MySQL_Password"><span class="tocnumber">15.4</span> <span class="toctext">MySQL Password</span></a></li><li class="toclevel-2"><a href="#vmail_User_Password"><span class="tocnumber">15.5</span> <span class="toctext">vmail User Password</span></a></li><li class="toclevel-2"><a href="#Virtual_Domain"><span class="tocnumber">15.6</span> <span class="toctext">Virtual Domain</span></a></li><li class="toclevel-2"><a href="#Domain_Administrator"><span class="tocnumber">15.7</span> <span class="toctext">Domain Administrator</span></a></li><li class="toclevel-2"><a href="#Domain_Administrator_Password"><span class="tocnumber">15.8</span> <span class="toctext">Domain Administrator Password</span></a></li><li class="toclevel-2"><a href="#Add_User_for_Domain"><span class="tocnumber">15.9</span> <span class="toctext">Add User for Domain</span></a></li><li class="toclevel-2"><a href="#User_Password_for_Domain"><span class="tocnumber">15.10</span> <span class="toctext">User Password for Domain</span></a></li><li class="toclevel-2"><a href="#SPF_and_DKIM"><span class="tocnumber">15.11</span> <span class="toctext">SPF and DKIM</span></a></li><li class="toclevel-2"><a href="#MySQL_Options"><span class="tocnumber">15.12</span> <span class="toctext">MySQL Options</span></a></li><li class="toclevel-2"><a href="#Default_Language_for_WebMail"><span class="tocnumber">15.13</span> <span class="toctext">Default Language for WebMail</span></a></li><li class="toclevel-2"><a href="#PostfixAdmin_E-mail"><span class="tocnumber">15.14</span> <span class="toctext">PostfixAdmin E-mail</span></a></li><li class="toclevel-2"><a href="#Mail_Alias_for_root"><span class="tocnumber">15.15</span> <span class="toctext">Mail Alias for root</span></a></li><li class="toclevel-2"><a href="#Begin_Configuration"><span class="tocnumber">15.16</span> <span class="toctext">Begin Configuration</span></a></li><li class="toclevel-2"><a href="#iptables_Configuration"><span class="tocnumber">15.17</span> <span class="toctext">iptables Configuration</span></a></li><li class="toclevel-2"><a href="#Start_Postfix"><span class="tocnumber">15.18</span> <span class="toctext">Start Postfix</span></a></li></ul></li><li class="toclevel-1"><a href="#Delete_Setup_Files"><span class="tocnumber">16</span> <span class="toctext">Delete Setup Files</span></a></li><li class="toclevel-1"><a href="#Reboot_2"><span class="tocnumber">17</span> <span class="toctext">Reboot</span></a></li><li class="toclevel-1"><a href="#Setup_SPF_Record"><span class="tocnumber">18</span> <span class="toctext">Setup SPF Record</span></a></li><li class="toclevel-1"><a href="#OPTIONAL:_Create_DKIM_.28DomainKey.29"><span class="tocnumber">19</span> <span class="toctext">OPTIONAL: Create DKIM (DomainKey)</span></a></li><li class="toclevel-1"><a href="#OPTIONAL:_Test_DKIM"><span class="tocnumber">20</span> <span class="toctext">OPTIONAL: Test DKIM</span></a></li><li class="toclevel-1"><a href="#Reboot_3"><span class="tocnumber">21</span> <span class="toctext">Reboot</span></a></li><li class="toclevel-1"><a href="#Access_WebMail"><span class="tocnumber">22</span> <span class="toctext">Access WebMail</span></a></li><li class="toclevel-1"><a href="#Information_About_Your_Install"><span class="tocnumber">23</span> <span class="toctext">Information About Your Install</span></a></li><li class="toclevel-1"><a href="#Common_Links"><span class="tocnumber">24</span> <span class="toctext">Common Links</span></a></li><li class="toclevel-1"><a href="#Troubleshooting:_View_Mail_Logs"><span class="tocnumber">25</span> <span class="toctext">Troubleshooting: View Mail Logs</span></a></li></ul></td></tr></tbody></table><p><a id="Reverse_DNS" name="Reverse_DNS"></a></p><h2><span class="mw-headline">Reverse DNS </span></h2><p>Before we can begin installing the mail server we need to setup our reverse DNS. Without this you will find it hard to send or receive alot of e-mail across the Internet because servers will think you are spamming them or sending falsified e-mail.</p><p>Setting up reverse DNS through our Control Panel is very easy. Please refer to our instruction on <a title="DNS - Creating a Reverse DNS Record" href="/knowledge_center/index.php/DNS_-_Creating_a_Reverse_DNS_Record">how to setup a reverse DNS record</a>. Keep in mind that DNS changes may take up to 24 hours to propagate across the Internet.</p><p><a id="Perl_Locale_Fix" name="Perl_Locale_Fix"></a></p><h2><span class="mw-headline">Perl Locale Fix </span></h2><p>Our servers ship with no locale information so they are world-friendly. To install the locale information type the following:</p><pre># sudo aptitude install language-pack-en-base
</pre><p><a id="Aptitude_Update" name="Aptitude_Update"></a></p><h2><span class="mw-headline">Aptitude Update </span></h2><p>Next we will make sure that our server is update to date software-wise. To do this we will run an Aptitude update:</p><pre># sudo aptitude update
# sudo aptitude upgrade
</pre><p><a id="Setting_the_Host_Name" name="Setting_the_Host_Name"></a></p><h2><span class="mw-headline">Setting the Host Name </span></h2><p>One final step that needs to take place is setting up the host name of your mail server. You can view your current host name by typing:</p><pre># hostname --fqdn
kelly.myServer</pre><p>Now this might work for most applications but for a mail server this just won't do! We need to set your mail server's host name to match the <strong>F</strong>ully <strong>Q</strong>ualified <strong>D</strong>omain <strong>N</strong>ame. A Fully Qualified Domain Name, or FQDN, might look like <em>www.google.com</em>. For most mail servers it will be something like <em>mail.yourdomain.com</em>.</p><p>Have no fear! Changing your host name is a very simple task!</p><p>To change your host name we will need to modify the <em>/etc/hostname</em> file on your server. This is the file that stores the host name information.</p><pre># sudo nano /etc/hostname
</pre><p>When the <em>nano</em> editor opens you will see the default host name listed. Delete the line and type in your host name. Like I said earlier, most mail servers are <em>mail.yourdomain.com</em>. Be sure to write down what you set your host name to as we will need it later on.</p><p>Once you have modified the host name simply press <strong>CTRL-X</strong> followed by <strong>Y</strong> and <strong>Enter</strong> to save.</p><p><a id="Modify_your_Host_File" name="Modify_your_Host_File"></a></p><h2><span class="mw-headline">Modify your Host File </span></h2><p>We have one more change to make before we can begin the installation. When addressing your FQDN we need to tell the server that it will be referring to itself and not some IP on the Internet. This will help reduce traffic and helps the server know where it is located. To do this we will need to modify the <em>/etc/hosts</em> file. This, too, is an easy task!</p><p>To modify the hosts file type the following:</p><pre># sudo nano /etc/hosts</pre><p>The nano editor will open with your hosts file.</p><p>The first thing you need to do is delete the second 127.0.0.1 line with your old host name. This should leave you with a single 127.0.0.1 line. Move over to the <em>localhost</em> portion of that line and add your FQDN (mail.mydomain.com, for instance) followed by your subdomain that you've chosen (mail, in our example). Your line should look similar to the one below:</p><pre>127.0.0.1  mail.mydomain.com mail localhost localhost.localdomain
</pre><p>To save the file simply press <strong>CTRL-X</strong> followed by <strong>Y</strong> and <strong>Enter</strong> as we did before.</p><p><a id="Reboot" name="Reboot"></a></p><h2><span class="mw-headline">Reboot </span></h2><p>To apply our host name changes we will need to reboot the server.</p><pre># sudo reboot
</pre><p>Once your server has rebooted please log back in.</p><p><a id="Enable_Aptitude_Sources" name="Enable_Aptitude_Sources"></a></p><h2><span class="mw-headline">Enable Aptitude Sources </span></h2><p>To enable the additional Aptitude sources so iRedMail can find the software it needs to function. To do this we need to modify the <em>/etc/apt/sources.list</em> file. To modify the file type the following:</p><pre># sudo nano /etc/apt/sources.list
</pre><p>Go to the bottom of the file and add the following lines:</p><pre>deb http://mirrors.163.com/ubuntu jaunty main universe
deb http://mirrors.163.com/ubuntu jaunty-updates main universe
</pre><p>To save the file simply press <strong>CTRL-X</strong> followed by <strong>Y</strong> and <strong>Enter</strong></p><p>Now we need to test our source list changes. To do this type the following:</p><pre># sudo aptitude update
</pre><p><a id="Install_Pre-requisite_Packages" name="Install_Pre-requisite_Packages"></a></p><h2><span class="mw-headline">Install Pre-requisite Packages </span></h2><p>You're probably thinking "when are we going to install the software?" Have no fear, we are almost there! First we need to install a software package for the system to install correctly. The following software package needs to be installed:</p><ul><li>acl - File system permission control</li></ul><pre># sudo aptitude install acl
</pre><p><a id="Enable_ACL" name="Enable_ACL"></a></p><h2><span class="mw-headline">Enable ACL </span></h2><p>We need to enable ACL access control on the file system. Please read this portion <strong>very carefully</strong>! Making improper changes to this file could destroy your file system!</p><p><strong>Read this again! Making improper changes to this file could destroy your file system</strong></p><p>Open up the <em>/etc/fstab</em> file and modify the <em>mount options</em> that are used to mount the main file system partition.</p><pre># sudo nano /etc/fstab</pre><p style="border-style: initial; border-color: initial;">Look for a line that begins with either&nbsp;<em style="border-style: initial; border-color: initial;">/dev/sda1</em>&nbsp;or&nbsp;<em style="border-style: initial; border-color: initial;">/dex/xvda1</em>&nbsp;and put a&nbsp;<strong style="border-style: initial; border-color: initial;">#</strong>&nbsp;comment mark in front of it.</p><p style="border-style: initial; border-color: initial;">If that line started with&nbsp;<em style="border-style: initial; border-color: initial;">/dev/sda1</em>&nbsp;go to the bottom of the file and type or copy in the following line:</p><pre style="border-style: initial; border-color: initial;">/dev/sda1    /    ext3    errors=remount-ro,noatime,acl     0     1
</pre><p style="border-style: initial; border-color: initial;">If the line started with&nbsp;<em style="border-style: initial; border-color: initial;">/dev/xvda1</em>&nbsp;go to the bottom of the file and type or copy in the following line instead:</p><p style="border-style: initial; border-color: initial;">&nbsp;</p><pre style="border-style: initial; border-color: initial;">/dev/xvda1    /    ext3    errors=remount-ro,noatime,acl     0     1</pre><p>Save the file with CTRL-X, then Y and Enter.</p><p>Take a breath!</p><p><a id="Remount_the_File_System" name="Remount_the_File_System"></a></p><h2><span class="mw-headline">Remount the File System </span></h2><p>Once you have the changes made to the /etc/fstab file you now need to reload them. This is fairly easy to do.</p><pre># sudo mount -o remount,rw,acl /
</pre><p>Now we are ready to install iRedMail!</p><p><a id="Switch_to_Root_User" name="Switch_to_Root_User"></a></p><h2><span class="mw-headline">Switch to Root User </span></h2><p>iRedMail will not install with <em>sudo</em> privileges so we must switch to the <em>root</em> user. To do this type the following:</p><pre># sudo su -
</pre><p>You should be presented with a <em>root@</em> prompt now.</p><p><a id="Download_iRedMail" name="Download_iRedMail"></a></p><h2><span class="mw-headline">Download iRedMail </span></h2><p>To install iRedMail you will need to download the installation package from their website. Please point your web browser to <a class="external free" title="http://code.google.com/p/iredmail/downloads/list" href="http://code.google.com/p/iredmail/downloads/list" rel="nofollow">http://code.google.com/p/iredmail/downloads/list</a> and download the latest version. At the time of writing the current version is <em>0.6.0</em>. For the purposes of our installation we will be using <em>wget</em> to download the installation package. Note that we are downloading this to the home directory of the current user.</p><pre># cd ~
# wget http://iredmail.googlecode.com/files/iRedMail-0.6.0.tar.bz2

</pre><p><a id="Uncompress_iRedMail" name="Uncompress_iRedMail"></a></p><h2><span class="mw-headline">Uncompress iRedMail </span></h2><p>You'll notice that iRedMail comes packaged as a TAR file with further BZ2 (BZip2) compression. To unpack this type the following:</p><pre># tar xjf iRedMail-0.6.0.tar.bz2
</pre><p>This will create a directory called <em>iRedMail-0.6.0</em>.</p><p><a id="Download_Installation-Related_Packages" name="Download_Installation-Related_Packages"></a></p><h2><span class="mw-headline">Download Installation-Related Packages </span></h2><p>A few packages need to be downloaded by the installer before installation can commence. Run the following lines of code to make this happen:</p><pre># cd iRedMail-0.6.0/pkgs/   (Note that the directory name may differ between versions)
# bash get_all.sh
</pre><p>This will download all of the packages necessary to install. Now we need to refresh the repository list:</p><p><a id="Start_the_iRedMail_Installer" name="Start_the_iRedMail_Installer"></a></p><h2><span class="mw-headline">Start the iRedMail Installer </span></h2><p>The moment has come! To start the installation type the following:</p><pre># cd ~/iRedMail-0.6.0     (Note that the directory name may differ between versions)
# bash iRedMail.sh
</pre><p><a id="Welcome_Screen" name="Welcome_Screen"></a></p><h3><span class="mw-headline">Welcome Screen </span></h3><p>You will see a welcome screen, press <strong>Yes</strong>.</p><p><a id="vmail_User" name="vmail_User"></a></p><h3><span class="mw-headline">vmail User </span></h3><p>You will be prompted for the home directory location for the <em>vmail</em> user. The default value, /home/vmail, will be listed -- this is okay. Simply press <strong>Next</strong> for the default option.</p><p><a id="Preferred_Backend" name="Preferred_Backend"></a></p><h3><span class="mw-headline">Preferred Backend </span></h3><p>You will be asked which backend you would like to use: <em>MySQL</em> or <em>OpenLDAP</em>. For our example we will use MySQL as the backend so highlight MySQL and press the space-bar to select, then press <strong>Next</strong> to continue.</p><p><a id="MySQL_Password" name="MySQL_Password"></a></p><h3><span class="mw-headline">MySQL Password </span></h3><p>You will be prompted for your MySQL password. Enter it here and press <strong>Next</strong>.</p><p><a id="vmail_User_Password" name="vmail_User_Password"></a></p><h3><span class="mw-headline">vmail User Password </span></h3><p>You will be prompted for the <em>vmail</em> user password as well. This will be a system user that holds all of your mail. Type it and press <strong>Next</strong>.</p><p><a id="Virtual_Domain" name="Virtual_Domain"></a></p><h3><span class="mw-headline">Virtual Domain </span></h3><p>You will be asked to enter your first virtual domain. This is the domain that you will be hosting mail for. Type in your domain name (such as <em>mydomain.com</em>) and press <strong>Next</strong>.</p><p><a id="Domain_Administrator" name="Domain_Administrator"></a></p><h3><span class="mw-headline">Domain Administrator </span></h3><p>You will be prompted to enter the administrator name of your virtual domain. The default value of <em>postmaster</em> is an industry standard and should be used. This address will be <em>postmaster@mydomain.com</em> when the installation is completed. Press <strong>Next</strong>.</p><p><a id="Domain_Administrator_Password" name="Domain_Administrator_Password"></a></p><h3><span class="mw-headline">Domain Administrator Password </span></h3><p>You will be prompted to enter a password for the above <em>postmaster</em> e-mail address. Press <strong>Next</strong> after you have entered it.</p><p><a id="Add_User_for_Domain" name="Add_User_for_Domain"></a></p><h3><span class="mw-headline">Add User for Domain </span></h3><p>You will be asked to add your first user for your domain. This will be your first e-mail account such as <em>john.doe</em>. The full e-mail address would be <em>john.doe@mydomain.com</em>. Enter the user name here and press <strong>Next</strong>.</p><p><a id="User_Password_for_Domain" name="User_Password_for_Domain"></a></p><h3><span class="mw-headline">User Password for Domain </span></h3><p>Next you will be asked what password you would like to use for the user we just setup. You will see the full e-mail address at the top of the window. Type in the password and press <strong>Next</strong>.</p><p><a id="SPF_and_DKIM" name="SPF_and_DKIM"></a></p><h3><span class="mw-headline">SPF and DKIM </span></h3><p>You will be prompted if you would like to setup SPF (Sender Policy Framework) and DKIM (DomainKeys Identified Mail). <strong>SPF is highly recommended, but DKIM is optional and should only be installed by more experienced users.</strong> Uncheck DKIM if you are unfamiliar with it. Keep in mind that these will require additional DNS entries to be made. If you would like to use these simply press <strong>Next</strong>. <em>We will walk you through setting up the SPF and DKIM records later.</em></p><p><a id="MySQL_Options" name="MySQL_Options"></a></p><h3><span class="mw-headline">MySQL Options </span></h3><p>Because we are choosing MySQL as our backend we have a number of administrative tools we can install. Those tools include <em>phpMyAdmin</em>, <em>PostfixAdmin</em> and <em>AWstats</em>. We also have the ability to select which WebMail client we would like to install. Our installation will choose the default options (Roundcubemail, phpMyAdmin, PostfixAdmin and Awstats) so just click <strong>Next</strong>.</p><p><a id="Default_Language_for_WebMail" name="Default_Language_for_WebMail"></a></p><h3><span class="mw-headline">Default Language for WebMail </span></h3><p>You will be asked for your default language for WebMail. Select your language and press <strong>Next</strong>.</p><p><a id="PostfixAdmin_E-mail" name="PostfixAdmin_E-mail"></a></p><h3><span class="mw-headline">PostfixAdmin E-mail </span></h3><p>You will be asked what e-mail address to use for the PostfixAdmin administrative e-mail. You can use the default <em>postmaster@mydomain.com</em> e-mail or use a different address. Click <strong>Next</strong>.</p><p><a id="Mail_Alias_for_root" name="Mail_Alias_for_root"></a></p><h3><span class="mw-headline">Mail Alias for <em>root</em> </span></h3><p>You will be asked to put an e-mail address to use for the <em>root</em> user. This is where all system e-mail will be sent pertaining to the system and the root user. Put in your e-mail address and press <strong>Next</strong>. It is advised to use an e-mail address <em>NOT</em> hosted on your mail server.</p><p><a id="Begin_Configuration" name="Begin_Configuration"></a></p><h3><span class="mw-headline">Begin Configuration </span></h3><p>You will be prompted to continue with the installation. Press <strong>Y</strong> and then <strong>Enter</strong>.</p><p><a id="iptables_Configuration" name="iptables_Configuration"></a></p><h3><span class="mw-headline">iptables Configuration </span></h3><p>You will be prompted at the end of the installation if you would like to use the default iptables firewall configuration. If you have a brand new server simply press <strong>Y</strong> and then <strong>Enter</strong>. <em>Do not do this if you have previously made modifications to your iptables configuration.</em></p><p>You will then be prompted if you would like to restart iptables. For now press <strong>N</strong> and press <strong>Enter</strong>.</p><p><a id="Start_Postfix" name="Start_Postfix"></a></p><h3><span class="mw-headline">Start Postfix </span></h3><p>You will be asked if you would like to start Postfix now. Press <strong>N</strong> and press <strong>Enter</strong>.</p><p>You installation should now be finished and you will be returned to a shell prompt.</p><p><a id="Delete_Setup_Files" name="Delete_Setup_Files"></a></p><h2><span class="mw-headline">Delete Setup Files </span></h2><p>Before this server is ready to be used in a production environment it must be safely locked down and the setup files should be removed. This is easily accomplished with one <em>rm</em> statement.</p><pre># rm -f ~/iRedMail-0.6.0/config
</pre><p><a id="Reboot_2" name="Reboot_2"></a></p><h2><span class="mw-headline">Reboot </span></h2><p>Go ahead and reboot the server to reload everything and cleanly start Postfix.</p><pre># reboot
</pre><p>Once the server comes back up go ahead and log back in as a normal user.</p><p><a id="Setup_SPF_Record" name="Setup_SPF_Record"></a></p><h2><span class="mw-headline">Setup SPF Record </span></h2><p>Now we will need to go setup an SPF record. Go to <a class="external free" title="http://old.openspf.org/wizard.html" href="http://old.openspf.org/wizard.html" rel="nofollow">http://old.openspf.org/wizard.html</a> to determine what your SPF record should be. Once you have done this please submit a ticket and we will process your SPF record. Note that your mail may still function without this but you may receive frequent mail rejections.</p><p><a id="OPTIONAL:_Create_DKIM_.28DomainKey.29" name="OPTIONAL:_Create_DKIM_.28DomainKey.29"></a></p><h2><span class="mw-headline">OPTIONAL: Create DKIM (DomainKey) </span></h2><p>To create a the Domain Key entry type the following:</p><pre># sudo apt-get install amavisd-new
</pre><pre># sudo /usr/sbin/amavisd-new showkeys
</pre><p>You will see an output like the following:</p><pre>[user@mail ~]$ sudo /usr/sbin/amavisd showkeys
; key#1, domain mydomain.com, /var/lib/dkim/mydomain.com.pem
dkim._domainkey.mydomain.com.     3600 TXT (
  "v=DKIM1; p="
  "MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCuv5EpKWzSRGm8Gtks8uDEpllQ"
  "Ug50USM6LjIEfx77+C9c3GpuxtTdfYMUlA7nqlolJ0GCx+PPrbSOCKZO1UeHAG2M"

  "/KYC9Kw8ByqP80Ni+Xx+M2fNSQCn4c+fmsX6AwLHZfshTmR6lGNTL/VMi84GgJtA"
  "vfufWEShr/j8f4udcwIDAQAB")
</pre><p>If you are hosting your DNS with Cloud Servers please submit a ticket and request that the domain key is added. We will create a TXT record for your domain with the above key. If you are hosting your DNS elsewhere you will need to create a TXT record for <em>dkim._domainkey.mydomain.com</em> and use the enclosed text (without the quotes) as the content.</p><p><a id="OPTIONAL:_Test_DKIM" name="OPTIONAL:_Test_DKIM"></a></p><h2><span class="mw-headline">OPTIONAL: Test DKIM </span></h2><p>Once you have the TXT record created you can test it on your server by typing the following:</p><pre># sudo /usr/sbin/amavisd-new testkeys
</pre><p>If it passes you should see something like the following:</p><pre>TESTING#1: dkim._domainkey.mydomain.com        =&gt; pass
</pre><p>If you receive 'fail' then you may have a problem with your key. Please check it again. This will also result from DNS entries that have not propagated yet.</p><p><a id="Reboot_3" name="Reboot_3"></a></p><h2><span class="mw-headline">Reboot </span></h2><p>Reboot your server one more time.</p><pre># sudo reboot
</pre><p>Once the server has come back online proceed below.</p><p><a id="Access_WebMail" name="Access_WebMail"></a></p><h2><span class="mw-headline">Access WebMail </span></h2><p>Point your web-browser to <a class="external free" title="http://mail.mydomain.com/mail/" href="http://mail.mydomain.com/mail/" rel="nofollow">http://mail.mydomain.com/mail/</a> and this should bring up the RoundCubeMail WebMail application. Type in your login name and password and click Login. Send yourself an e-mail from another e-mail account to see if it is working. You can also send an e-mail to someone on the Internet to test outbound e-mail.</p><p><a id="Information_About_Your_Install" name="Information_About_Your_Install"></a></p><h2><span class="mw-headline">Information About Your Install </span></h2><p>You can find information about your installation file located here: <strong>~/iRedMail-0.6.0/iRedMail.tips</strong></p><p><a id="Common_Links" name="Common_Links"></a></p><h2><span class="mw-headline">Common Links </span></h2><p>The following links are valid for your iRedMail installation. Please replace <em>mail.mydomain.com</em> with your FQDN.</p><ul><li>postfix.admin - <a class="external free" title="https://mail.mydomain.com/postfixadmin/" href="https://mail.mydomain.com/postfixadmin/" rel="nofollow">https://mail.mydomain.com/postfixadmin/</a></li><li>RoundCubeMail WebMail - <a class="external free" title="http://mail.mydomain.com/mail/" href="http://mail.mydomain.com/mail/" rel="nofollow">http://mail.mydomain.com/mail/</a></li><li>phpMyAdmin - <a class="external free" title="https://mail.mydomain.com/phpmyadmin/" href="https://mail.mydomain.com/phpmyadmin/" rel="nofollow">https://mail.mydomain.com/phpmyadmin/</a></li><li>AWstats - <a class="external free" title="http://mail.mydomain.com/awstats/awstats.pl" href="http://mail.mydomain.com/awstats/awstats.pl" rel="nofollow">http://mail.mydomain.com/awstats/awstats.pl</a></li></ul><p><a id="Troubleshooting:_View_Mail_Logs" name="Troubleshooting:_View_Mail_Logs"></a></p><h2><span class="mw-headline">Troubleshooting: View Mail Logs </span></h2><p>If you are having troubles with your mail server you might want to take a peek at the logs. To view the logs for iRedMail simply type the following:</p><pre># sudo tail -F /var/log/mail.log
</pre><p>This will display the last output of the log and show the entries as they are added in real-time. Your output may look like the output below:</p><pre>Jul  8 23:25:53 mail postfix/smtp[4530]: 2CBEFD49DD: to=&lt;john@doe.com&gt;, relay=127.0.0.1[127.0.0.1]:10024, 
    delay=2251, delays=2251/0.04/0/0.44, dsn=2.0.0, status=sent (250 2.0.0 Ok, id=04262-04, from 
    MTA([127.0.0.1]:10025): 250 2.0.0 Ok: queued as 87F93D49DA)
Jul  8 23:25:53 mail postfix/qmgr[4298]: 2CBEFD49DD: removed
Jul  8 23:25:53 mail postfix/pipe[4536]: 87F93D49DA: to=&lt;john@doe.com&gt;, relay=dovecot, delay=0.06, 
    delays=0.04/0.01/0/0.02, dsn=2.0.0, status=sent (delivered via dovecot service)
Jul  8 23:25:53 mail postfix/qmgr[4298]: 87F93D49DA: removed
</pre><p>--<a class="new" title="User:Kkoehn (page does not exist)" href="/knowledge_center/index.php?title=User:Kkoehn&amp;action=edit&amp;redlink=1">Kelly Koehn</a> 14:26, 9 July 2009 (CDT)</p>
