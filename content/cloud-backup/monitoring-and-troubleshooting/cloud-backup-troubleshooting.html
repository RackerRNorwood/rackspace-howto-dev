---
node_id: 4732
title: Cloud Backup troubleshooting
permalink: article/cloud-backup-troubleshooting
type: article
created_date: '2015-06-29 16:42:25'
created_by: Rackspace Support
last_modified_date: '2015-11-05 16:4657'
last_modified_by: stephanie.fillmon
products: Cloud Backup
categories: Monitoring and Troubleshooting
body_format: tinymce
---

<p>If you encounter issues when working with Cloud Backup, use the following information to help you troubleshoot.</p>

<p>On this page:</p>

<ul>
	<li><a href="#Backup statuses">Backup statuses</a>

	<ul>
		<li><a href="#Backup status &quot;Skipped&quot;">Backup status "Skipped"</a></li>
		<li><a href="#Backup status &quot;Missed&quot;">Backup status "Missed"</a></li>
		<li><a href="#Backup status &quot;Completed with Errors&quot;">Backup status "Completed with Errors"</a></li>
		<li><a href="#Backup status &quot;Error&quot;">Backup status "Error"</a></li>
		<li><a href="#Backup status &quot;Failed&quot;">Backup status "Failed"</a></li>
	</ul>
	</li>
	<li><a href="#Connection errors - DriveClient fails to start, or DriveClient does not stay running">Connection errors - DriveClient fails to start, or DriveClient does not stay running</a></li>
	<li><a href="#Backup agent logs - Where they are located, and how to read them">Backup agent logs - Where they are located, and how to read them</a></li>
	<li><a href="#Recovery of your encrypted vault password">Recovery of your encrypted vault password</a></li>
	<li><a href="#Unable to backup or restore files (Windows only)">Unable to backup or restore files (Windows only)</a></li>
	<li><a href="#System resource utilization">System resource utilization</a></li>
	<li><a href="#Other errors and problems">Other errors and problems</a>
	<ul>
		<li><a href="Backup failed with 403 error from Cloud Files when account has sub-users">Backup failed with 403 error from Cloud Files when account has sub-users</a></li>
		<li><a href="Unable to browse a previous backup or browse a backup to select files to restore">Unable to browse a previous backup or browse a backup to select files to restore</a></li>
		<li><a href="Cleanup stuck in &quot;preparing&quot; mode">Cleanup stuck in "preparing" mode</a></li>
		<li><a href="Unexpected &quot;Skipped&quot; notifications for a backup">Unexpected "Skipped" notifications for a backup</a></li>
		<li><a href="Files modified during backup are missing or corrupted">Files modified during backup are missing or corrupted</a></li>
	</ul>
	</li>
</ul>

<h2><br />
<a id="Backup statuses" name="Backup statuses"></a>Backup statuses</h2>

<p>Descriptions for each of the backup statues follow along with tips for why you might receive each status and what action you might take.</p>

<h3><br />
<a id="Backup status &quot;Skipped&quot;" name="Backup status &quot;Skipped&quot;"></a>Backup status “Skipped”</h3>

<p>The backup job was skipped because a backup job was already queued. A single backup job can be queued only once.</p>

<p>A backup status of Skipped likely occurs because the frequency of the backup job is set too high (for example, hourly) and a single backup takes too long (longer than an hour). The backup scheduler will start to skip backups that it cannot meet.</p>

<p>Consider reducing the frequency of the job, or reducing the amount of data. If this is the initial job, the subsequent jobs might finish faster.</p>

<p>On older DriveClient installations, a Skipped status might be caused if the agent was hard-restarted (or the operating system was rebooted) during a backup, cleanup, or restore.</p>

<p>For Linux, a possible fix is to upgrade to the latest version of DriveClient and restart the running agent.</p>

<p>For Windows, a&nbsp; possible fix is to restart the DriveClient Windows service through Window's Service Manager, or through the <code>sc</code> command line Windows utility.<br />
&nbsp;</p>

<h3><a id="Backup status &quot;Missed&quot;" name="Backup status &quot;Missed&quot;"></a>Backup status “Missed”</h3>

<p>A status of Missed indicates that the backup job was missed. The DriveClient service was likely not running at the time of the scheduled backup, and the agent was therefore offline.</p>

<p>Verify that the agent is running on the server. If the agent is not already running, start it. Next, check the logs to determine why the backup job failed.</p>

<p>An agent should never go offline by itself. If the agent did not respond, then the agent could not reach one of the API endpoints, the agent was not running, or the agent was manually stopped or terminated.<br />
&nbsp;</p>

<h3><a id="Backup status &quot;Completed with Errors&quot;" name="Backup status &quot;Completed with Errors&quot;"></a>Backup status “Completed with Errors”</h3>

<p>A backup status of Completed with Errors indicates that the backup completed, but one or more files could not be backed up. The most common issues that cause this type of status are as follows:</p>

<ul>
	<li>The file was deleted between the time the index of files completed, and the copy of that specific file was attempted. This issue is common with any temporary files, such as PHP session files.</li>
	<li>The file was exclusively locked (Windows), so that no other process could read it. This issue is common with database binary files. With databases, you should never back up the binaries themselves, but rather dump the contents of the database to a flag file (such as an SQL file), and back up that flat file. Doing so allows for a quicker backup and an easier restore. We suggest that you break individual databases into different flat files, so that they can be manipulated easier on restore. Then,&nbsp; you do not have to fully restore the flat file just to restore a single database.</li>
	<li>You will see a <code>Path Not Found</code> message when non-UTF-8 characters are used in the path of the file in the operating system. The current version of Cloud Backup supports only UTF-8 characters.<br />
	&nbsp;</li>
</ul>

<h3><a id="Backup status &quot;Error&quot;" name="Backup status &quot;Error&quot;"></a>Backup status “Error”</h3>

<p>Many issues might cause a backup status of Error to occur, such as Cloud account permissions for the user who configured that agent or the DriveClient not being able to connect to the agent APIs.</p>

<p>Rackspace Support must review the DriveClient.log file to determine the cause. If the agent is not connected, attach the DriveCliet.log file to a ticket so that Support can review it.</p>

<p>Following are some of the issues and some possible fixes:</p>

<ul>
	<li><code>Missing Password for encrypted volume</code><br />
	<br />
	Possible cause: If you use the API to change an account from ServiceNet to PublicNet, the volume URI is changed. However, the <strong>bootstrap.json</strong> file doesn't reflect that change.<br />
	Workaround: Edit the <strong>bootstrap.json</strong> file and change the volume URI.

	<ul>
		<li>If the account was changed&nbsp;<em>from</em>&nbsp;ServiceNet to PublicNet, remove the snet- prefix from the volume URI.</li>
		<li>If the account was changed&nbsp;<em>to</em>&nbsp;ServiceNet from PublicNet, add an snet- prefix to the volume URI.<br />
		&nbsp;</li>
	</ul>
	</li>
	<li><code>Out of Disk Space</code><br />
	<br />
	If the local system has less than 100 MB of free disk space, the backup cannot properly decompress the local backup vault database to execute a backup or restore.<br />
	&nbsp;</li>
	<li><code>Container does not exist</code><br />
	<br />
	The container that is used to store backup data has been deleted. You can check this by getting the agent details via the Cloud Backup API. The <code>VolumeURI</code> field in the displayed JSON indicates the Cloud Files container that Cloud Backup is attempting to access. If that Cloud Files container does not exist, it must be recreated. It also means that any previous backups were deleted and cannot be used to restore.<br />
	&nbsp;</li>
	<li><code>CurlEasyPerformWrapper : Could not perform an HTTP request. Connection timed out while waiting for https://snet-storage101</code><br />
	<br />
	This message indicates that a networking error is causing DriveClient to be unable to connect to the Cloud Files API to upload backups.<br />
	&nbsp;</li>
	<li><code>locale::facet::_S_create_c_locale name not valid</code><br />
	<br />
	This message is caused by the locale not being properly set on the target system, which happens mostly in older operating systems.<br />
	<br />
	Receiving this message is also common when you use SSH to connect from a MacOS desktop to a Linux server, and run the <code>sudo service DriveClient status command</code>.&nbsp; The MacOS client does not properly provide the locale information in the SSH session.<br />
	<br />
	If you don't have a Linux computer available for use, you can access the web console for your server via the Cloud Control Panel. When you're in to the web console for your server, perform the following actions:<br />
	<br />
	1. Open the <strong>/etc/ssh/sshd_config</strong> file for editing.<br />
	2. Find the lines that start with <code>AcceptEnv</code>, and insert a <code>#</code> character in front of each line. The issue seems to be related to one of the localization&nbsp;variables that is being passed. Disabling acceptance of those variables is a workaround.<br />
	3. After you make the change and save the file, restart the SSH service (depending on the Linux distribution), run either<code> service ssh restart</code> or <code>service sshd restart</code>.<br />
	<br />
	Then,&nbsp;try to connect again.<br />
	&nbsp;</li>
</ul>

<h3><a id="Backup status &quot;Failed&quot;" name="Backup status &quot;Failed&quot;"></a>Backup status “Failed”</h3>

<p>The Failed status indicates that a serious problem occurred, and the backup job did not run. As with the Error status, check the logs on the server.<br />
&nbsp;</p>

<h2><a id="Connection errors - DriveClient fails to start, or DriveClient does not stay running" name="Connection errors - DriveClient fails to start, or DriveClient does not stay running"></a>Connection errors: DriveClient fails to start, or DriveClient does not stay running</h2>

<p>When DriveClient is started, it attempts to connect to the RSE API endpoint (<strong>rse.drivesrvr.com</strong> or <strong>rse.drivesrvr.co.uk</strong>), to let the API know that it is available to take commands.&nbsp; If it can't reach that endpoint, or the associated <strong>api.drivesrvr.com</strong> or <strong>api.drivesrvr.co.uk</strong>, it will automatically stop the service.</p>

<p>The following symptoms might occur:</p>

<ul>
	<li>On Windows, the following permissions error message might be displayed: <code>Please check your permissions and try again</code>. This is default error message that Windows displays when a service fails to start.</li>
	<li>On Linux, the agent will just shut itself down.</li>
</ul>

<p>When the agent shuts itself down, you see a line, similar to the following line, indicating that the logging is being stopped.&nbsp; This is the last thing that is logged before the agent shuts itself off.</p>

<p><code>INFO |root|rax::AgentPolicy::TearDown(38)] Tearing down logging...</code></p>

<p>You will also see this as a <code>Disconnected</code> agent through the <strong>Backups</strong> area of the Cloud Control Panel.</p>

<p>The agent might be unable to communicate with one or more the following required API endpoints:</p>

<ul>
	<li>Cloud Backup API: <strong>api.drivesrvr.com</strong> (for US accounts) or <strong>api.drivesrvr.co.uk</strong> (for UK accounts)<br />
	You can test this communication with an HTTP GET (or Open Standard Web Browser) to the URL&nbsp;<a href="https://api.drivesrvr.com/v1.0/help/apihealth">https://api.drivesrvr.com/v1.0/help/apihealth</a>.<br />
	&nbsp;</li>
	<li>Cloud Backup RSE API: <strong>rse.drivesrvr.com</strong> (for US accounts) or <strong>rse.drivesrvr.co.uk</strong> (for UK accounts)<br />
	You can test this communication with an HTTP GET (or Open Standard Web Browser) to the URL <a href="https://rse.drivesrvr.com/health">https://rse.drivesrvr.com/health</a>.<br />
	&nbsp;</li>
	<li>Cloud Files API endpoints: These are regional endpoints, but all have the same /healthcheck command that allows for network connection testing.<br />
	You can test this communication with an HTTP GET: <a href="https://&lt;endpoint&gt;/healthcheck">https://&lt;endpoint&gt;/healthcheck</a> using regional public and ServiceNet endpoints, which are shown below. For example, <a href="https://storage101.ord1.clouddrive.com/healthcheck">https://storage101.ord1.clouddrive.com/healthcheck</a>.<br />
	&nbsp;</li>
</ul>

<table align="center" border="1" cellpadding="1" cellspacing="1">
	<thead>
		<tr>
			<th scope="col">Region</th>
			<th scope="col">Public API</th>
			<th scope="col">ServiceNet API</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>ORD</td>
			<td>storage101.ord1.clouddrive.com</td>
			<td>snet-storage101.ord1.clouddrive.com</td>
		</tr>
		<tr>
			<td>DFW</td>
			<td>storage101.dfw1.clouddrive.com</td>
			<td>snet-storage101.dfw1.clouddrive.com</td>
		</tr>
		<tr>
			<td>IAD</td>
			<td>storage101.iad3.clouddrive.com</td>
			<td>snet-storage101.iad3.clouddrive.com</td>
		</tr>
		<tr>
			<td>LON</td>
			<td>storage101.lon3.clouddrive.com</td>
			<td>snet-storage101.lon3.clouddrive.com</td>
		</tr>
		<tr>
			<td>SYD</td>
			<td>storage101.syd2.clouddrive.com</td>
			<td>snet-storage101.syd2.clouddrive.com</td>
		</tr>
		<tr>
			<td>HKG</td>
			<td>storage101.hkg1.clouddrive.com</td>
			<td>snet-storage101.hkg1.clouddrive.com</td>
		</tr>
	</tbody>
</table>

<h2><br />
<a id="Backup agent logs - Where they are located, and how to read them" name="Backup agent logs - Where they are located, and how to read them"></a>Backup agent logs: Where they are located, and how to read them</h2>

<p>The agent logs are stored, by default, in the following directories:</p>

<ul>
	<li>(Windows) <strong>C:\ProgramData\DriveClient\logs\DriveClient.log</strong><br />
	The <strong>C:\ProgramData\DriveClient</strong> directory can be changed, based on the installer or through the AgentConfig.exe executable.<br />
	&nbsp;</li>
	<li>(Linux) <strong>/var/log/DriveClient.log</strong></li>
</ul>

<p>The only thing that can be manually edited in the <strong>log4cxx.xml</strong> file (Log configuration) is the size of the <strong>DriveClient.log</strong> file (<code>MaxFileSize</code>) and how many previous versions (<code>MaxBackupIndex</code>) will be saved before they are deleted. For more information about how to configure this file, see&nbsp;<a href="http://www.rackspace.com/knowledge_center/article/cloud-backup-agent-logging-basics">Cloud Backup agent logging basics</a>.<br />
<br />
The following common items are included in the <strong>DriveClient.log</strong> file:</p>

<ul>
	<li>
	<p><code>rax::LoggingPolicy::PerformSetup(134)</code><br />
	Indicates the start of the DriveClient service.</p>
	</li>
	<li><code>rax::AgentPolicy::TearDown(38)] Tearing down logging...</code><br />
	Indicates that the DriveClient service was properly shut down.<br />
	&nbsp;</li>
	<li>Format of log lines<br />
	<code>[DATE TIME | THREADID | LOGLEVEL | USER | CONTEXT] LOG INFORMATION</code><br />
	<code>DATE TIME</code>: Timestamp indicating when the log line was written<br />
	<code>THREADID</code>: Because DriveClient is a threaded service, this ID is an indicator to separate the thread from all of the other threads writing to the same log file.<br />
	<code>LOGLEVEL</code>: The depth of the logging. The default is INFO, but Support might increase this level to TRACE or DEBUG. The log levels are common log levels, such as INFO, WARN, and ERROR.<br />
	<code>USER</code>: The user that is running the service. On Linux,&nbsp; this value is root, and on Windows, it is Administrator.<br />
	<code>CONTEXT</code>: This is internal information about where the log was generated.<br />
	<code>LOG INFORMATION</code>: The context of the log.</li>
</ul>

<p>Common errors received in the log include 401 and 403 errors when accessing <strong>rse.drivesrvr.com</strong>, <strong>api.drivesrvr.com</strong>, <strong>rse.drivesrvr.co.uk</strong>, or <strong>api.drivesrvr.co.uk</strong>.<br />
<br />
When you first start the DriveClient service, there is a possibility that the RSA key pair for authentication does not properly synchonize immediately, causing a brief time of 401 and 403 errors in the <strong>DriveClient.log</strong> file. This is normal for the Cloud Backup internal APIs. The DriveClient service handles these errors and will retry the appropriate number of times before canceling the startup of that service.<br />
<br />
If the errors continue for more than 5 - 10 seconds, contact Rackspace Support.<br />
&nbsp;</p>

<h2><a id="Recovery of your encrypted vault password" name="Recovery of your encrypted vault password"></a>Recovery of your encrypted vault password</h2>

<p>You cannot recover&nbsp;your encrypted vault password. The vault password is stored only on the cloud server that is linked to that encrypted vault. If that password is forgotten, and the <strong>bootstrap.json</strong> file was overwritten or lost, there is no way to recover the password.<br />
&nbsp;</p>

<h2><a id="Unable to backup or restore files (Windows only)" name="Unable to backup or restore files (Windows only)"></a>Unable to backup or restore files (Windows only)</h2>

<p>Windows has the ability to <em>exclusively lock</em> a file, so that no other process can read or write to it. This locking is common in database binary files, but many other programs use this locking protocol. If this locking occurs, the only workarounds are to close the program that has the exclusive lock, or restore the file into a different location.<br />
<br />
If you are backing up a file that you know will be exclusively locked, you should think about using VSS snapshots (if your version of Windows supports it), and back up the contents of the VSS snapshot. Using VSS snapshots enables you to get a proper backup of the file.<br />
<br />
The latest version of Cloud Backup for Windows automatically takes a VSS snapshot of the drive and attempts to back up files from it.<br />
&nbsp;</p>

<h2><a id="System resource utilization" name="System resource utilization"></a>System resource utilization</h2>

<p>The amount of resources (memory, CPU, and load) used by the DriveClient is directly related to how many files are being backed up in each backup configuration. An increased number of files (or the size of files) can cause the agent to consume more resources. For suggestions for best practices, see <a href="http://www.rackspace.com/knowledge_center/article/best-practices-for-cloud-backup">Best practices for Cloud Backup</a>.<br />
<br />
&nbsp;</p>

<h2><a id="Other errors and problems" name="Other errors and problems"></a>Other errors and problems</h2>

<p>Following are other errors and problems that you might encounter:</p>

<h4><br />
<strong><a id="Backup failed with 403 error from Cloud Files when account has sub-users" name="Backup failed with 403 error from Cloud Files when account has sub-users"></a>Backup failed with a 403 error from Cloud Files when account has sub-users</strong></h4>

<p>A registered sub-user is authorized for Cloud Backup but not for Cloud Files access. When this user attempts a backup, all requests to Cloud Files return a 403 error. The user attempts to authenticate again, but the new authentication token is the same as the old one.</p>

<p>Account administrators can manage permission levels in the User Management section of the Cloud Control Panel. Submit a request to your account administrator for Full access to your account or Administrative access to Cloud Files for your sub-user account. Cloud Backup does not support Dedicated Users with Cloud access Federated users.</p>

<h4><br />
<strong><a id="Unable to browse a previous backup or browse a backup to select files to restore" name="Unable to browse a previous backup or browse a backup to select files to restore"></a>Unable to browse a previous backup or browse a backup to select files to restore</strong></h4>

<p>The list of files in a backup in the Cloud Control Panel is generated by the running DriveClient service. When you are browsing existing backup reports that have not been rotated because of retention policies, this information is generated on that cloud server.</p>

<p>When you attempt to restore, the file list is generated on the target cloud server – the server to which you have selected to restore the files.</p>

<h4><br />
<strong><a id="Cleanup stuck in &quot;preparing&quot; mode" name="Cleanup stuck in &quot;preparing&quot; mode"></a>Cleanup stuck in “preparing” mode</strong></h4>

<p>The cleanup process requires a large number of calculations before it can start cleaning up for the file rotation. As a result, the cleanup process could be shown as <em>preparing</em> for some time before the files start being rotated. There is no way to track the percentage complete at this time.</p>

<h4><br />
<strong><a id="Unexpected &quot;Skipped&quot; notifications for a backup" name="Unexpected &quot;Skipped&quot; notifications for a backup"></a>Unexpected "Skipped" notifications for a backup</strong></h4>

<p>You might get this notification if you have reregistered servers (the old server appears offline with a duplicate online server). By design, scheduled backups for offline servers send a notification of Skipped. To discontinue getting these notifications for offline servers, select <strong>Disable</strong> from the <strong>Actions</strong> menu for the <strong>Backup Configuration</strong>.</p>

<p><strong>WARNING</strong>: We do <em>not</em> recommend reregistering a DriveClient agent, especially if the server has existing backup configurations and data backed up. Reregistering disassociates the server from the prior backup configurations and backed up data.</p>

<p>If you have reregistered a DriveClient agent and are unintentionally disassociated from your backups, you can use the <a href="http://docs.rackspace.com/rcbu/api/v1.0/rcbu-devguide/content/PUT_migrateVault_v1.0__tenant_id__agent_migratevault_Agent.html">Migrate Vault API call</a> to migrate the previous backup vault from a previous agent to a new fresh agent (with no backup configurations or previous backups run against it).</p>

<h4><br />
<strong><a id="Files modified during backup are missing or corrupted" name="Files modified during backup are missing or corrupted"></a>Files modified during backup are missing or corrupted</strong></h4>

<p><strong>Note</strong>: This issue relates to the data that is backed up, and not to the actual file on the file system.</p>

<p>The following types of file changes can occur during a backup:</p>

<ul>
	<li>Files are overwritten or get deleted. These files are not guaranteed to have usable content or to even be included in the backup at all.</li>
	<li>Files, like logs, are appended to. We will make a best effort to back up these files, but we expect to be able to restore a reasonable and usable form of these files.</li>
	<li>Files, like databases, might have random updates to any part of them. We do not in any way guarantee that these files will be restorable, and even if they are restored, we do not guarantee that what is restored is not corrupt.</li>
</ul>

<p>These file types either change too rapidly (databases, logs, caches) or don't exist long enough to be backed up (session files). Session files should be avoided entirely. And if the information is valuable to your business, log files should track it. Caches should also be avoided, as their data is meant to be discarded.</p>

<p>If you need to back up these types of files, we recommend the following workarounds:</p>

<ul>
	<li>For databases, take a snapshot of the database (for example, a database dump) and back up the dump. See <a href="http://www.rackspace.com/knowledge_center/article/rackspace-cloud-backup-backing-up-databases">Rackspace Cloud Backup - Backing up Databases</a> for full instructions.</li>
	<li>For log files, take snapshots of your log files and back them up. To avoid running out of disk space, rotate your log files periodically.</li>
</ul>

<p>&nbsp;</p>
