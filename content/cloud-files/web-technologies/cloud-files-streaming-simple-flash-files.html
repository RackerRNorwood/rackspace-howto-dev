---
node_id: 77
title: Cloud Files - Streaming Simple Flash Files
permalink: article/cloud-files-streaming-simple-flash-files
type: article
created_date: '2011-03-08 13:30:04'
created_by: RackKCAdmin
last_modified: '2014-09-30 10:5124'
last_modified_by: kyle.laffoon
products: Cloud Files
categories: Web Technologies
tags: flash
body_format: tinymce
---

<p><em><strong>Note:</strong> We've had some reports of problems getting the current version of FlowPlayer (3.2.14) working with Cloud Files and are investigating. We'll update this article when we have more information.</em></p>
<table id="toc" class="toc" summary="Contents">
<tbody>
<tr>
<td>
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toclevel-1"><a href="#Overview"><span class="tocnumber">1</span> <span class="toctext">Overview</span></a></li>
<li class="toclevel-1"><a href="#What_we_need"><span class="tocnumber">2</span> <span class="toctext">What we need</span></a></li>
<li class="toclevel-1"><a href="#FlowPlayer"><span class="tocnumber">3</span> <span class="toctext">FlowPlayer</span></a></li>
<li class="toclevel-1"><a href="#The_Cross_Domain_XML_file"><span class="tocnumber">4</span> <span class="toctext">The Cross Domain XML file</span></a></li>
<li class="toclevel-1"><a href="#The_xhtml"><span class="tocnumber">5</span> <span class="toctext">The xhtml</span></a></li>
<li class="toclevel-1"><a href="#Lets_test_it_out"><span class="tocnumber">6</span> <span class="toctext">Lets test it out</span></a></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><a id="Overview" name="Overview"></a></p>
<h3><span class="mw-headline">Overview</span></h3>
<p>In this tutorial we will cover how to stream media files from Cloud Files to a Web Site. This tutorial assumes you have a Video file uploaded to Cloud Files and the container it is in is public. We will be using <a class="external text" title="http://flowplayer.org" href="http://flowplayer.org" rel="nofollow">FlowPlayer</a>; it is an open source Flash Video Player registered under the GPL.</p>
<h3>Streaming</h3>
<p>Cloud Files containers published and marked <strong>public</strong> are delivered over <a class="external text" title="http://www.akamai.com/" href="http://www.akamai.com/" rel="nofollow">Akamai Technologies, Inc</a>.'s global Content Delivery Network (CDN). For streaming flash files from your Cloud Files, Akamai provides pseudo streaming. You can find additionl information online, but a great explanation (in Flash) is provided at: <a href="http://www.longtailvideo.com/support/jw-player/28855/pseudo-streaming-in-flash/" target="_self">http://www.longtailvideo.com/support/jw-player/28855/pseudo-streaming-in-flash/</a>. <br /><em>"Pseudo-streaming works as follows: When the video is initially loaded, the player reads and stores a list of seek points as part of the video's metadata.&nbsp; These seek points are offsets in the video (both in seconds and in bytes) at which a new keyframe starts)."</em><br /><br />To accomplish this, Akamai's streaming supports the HTTP Range Header to identify those seek points. More information on the Range header is available:&nbsp; <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35" target="_self">http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35</a>. RTMP (Real Time Messaging Protocol) Streaming is not supported. <br /><br />There is a difference in the pseudo streaming and what Akamai offers with their iOS streaming. iOS Streaming is a form of adaptive streaming. <br /><br />"The encoder (or a separate segmented process) will produce H.264/AAC content in a sequent of small content segments, in MPEG-2 TS format (.ts).&nbsp; There is also a m3u8 index file that references these segments; in the case of live content the M3U8 is continuously updated to reflect the latest content. <br /><br />More information is available at:</p>
<ul>
<li><a href="http://developer.apple.com/library/ios/#technotes/tn2224/_index.html" target="_self">http://developer.apple.com/library/ios/#technotes/tn2224/_index.html</a></li>
<li><a href="http://www.akamai.com/dl/akamai/iphone_wp.pdf" target="_self">http://www.akamai.com/dl/akamai/iphone_wp.pdf</a></li>
</ul>
<p>&nbsp;</p>
<h4>Supported Formats/Codecs</h4>
<p>The following formats are supported by Akamai streaming.</p>
<table style="width: 446px;" border="1" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td valign="top" width="77">
<p><strong>Container</strong></p>
</td>
<td valign="top" width="87">
<p><strong>Video Codec</strong></p>
</td>
<td valign="top" width="94">
<p><strong>Audio Codec</strong></p>
</td>
<td valign="top" width="188">
<p><strong>Comments</strong></p>
</td>
</tr>
<tr>
<td valign="top" width="77">
<p>FLV</p>
</td>
<td valign="top" width="87">
<p>H.263</p>
<p>H.264</p>
<p>VP6</p>
</td>
<td valign="top" width="94">
<p>MP4</p>
<p>AAC</p>
<p>PCM</p>
<p>Nellymoser</p>
</td>
<td valign="top" width="188">
<p>Video only works as well.</p>
<p>For Nellymoser, only the</p>
<p>8khz and 16khz mono</p>
<p>sound formats are supported.</p>
</td>
</tr>
<tr>
<td valign="top" width="77">
<p>F4V</p>
</td>
<td valign="top" width="87">
<p>H.264</p>
</td>
<td valign="top" width="94">
<p>AAC</p>
</td>
<td valign="top" width="188">&nbsp;N/A</td>
</tr>
<tr>
<td valign="top" width="77">
<p>MP4</p>
</td>
<td valign="top" width="87">
<p>H.264</p>
</td>
<td valign="top" width="94">
<p>AAC</p>
<p>MP3</p>
</td>
<td valign="top" width="188">Can be audio-only (AAC) or video-only.</td>
</tr>
<tr>
<td valign="top" width="77">
<p>F4F/F4M</p>
</td>
<td valign="top" width="87">
<p>H.264</p>
<p>VP6</p>
</td>
<td valign="top" width="94">
<p>AAC</p>
<p>MP3</p>
</td>
<td valign="top" width="188">&nbsp;N/A</td>
</tr>
</tbody>
</table>
<p><a id="What_we_need" name="What_we_need"></a></p>
<h3><span class="mw-headline">What we need</span></h3>
<ul>
<li>FlowPlayer found at <a href="http://mediapm.edgesuite.net/flow/">http://mediapm.edgesuite.net/flow/</a>.</li>
<li>A .flv video.</li>
<li>A text editor.</li>
</ul>
<p><a id="FlowPlayer" name="FlowPlayer"></a></p>
<h3><span class="mw-headline">FlowPlayer</span></h3>
<ul>
<li>Head to the <a title="http://flowplayer.org" href="http://mediapm.edgesuite.net/flow/" rel="nofollow">Akamai FlowPlayer</a> website.</li>
<li>Download the Free Version of FlowPlayer</li>
<li>Save the File to your Desktop</li>
<li>Unpack the Zip File to your Desktop</li>
</ul>
<p>The Files we need are as follows. (this was written using FlowPlayer 3.5)</p>
<ul>
<li>flowplayer-(version).swf</li>
<li>flowplayer-(version).min.js</li>
<li>flowplayer.controls-(version).swf</li>
</ul>
<p>Go Ahead and upload these to Cloud Files using the control panel.</p>
<p><a id="The_Cross_Domain_XML_file" name="The_Cross_Domain_XML_file"></a></p>
<h3><span class="mw-headline">The Cross Domain XML file</span></h3>
<p>The Cross domain XML file allows you to specify what domains are allowed to Grab Data from the CDN. This is so people cannot hotlink your content unless you let them. Here is an example of a simple cross domain XML file that allows ALL domains to call these flash files</p>
<pre>&lt;?xml version="1.0"?&gt;
 &lt;!DOCTYPE cross-domain-policy SYSTEM "<a class="external free" title="http://www.adobe.com/xml/dtds/cross-domain-policy.dtd" href="http://www.adobe.com/xml/dtds/cross-domain-policy.dtd" rel="nofollow">http://www.adobe.com/xml/dtds/cross-domain-policy.dtd</a>"&gt; 
  &lt;cross-domain-policy&gt;
   &lt;site-control permitted-cross-domain-policies="master-only"/&gt;
   &lt;allow-access-from domain="*"/&gt;
   &lt;allow-http-request-headers-from domain="*" headers="SOAPAction"/&gt;
  &lt;/cross-domain-policy&gt;
</pre>
<p>For more info on Cross domain XML files take a look at <a class="external text" title="http://www.adobe.com/devnet/articles/crossdomain_policy_file_spec.html" href="http://www.adobe.com/devnet/articles/crossdomain_policy_file_spec.html" rel="nofollow">Adobe's Website</a></p>
<p>Go ahead and save this file in your text editor as crossdomain.xml and upload it to the same Cloud Files Container.</p>
<p><a id="The_xhtml" name="The_xhtml"></a></p>
<h3><span class="mw-headline">The xhtml </span></h3>
<p>Now we will make a simple xhtml file that will call this flash player and embeds it onto the page here is the code.</p>
<pre>&lt;html&gt;
 &lt;head&gt;
  &lt;script type="text/javascript" src="http://c022320192.cdn.cloudfiles.rackspacecloud.com/flowplayer-3.5.min.js"&gt;&lt;/script&gt;
 &lt;/head&gt;
 &lt;body&gt;
  &lt;a
    href="http://c022320192.cdn.cloudfiles.rackspacecloud.com/video.flv"
    style="display:block;width:520px;height:330px"
    id="player"&gt;
  &lt;/a&gt;
  &lt;script&gt;
   flowplayer("player","http://c022320192.cdn.cloudfiles.rackspacecloud.com/flowplayer-3.5.swf");
  &lt;/script&gt;
 &lt;/body&gt;
&lt;/html&gt;
</pre>
<ul>
<li>On line 3 please replace http://c022320192.cdn.cloudfiles.rackspacecloud.com/flowplayer-3.5.min.js with your version of this file.</li>
<li>On line 7 please replace http://c022320192.cdn.cloudfiles.rackspacecloud.com/video.flv to the location of your video file.</li>
<li>Finally on line 12 replace http://c022320192.cdn.cloudfiles.rackspacecloud.com/flowplayer-3.5.swf with your version of this file.</li>
<li>Go grab a party hat its time to celebrate we are almost done =)</li>
</ul>
<p><a id="Lets_test_it_out" name="Lets_test_it_out"></a></p>
<h3><span class="mw-headline">Let's test it out</span></h3>
<p>Go ahead and save this xhtml file and run it from your local machine. If all is well you should see the flash video load up quickly and stream away. If not double check your code. If you are still having problems after that give our support a call or submit a ticket via the Cloud Control Panel. &nbsp;We would love to help!</p>
