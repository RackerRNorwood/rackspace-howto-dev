---
node_id: 642
title: How do I rewrite URLs from ASP/.NET on Cloud Sites?
permalink: article/how-do-i-rewrite-urls-from-aspnet-on-cloud-sites
type: article
created_date: '2011-03-16 21:57:40'
created_by: RackKCAdmin
last_modified_date: '2015-06-24 18:3149'
last_modified_by: kelly.holcomb
products: Cloud Sites
categories: IIS and ASP.NET
body_format: tinymce
---

<table id="toc" class="toc" summary="Contents">
	<tbody>
		<tr>
			<td>
				<div id="toctitle">
					<h2>
						Contents
					</h2>
				</div>
				<ul>
					<li class="toclevel-1">
						<a href="#The_IIS_7_URL_Rewrite_Module"><span class="tocnumber">1</span> <span class="toctext">The IIS 7 URL Rewrite Module</span></a>
						<ul>
							<li class="toclevel-2">
								<a href="#Example_231"><span class="tocnumber">1.1</span> <span class="toctext">Example #1</span></a>
							</li>
							<li class="toclevel-2">
								<a href="#Example_232"><span class="tocnumber">1.2</span> <span class="toctext">Example #2</span></a>
							</li>
							<li class="toclevel-2">
								<a href="#Example_233"><span class="tocnumber">1.3</span> <span class="toctext">Example #3</span></a>
							</li>
							<li class="toclevel-2">
								<a href="#Example_234"><span class="tocnumber">1.4</span> <span class="toctext">Example #4</span></a>
							</li>
							<li class="toclevel-2">
								<a href="#References"><span class="tocnumber">1.5</span> <span class="toctext">References</span></a>
							</li>
						</ul>
					</li>
					<li class="toclevel-1">
						<a href="#Third-party_Solutions"><span class="tocnumber">2</span> <span class="toctext">Third-party Solutions</span></a>
						<ul>
							<li class="toclevel-2">
								<a href="#Getting_Started"><span class="tocnumber">2.1</span> <span class="toctext">Getting Started</span></a>
							</li>
							<li class="toclevel-2">
								<a href="#Using_UrlRewriterNET"><span class="tocnumber">2.2</span> <span class="toctext">Using UrlRewriter.NET</span></a>
							</li>
							<li class="toclevel-2">
								<a href="#Example_231_2"><span class="tocnumber">2.3</span> <span class="toctext">Example #1</span></a>
							</li>
							<li class="toclevel-2">
								<a href="#Example_232_2"><span class="tocnumber">2.4</span> <span class="toctext">Example #2</span></a>
							</li>
							<li class="toclevel-2">
								<a href="#References_2"><span class="tocnumber">2.5</span> <span class="toctext">References</span></a>
							</li>
						</ul>
					</li>
				</ul>
			</td>
		</tr>
	</tbody>
</table>
	<a name="The_IIS_7_URL_Rewrite_Module" id="The_IIS_7_URL_Rewrite_Module"></a>
<h2>
	<span class="mw-headline">The IIS 7 URL Rewrite Module</span>
</h2>
<p>
	All new .NET sites created on The Rackspace Cloud will have the URL Rewrite Module available, which allows <em>rewrite rules</em> to be defined in the <a href="http://en.wikipedia.org/wiki/Web.config" title="http://en.wikipedia.org/wiki/Web.config" class="external text">Web.config</a>.
</p>
	<a name="Example_231" id="Example_231"></a>
<h3>
	<span class="mw-headline">Example #1</span>
</h3>
<p>
	You can utilize the URL Rewrite Module to rewrite ASP, ASPX, or even HTML pages. In this example, we match <strong>example.asp</strong>, <strong>example.aspx</strong>, and <strong>example.html</strong> and display the contents of <strong>rewrite.aspx</strong>:
</p>
<pre> 
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;configuration&gt;
  &lt;system.webServer&gt;
    &lt;rewrite&gt;
     &lt;rules&gt;
      &lt;rule name="Rewrite ASP"&gt;
       &lt;match url="example.asp" /&gt;
       &lt;action type="Rewrite" url="rewrite.aspx" /&gt;
      &lt;/rule&gt;
      &lt;rule name="Rewrite ASPX"&gt;
       &lt;match url="example.aspx" /&gt;
       &lt;action type="Rewrite" url="rewrite.aspx" /&gt;
      &lt;/rule&gt;
      &lt;rule name="Rewrite HTML"&gt;
       &lt;match url="example.html" /&gt;
       &lt;action type="Rewrite" url="rewrite.aspx" /&gt;
      &lt;/rule&gt;
     &lt;/rules&gt;
    &lt;/rewrite&gt;
  &lt;/system.webServer&gt;
&lt;/configuration&gt;
</pre>
	<a name="Example_232" id="Example_232"></a>
<h3>
	<span class="mw-headline">Example #2</span>
</h3>
<p>
	The URL Rewrite Module also supports <a href="http://www.regular-expressions.info/" title="http://www.regular-expressions.info/" class="external text">regular expressions</a>. You can match characters in the incoming URL and then use <strong>{R:<em>#</em>}</strong> ({R:1}, {R:2}, etc.) to reference them in the resulting URL. In this example, we want to match <strong>article/<em>id</em>/<em>title</em></strong> and have it processed by <strong>article.aspx</strong> as a standard <em>GET</em> request:
</p>
<pre> 
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;configuration&gt;
  &lt;system.webServer&gt;
    &lt;rewrite&gt;
     &lt;rules&gt;
      &lt;rule name="Rewrite Articles"&gt;
       &lt;match url="^article/([0-9]+)/([_0-9a-z-]+)" /&gt;
       &lt;action type="Rewrite" url="article.aspx?id={R:1}&amp;title={R:2}" /&gt;
      &lt;/rule&gt;
     &lt;/rules&gt;
    &lt;/rewrite&gt;
  &lt;/system.webServer&gt;
&lt;/configuration&gt;
</pre>
	<a name="Example_233" id="Example_233"></a>
<h3>
	<span class="mw-headline">Example #3</span>
</h3>
<p>
	The URL Rewrite Module also provides a method to create a <em>catch-all</em> rewrite rule. This is similar to how applications like Wordpress use Apache's mod_rewrite to create <em>pretty permalinks</em> or <em>friendly URLs</em> by having a single page load content based on the incoming URL. In this example we use the URL Rewrite Module and a simple regular expression to catch anything that isn't a file or directory and send it to <strong>default.aspx</strong>:
</p>
<pre> 
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;configuration&gt;
  &lt;system.webServer&gt;
    &lt;rewrite&gt;
     &lt;rules&gt;
      &lt;rule name="Rewrite All" stopProcessing="true"&gt;
            &lt;match url="^(.*)$" /&gt;
            &lt;conditions logicalGrouping="MatchAll"&gt;
                &lt;add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" /&gt;
                &lt;add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" /&gt;
            &lt;/conditions&gt;
            &lt;action type="Rewrite" url="article.aspx" /&gt;
      &lt;/rule&gt;
     &lt;/rules&gt;
    &lt;/rewrite&gt;
  &lt;/system.webServer&gt;
&lt;/configuration&gt;
</pre>
	<a name="Example_234" id="Example_234"></a>
<h3>
	<span class="mw-headline">Example #4</span>
</h3>
<p>
	The following example shows an iis rewrite reading the host header to do a 301 redirect. The example below takes a non www domain and redirects to a www.mydomain.com domain.
</p>
<pre> 
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;configuration&gt;
  &lt;system.webServer&gt;
    &lt;rewrite&gt;
      &lt;rules&gt;
        &lt;rule name="301 Redirect" stopProcessing="true"&gt;
          &lt;match url=".*" /&gt;
          &lt;conditions&gt;
                        &lt;add input="{HTTP_HOST}" pattern="^mydomain.com$" /&gt;
          &lt;/conditions&gt;
          &lt;action type="Redirect" url="http://www.mydomain.com/{R:0}" redirectType="Permanent" /&gt;
        &lt;/rule&gt;
      &lt;/rules&gt;
    &lt;/rewrite&gt;
  &lt;/system.webServer&gt;
&lt;/configuration&gt;
</pre>
	<a name="References" id="References"></a>
<h3>
	<span class="mw-headline">References</span>
</h3>
<p>
	The following links are from <a href="http://www.iis.net/" title="http://www.iis.net/" class="external text">iis.net</a>, The Official Microsoft IIS Site:
</p>
<ul>
	<li>
		<a href="http://learn.iis.net/page.aspx/460/using-url-rewrite-module/" title="http://learn.iis.net/page.aspx/460/using-url-rewrite-module/" class="external text">Using URL Rewrite Module</a>
	</li>
	<li>
		<a href="http://learn.iis.net/page.aspx/461/creating-rewrite-rules-for-the-url-rewrite-module/" title="http://learn.iis.net/page.aspx/461/creating-rewrite-rules-for-the-url-rewrite-module/" class="external text">Creating rewrite rules for the URL Rewrite Module</a>
	</li>
	<li>
		<a href="http://learn.iis.net/page.aspx/465/url-rewrite-module-configuration-reference/" title="http://learn.iis.net/page.aspx/465/url-rewrite-module-configuration-reference/" class="external text">URL Rewrite Module Configuration Reference</a>
	</li>
</ul>
	<a name="Third-party_Solutions" id="Third-party_Solutions"></a>
<h2>
	<span class="mw-headline">Third-party Solutions</span>
</h2>
<p>
	Prior to the URL Rewrite Module, web developers had to create this functionality via application code or by generating their own assemblies to implement this feature. Fortunately for application developers, many parties realized this was such a necessary feature; so rather than have every developer reinvent the wheel, these parties created modules that could be deployed to add this functionality with very little effort on the part of the web developer. Some of these third-party modules are:
</p>
<ul>
	<li>
		<a href="http://www.urlrewriter.net/" title="http://www.urlrewriter.net/" class="external text">UrlRewriter.NET</a>
	</li>
	<li>
		<a href="http://www.urlrewriting.net/" title="http://www.urlrewriting.net/" class="external text">UrlRewritingNet</a>
	</li>
	<li>
		<a href="http://www.isapirewrite.com/" title="http://www.isapirewrite.com/" class="external text">Helicon Tech's ISAPI_Rewrite</a>
	</li>
</ul>
<p>
	For older sites on the Cloud Sites platform, we recommend deploying an HttpModule to handle URL rewrites; in this article we will explore <a href="http://www.urlrewriter.net/" title="http://www.urlrewriter.net/" class="external text">UrlRewriter.NET</a>.
</p>
	<a name="Getting_Started" id="Getting_Started"></a>
<h3>
	<span class="mw-headline">Getting Started</span>
</h3>
<p>
	To get started, <a href="/knowledge_center/index.php/How_do_I_bin_deploy_an_ASP/NET_assembly" title="How do I bin deploy an ASP/.NET assembly?">please follow this article on bin deploying UrlRewriter.NET</a>.
</p>
	<a name="Using_UrlRewriterNET" id="Using_UrlRewriterNET"></a>
<h3>
	<span class="mw-headline">Using UrlRewriter.NET</span>
</h3>
<p>
	UrlRewriter.NET provides a <a href="http://urlrewriter.net/index.php/support/reference" title="http://urlrewriter.net/index.php/support/reference" class="external text">full reference guide</a> as well as examples of <a href="http://urlrewriter.net/index.php/support/using" title="http://urlrewriter.net/index.php/support/using" class="external text">common rules</a>. When <a href="/knowledge_center/index.php/How_do_I_bin_deploy_an_ASP/NET_assembly" title="How do I bin deploy an ASP/.NET assembly?">bin deploying UrlRewriter.NET</a>, you should have added a <a href="http://msdn.microsoft.com/en-us/library/ms228256.aspx" title="http://msdn.microsoft.com/en-us/library/ms228256.aspx" class="external text">configSections element</a> that causes the <strong>rewriter</strong> configuration section to be processed by UrlRewriter.NET. The following are examples of rewrite rules using this configuration element.
</p>
	<a name="Example_231_2" id="Example_231_2"></a>
<h3>
	<span class="mw-headline">Example #1</span>
</h3>
<p>
	In this example, we match <strong>info</strong> and display the contents of <strong>info.aspx</strong>:
</p>
<pre> 
&lt;rewriter&gt;
  &lt;rewrite url="~/info" to="~/info.aspx" /&gt;
&lt;/rewriter&gt;
</pre>
	<a name="Example_232_2" id="Example_232_2"></a>
<h3>
	<span class="mw-headline">Example #2</span>
</h3>
<p>
	UrlRewriter.NET also supports <a href="http://www.regular-expressions.info/" title="http://www.regular-expressions.info/" class="external text">regular expressions</a>. You can match characters in the incoming URL and then use <strong>$<em>#</em></strong> ($1, $2, etc.) to reference them in the resulting URL. In this example, we want to match <strong>products/<em>id</em></strong> and have it processed by <strong>products.aspx</strong> as a standard <em>GET</em> request:
</p>
<pre> 
&lt;rewriter&gt;
  &lt;rewrite url="~/products/(.+)" to="~/products.aspx?category=$1" /&gt;
&lt;/rewriter&gt;
</pre>
	<a name="References_2" id="References_2"></a>
<h3>
	<span class="mw-headline">References</span>
</h3>
<ul>
	<li>
		<a href="http://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx" title="http://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx" class="external text">Tip/Trick: Url Rewriting with ASP.NET</a> from <a href="http://weblogs.asp.net/scottgu/default.aspx" title="http://weblogs.asp.net/scottgu/default.aspx" class="external text">Scott Guthrie's blog</a> -- particularly <em>approach 3</em>.
	</li>
	<li>
		<a href="http://urlrewriter.net" title="http://urlrewriter.net" class="external text">UrlRewrite.NET's homepage</a>
	</li>
</ul>
