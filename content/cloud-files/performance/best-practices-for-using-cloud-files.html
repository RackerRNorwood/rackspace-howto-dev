---
node_id: 1269
title: Best Practices for Using Cloud Files
permalink: article/best-practices-for-using-cloud-files
type: article
created_date: '2012-01-05 21:04:56'
created_by: RackKCAdmin
last_modified_date: '2014-05-16 18:1520'
last_modified_by: kyle.laffoon
products: Cloud Files
categories: Performance
body_format: tinymce
---

<h3 class="MsoNormal">What is Cloud Files used for?</h3><p class="MsoNormal">There are many ways to utilize Cloud Files,&nbsp;but it is strongest&nbsp;when functioning as <strong>unlimited object storage</strong> on the Cloud, or&nbsp;when used as a&nbsp;<strong style="border-style: initial; border-color: initial;">website accelerator</strong>&nbsp;with the Content Delivery Network (CDN). &nbsp;Here we've compiled a few recommendations on ways to get the most out of Cloud Files. &nbsp;</p><p class="MsoNormal">We'll follow a couple of use-case scenarios here: &nbsp;Cloud Files as an object storage solution, and using Cloud Files for web site acceleration through the CDN.</p><h3>Object Storage&nbsp;</h3><p class="MsoNormal">Please remember that, at its core, Cloud Files is an object storage solution and is not designed for high IOPS (Input/output Operations Per Second). &nbsp;Instead, Cloud Files is designed for consistent reliability of data.&nbsp; The primary function of Cloud Files is to ensure&nbsp;that your data is available when you ask for it.&nbsp; This works best with relatively static files, as opposed to files that are frequently updated. &nbsp;As a result, it is impractical to run a database out of Cloud Files.&nbsp; You can’t expect to write to the same object 20 times per second, Cloud Files is not designed for that. &nbsp;It was designed so that when you write to an object in Cloud Files, that object will be there each and every time you call for it.&nbsp;</p><h3 class="MsoNormal">Organize Content for Web Acceleration</h3><p class="MsoNormal">When using Cloud Files for web acceleration, a basic organizational structure would separate your content into different containers based on object type (for example): images, css, javascript, videos, uploaded content, etc.&nbsp; This structure enables quick location of objects when you need them. &nbsp;</p><h3 class="MsoNormal" style="border-style: initial; border-color: initial;">Container Management</h3><h4 class="MsoNormal" style="border-style: initial; border-color: initial;">Using Multiple Containers</h4><p class="MsoNormal" style="border-style: initial; border-color: initial;">If you have an extremely large number of objects, we recommend storing them in multiple containers (you can have up to 500,000 containers per account in Cloud Files). When writing large numbers of objects to a single container, the limit of 100 object write requests per second per container may reduce overall performance.</p><h4 class="MsoNormal" style="border-style: initial; border-color: initial;">How to Label Your Containers</h4><p class="MsoNormal" style="border-style: initial; border-color: initial;">When organizing your containers for an object storage solution, we recommend labeling the container based on type of storage, perhaps based on the segment of the application accessing it, and attaching an incremental number to plan ahead in case the number of objects gets too high, looking something like this (for example): personnel-00000. &nbsp;A basic set up for web acceleration would be to organize your content in separate containers (for example): images, css, javascript, videos, uploaded content, etc.&nbsp; This structure enables quick location of objects when you need them. &nbsp;</p><h4 class="MsoNormal" style="border-style: initial; border-color: initial;">Keep a Local Database of Your Container Structure</h4><p class="MsoNormal" style="border-style: initial; border-color: initial;">For users with a larger number of files, another recommendation is to keep a local copy of the container structure and listing so that you are not waiting on the container to list all the objects, 10,000 at a time.&nbsp; You can do this in a local database, significantly reducing the chance of a naming conflict and location of a specific object.&nbsp; That way if there is an update to an object, it is known in which container the object is located. &nbsp;This allows for a simple update to the object, without the need to list all the containers.&nbsp; This provides a significantly reduced time for updates. &nbsp;This tip is best employed by customers using Cloud Files for an object storage solution, since these are frequently accessed programmatically, and will also grow organically over time. &nbsp;This also applies to any site that allows for additional content, such as an uploads section, which may quickly grow beyond the webmaster's expectations.</p><p class="MsoNormal" style="border-style: initial; border-color: initial;">We recommend considering future growth with regards object count and usage. Any systems with both many millions of objects and very high object churn (such as&nbsp; creation and deletion) should have a fragmentation or sharding system to minimize any performance impacts. Keeping track of the object count can be done locally, and verified against the object count in the container by performing a HEAD on the container, and checking the Object Count.</p><h3 class="MsoNormal">Pathing</h3><p class="MsoNormal">Remember, containers in Cloud Files do not nest,&nbsp;and all objects in a single conatiner are subject to the same limitations.&nbsp; There are applications which will fake a folder structure by adding the path to the beginning of the object name, which works for pathing in the CDN URLs as well. &nbsp;This allows for virtual pathing if needed.&nbsp; For object storage, this allows for better subdivision of slow growth closely-grouped data, meaning that you’re unlikely to need to divide it out again later.&nbsp; For website acceleration, this allows pathing that displays in the browser, for example:</p><pre>http://c123456.r02.cf3.rackcdn.com/ducks/funny/duckling.jpg</pre><p>where the name of the object is ducks/funny/duckling.jpg.</p><h3 class="MsoNormal">Removing Containers and Container Data</h3><p class="MsoNormal">All objects in a container must be deleted before the container itself can be deleted.&nbsp; Multiple containers allow for better threading of the deletion scripts.&nbsp; Content grows regardless of the use case, so it’s best to plan ahead for this.</p><h3 class="MsoNormal">TTL</h3><p class="MsoNormal">In addition to the performance benefit of reduced time in listings, you also get the improvement of being able to set the TTL (Time To Live value) for containers containing objects on the CDN. TTL can only be set on the Cloud Files container, and all objects inherit the container-level setting. A particular object in a container cannot have a TTL that is different than the other objects in the same container. This means that you could set longer TTL values on content that is unlikely to change often.&nbsp; For website acceleration, you could use a longer TTL (at the container-level) for files that are updated infrequently, such as your CSS, javascript, and videos.&nbsp; At the same time, you can set a shorter TTL for rapidly changing objects, such as user uploads.&nbsp; Using an appropriate TTL for the object type in your container will improve performance since, the longer the TTL, the more consistent the performance as it renews the CDN cache from your cloud files store less frequently.&nbsp; </p>
