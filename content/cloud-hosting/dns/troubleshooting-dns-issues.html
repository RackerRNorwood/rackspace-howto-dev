---
node_id: 1447
title: Troubleshooting DNS issues
permalink: article/troubleshooting-dns-issues
type: article
created_date: '2012-06-27 11:57:28'
created_by: RackKCAdmin
last_modified_date: '2015-05-01 15:0820'
last_modified_by: kyle.laffoon
products: Cloud Hosting
categories: DNS
body_format: tinymce
---

<p>To troubleshoot Domain Name System (DNS) issues, it is useful to have at least some understanding of how the system works. A DNS is a distributed system of servers that host the resource records that are used to find where a website is hosted or where to deliver an e-mail. To update these records, you need to know who is hosting them and how to access them. To determine why you are being directed to the wrong server, you need to know how to do a lookup.<br />
<br />
Your registrar controls where a lookup is directed when someone tries to check a record related to your domain. If you want to change where your records are hosted, you must update the location with your registrar. To check where your records are currently hosted, you can check your domain against the <strong>whois</strong> database system. With whois, you can find out information about the ownership of a domain.</p>

<h4>Checking domain registration details</h4>

<p>To check a domain with whois, you can use the whois command on both Linux and Windows. The output is essentially identical on both systems.</p>

<ul>
	<li><strong>On Linux, </strong>the whois command should be installed by default.</li>
	<li><strong>On Windows</strong>, if the application is not already installed, you can <a href="http://technet.microsoft.com/en-us/sysinternals/bb897435.aspx">download it</a>&nbsp;from Microsoft. The application does not have an installer, so after you extract it, open the command prompt and navigate to the folder where it is located before running it.</li>
</ul>

<p><br />
The formatting of the output from whois databases is not standardized because the information is distributed across a number of sources. However, the responses should contain similar information, such as registrar, name servers, and date registered. The following example shows the whois information for rackspace.co.uk:</p>

<pre>
$ whois rackspace.co.uk

&nbsp;&nbsp;&nbsp; Domain name:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rackspace.co.uk

&nbsp;&nbsp;&nbsp; Registrant:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Rackspace US, Inc.

&nbsp;&nbsp;&nbsp; Registrant type:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Non-UK Corporation

&nbsp;&nbsp;&nbsp; Registrant's address:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 9725 Datapoint Drive, Suite 100
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; San Antonio
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TX
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 78229
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; United States

&nbsp;&nbsp;&nbsp; Registered through:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NetNames Limited
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; URL: http://www.netnames.co.uk

&nbsp;&nbsp;&nbsp; Registrar:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Ascio Technologies Inc t/a Ascio Technologies inc [Tag = ASCIO]
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; URL: http://www.ascio.com

&nbsp;&nbsp;&nbsp; Relevant dates:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Registered on: 26-Apr-1999
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Expiry date:&nbsp; 26-Apr-2013
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Last updated:&nbsp; 28-Jul-2011

&nbsp;&nbsp;&nbsp; Registration status:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Registered until expiry date.

&nbsp;&nbsp;&nbsp; Name servers:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ns.rackspace.com
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ns2.rackspace.com

&nbsp;&nbsp;&nbsp; WHOIS lookup made at 09:05:23 25-Jun-2012

-- 
This WHOIS information is provided for free by Nominet UK the central registry
for .uk domain names. This information and the .uk WHOIS are:

&nbsp;&nbsp;&nbsp; Copyright Nominet UK 1996 - 2012.

You may not access the .uk WHOIS or use any data from it except as permitted
by the terms of use available in full at http://www.nominet.org.uk/whois, which
includes restrictions on: (A) use of the data for advertising, or its
repackaging, recompilation, redistribution or reuse (B) obscuring, removing
or hiding any or all of this notice and (C) exceeding query rate or volume
limits. The data is provided on an 'as-is' basis and may lag behind the
register. Access may be withdrawn or restricted at any time. </pre>

<p><br />
<br />
Important sections of the output for troubleshooting are as follows:</p>

<ul>
	<li><strong>Registrant:</strong> The owner of the domain (if this is your domain, this this should be you)</li>
	<li><strong>Registrar: </strong>The comapny through whish the domain is registered. If there is a intermediary between you and the registrar, the imtermediary should also be listed. In the example, the intermediary is represented by the <strong>Registered through</strong> field.</li>
	<li><strong>Registration status/expiry:</strong> You can control the records for a domain only if you have registered it and the registration is valid (the expiry date is in the future). If the registration has expired, you might have lost control of the domain and should contact the company through which you registered the domain to get it renewed.</li>
	<li><strong>Name servers</strong>: The servers that store the records that are publicly accessible for your domain. By default, the company through which you registered the domain provides this hosting. However, you can update this location with them to point to another location. For example, you can use Rackspace Cloud DNS to host your records. If lookups aren't going where you expect, this may be the cause.<br />
	<br />
	After you have checked your domain with whois, you should be able to confirm that the domain is registered to you, that it has not expired, and that the name server records point where you expect. If this information is not correct, you must contact the company from which you purchased the domain to update the details; generally a web-based control panel is provided for self-service. If you want to host your DNS records with Rackspace, see <a href="https://admin.rackspace.com/knowledge_center/article/rackspace-cloud-essentials-what-are-your-name-servers">Rackspace Cloud Essentials - What Are Your Name Servers?</a> for details.</li>
</ul>

<p>To see all the records that are currently being hosted for your domain, you must look at the interface provided by your DNS hosting provider. Most name servers won't allow someone who doesn't own the domain to request a list of all the records for it. If the domain is hosted on Rackspace Cloud, you can find instructions in <a href="https://admin.rackspace.com/knowledge_center/article/creating-dns-records-for-cloud-servers-with-the-control-panel">Create DNS Records for cloud servers with the Control Panel</a>.</p>

<h4>DNS lookups</h4>

<p>To confirm that a domain name resolves to the correct IP address, Linux and Windows provide commandline tools. For Linux, dig is commonly used and for Windows, nslookup is the built-in command.</p>

<p>The following articles show you how to check for a record, see if it's cached, confirm whether it matched the authoritative name server's copy, and understand the output of the tools:</p>

<ul>
	<li><a href="https://admin.rackspace.com/knowledge_center/article/rackspace-cloud-essentials-using-dig-for-dns-verification-and-troubleshooting">dig guide</a></li>
	<li><a href="https://admin.rackspace.com/knowledge_center/article/nslookup-checking-dns-records-on-windows">nslookup guide</a></li>
</ul>

<p>To get an indication of how a record is cached around the world, you can use the third-party website <a href="http://www.whatsmydns.net/">http://www.whatsmydns.net/</a> . You specify the record name and type, and then the site checks a number of DNS servers around the world for the records that they hold. If responses from the different servers do not match, the current records have not completely propagated across the globe. This propagation is controlled by the TTL of the old record, which specifies the maximum amount of time the records are cached before checking for a new version.</p>

<h4>Hosts file</h4>

<p>If the DNS issue is specific to a single computer, one other thing to bear in mind is the <strong>hosts </strong>file stored on that machine. This file contains a list of hostnames and IP addresses that your computer checks, generally before doing a DNS lookup. nslookup and dig do not check this list of hostnames. So, if the IP address your application (for examplet, ping) is using does not match what is listed in the look up response, this mismatch may be the cause.<br />
<br />
The locations of the files are as follows:</p>

<ul>
	<li>On Linux, host file is <strong>/etc/hosts</strong>.</li>
	<li>On Windows, host file is <strong>C:\Windows\System32\drivers\etc\hosts</strong>.</li>
</ul>

<p>Each line in these files represents one record. Note that a&nbsp;<strong>#</strong>&nbsp;at the beginning of a line means that the line is a comment and will be ignored. If you see the domain and an incorrect IP address in the list and the line isn't commented out, that will typically explain that the issues you are having. Comment out the line and see if that fixes the issue.</p>

<h4>Summary</h4>

<p>After reading this article, and those linked within the text, you should be able to confirm that a domain is correctly registered and discover the location of the authoritative name servers. You should also be able to check records and isolate any cached records that might be causing issues accessing services on the Internet, such as a website.</p>
