---
node_id: 4081
title: Cloud Backup agent logging basics
permalink: article/rackspace-cloud-backup-agent-logging-basics
type: article
created_date: '2014-05-29 22:49:17'
created_by: ross.diaz
last_modified_date: '2015-11-09 19:2554'
last_modified_by: catherine.richardson
products: Cloud Backup
categories: Monitoring and Troubleshooting
body_format: tinymce
---

<p>The Rackspace Cloud Backup infrastructure communicates with your servers through a software-based agent that resides on the system that you have designated to back up. This agent stores information about which files and directories you want to back up, and at what frequency. The agent is also critical for gathering information about how Cloud Backup is interacting with your server or storage volume, and you can use it for detailed logging when troubleshooting a problem with Rackspace Support.</p>

<h2>Log configuration file</h2>

<p>Your log configuration file is named log4cxx.xml and has a format similar to the following (abbreviated) Windows example:</p>

<pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE log4j:configuration SYSTEM "log4j.dtd"&gt;
&lt;log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/"&gt;
  &lt;appender name="FILE" class="org.apache.log4j.FileAppender"&gt;
    &lt;param name="File" value="$PROGRAMDATA/driveclient/log/driveclient.log"/&gt;
    &lt;param name="Append" value="false"/&gt;
    &lt;layout class="org.apache.log4j.PatternLayout"&gt;
      &lt;param name="ConversionPattern" value="[%d{dd MMM yyyy HH:mm:ss}{GMT+0}|T%t|%-5p|%12.12c|%C::%M(%L)] %m%n"/&gt;
    &lt;/layout&gt;
  &lt;/appender&gt;
  &lt;root&gt;
    &lt;level value="WARN"/&gt;
    &lt;appender-ref ref="FILE"/&gt;
  &lt;/root&gt;
&lt;/log4j:configuration&gt;</pre>

<h2>Agent logging operations</h2>

<p>Agent logs can store valuable troubleshooting information by outputting data to a series of log files.&nbsp;When the problem condition occurs, the logged information is analyzed to diagnose the problem.&nbsp;To ensure the logs are recording the correct information it is necessary to modify the configuration file for your agent and set the appropriate <em>level value</em>. &nbsp;The available logging modes are as follows:</p>

<ul>
	<li>OFF - turn logging off</li>
	<li>FATAL - log very severe errors that will cause the application to abort</li>
	<li>ERROR - log all error events, even those that might still allow the application to continue running</li>
	<li>WARN - log warnings of potentially harmful situations</li>
	<li>INFO - log informational messages that highlight the progress of the application</li>
	<li>DEBUG - log fine-grained informational events to assist in troubleshooting</li>
	<li>TRACE - log even more fine-grained informational events than DEBUG mode</li>
	<li>ALL - turns on all logging</li>
</ul>

<p><strong>Note:</strong> TRACE and ALL are equivalent values for logging.</p>

<h2>Trace-level debugging</h2>

<p>When you set the logging level&nbsp;to TRACE, the agent captures more granular data than when in DEBUG mode. If you activate TRACE debugging you increase the risk of losing log information because of the large volume of data written to the logs in this mode. You might need to increase the size and number of rollover logs.</p>

<h2>Rolling logs</h2>

<p>Cloud Backup agent logs are rolling logs, which means they have a maximum size and that a maximum number of logs are stored on a server. When logging capacity is reached, the log file rolls over by writing over the oldest data first.</p>

<p>Sometimes troubleshooting an agent requires running in TRACE log mode for a long time. When this happens, some information that Rackspace Support needs might roll off before it can be captured. In&nbsp;such cases, you must increase the values of the MaxFileSize and MaxBackupIndex parameters&nbsp;for the agent logs. In the following example log4cxx.xml configuration file, these values are set:</p>

<pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE log4j:configuration SYSTEM "log4j.dtd"&gt;
&lt;log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/"&gt;
  &lt;appender name="ROLLINGFILE" class="org.apache.log4j.RollingFileAppender"&gt;
    &lt;param name="File" value="/var/log/driveclient.log"/&gt;
    &lt;param name="MaxFileSize" value="500MB"/&gt;
    &lt;param name="MaxBackupIndex" value="10"/&gt;
    &lt;param name="Append" value="false"/&gt;
    &lt;layout class="org.apache.log4j.PatternLayout"&gt;
      &lt;param name="ConversionPattern" value="[%d{dd MMM yyyy HH:mm:ss}{GMT+0}|T%t|%-5p|%12.12c|%C::%M(%L)] %m%n"/&gt;
    &lt;/layout&gt;
  &lt;/appender&gt;
  &lt;root&gt;
    &lt;level value="DEBUG"/&gt;
    &lt;appender-ref ref="ROLLINGFILE"/&gt;
  &lt;/root&gt;
&lt;/log4j:configuration&gt;</pre>

<p class="p1">The maximum values for these parameters are as follows:</p>

<p class="p1">·&nbsp; MaxBackupIndex: 12</p>

<p class="p1">·&nbsp; MaxFileSize: unlimited (500 MB recommended)</p>

<p class="p1">After the problem is diagnosed, we recommend that you return these parameters to their original values to conserve disk space.</p>

<h2>Where to store saved logs</h2>

<p>Log files can quickly accumulate a large amount of data in a short period of time. To keep the file sizes manageable, log files should <em>always</em> be compressed using a zip or archive utility. Even when they are compressed, log files are still often too large to attach to a support ticket. In order to make your logs easily available to Rackspace Support, we recommend that you upload them to your Cloud Files account in a public container. From there, you copy the download or streaming links for the log files and paste the links into your support ticket. Read the following articles for more information about <a href="http://www.rackspace.com/knowledge_center/frequently-asked-question/how-do-i-use-the-cloud-files-cdn-manager" target="_blank">uploading files to Cloud Files through the Control Panel</a>&nbsp;or <a href="http://docs.rackspace.com/files/api/v1/cf-getting-started/content/Using_the_API_Directly.html" target="_blank">uploading files to Cloud Files using the API</a>.</p>

<h2>Locations of Cloud Backup agent files</h2>

<p>The following section lists the locations of the Cloud Backup agent on both Linux and Windows servers.</p>

<h3>Agent file location (Linux)</h3>

<p>Assuming a default installation, following are the agent file locations on Linux systems:</p>

<ul>
	<li>Configuration files: /etc/driveclient</li>
	<li>Logs: /var/log</li>
	<li>Startup script: /etc/init.d</li>
	<li>Application: /usr/local/bin</li>
	<li>PID file for running the agent: /var/run/driveclient.pid</li>
	<li>Database: search for a *.db file under /var/cache/driveclient&nbsp;</li>
</ul>

<p><strong>Note:&nbsp;</strong>If driveclient is installed as an individual user, most of these files are under ~/.driveclient.</p>

<h3>Agent file locations (Windows)</h3>

<p>Finding the driveclient files under various flavors of Windows is a little more complicated. In general, you can find these files under the folder to which CSIDL_COMMON_APPDATA points.&nbsp;</p>

<ul>
	<li>For more information about this location on Windows versions starting with Vista, see <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/dd378457(v=vs.85).aspx" target="_blank">KNOWNFOLDERID</a>.&nbsp;</li>
	<li>For more information about this location on earlier versions of Windows, see <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb762494(v=vs.85).aspx" target="_blank">CSIDL</a>. &nbsp;</li>
</ul>

<p>In a typical installation, the files will be located in these folders:&nbsp;</p>

<ul>
	<li>Configuration files: %ProgramData%\Driveclient&nbsp;</li>
	<li>Logs: %ProgramData%\Driveclient\logs&nbsp;</li>
	<li>Application: %ProgramFiles%\Driveclient&nbsp;</li>
	<li>Database: search for a *.db file under %ProgramData%\Driveclient</li>
</ul>

<h2>Disable logging</h2>

<p>To disable logging, remove the tag named <code>appender-ref</code> from <code>log4cxx.xml</code>.</p>

<p>&nbsp;</p>
