---
node_id: 1164
title: Installing MySQL Server on CentOS
permalink: article/installing-mysql-server-on-centos
type: article
created_date: '2011-07-29 14:59:03'
created_by: jered.heeschen
last_modified_date: '2015-08-31 21:1607'
last_modified_by: rose.contreras
products: Cloud Servers
categories: MySQL
body_format: full_html
---

<! ---- Installing MySQL Server on  CentOS ---- />

<p>MySQL is an open-source relational database. For those unfamiliar with these terms, a database is where an application keeps its data, and relational refers to how the data is organized and accessed within the database. SQL refers to the language used by application queries to retrieve and store data: Structured Query Language.</p>

<p>MySQL is free and widely used, meaning that you can find a large amount of application support, tools, and community help for it. MySQL is a safe choice if you know that you need a database but don't know much about all of the available the options.</p>

<p>This article describes a basic installation of a MySQL database server on CentOS Linux, just enough to get you started. Remember that you might need to install other packages to let applications use MySQL, like extensions for PHP. Check your application documentation for details.</p>

<p><strong>Note:</strong> CentOS 7 has replaced MySQL with MariaDB. To reflect this, instructions for MariaDB procedures are included in this article.</p>

<table border="1">
  <tr>
    <td><h3>Contents</h3>
      <ul>
        <li><a href="install">Install MySQL</a></li>
        <li><a href="allow">Allow remote access</a></li>
        <li><a href="launch">Launch MySQL</a></li>
        <li><a href="boot">Launching at reboot</a></li>
        <li><a href="shell">The MySQL shell</a></li>
        <li><a href="root">Set the root password</a></li>
        <li><a href="users">Find database users</a></li>
        <li><a href="db">Create a database</a></li>
        <li><a href="users">Add users and permissions</a></li>
        <li><a href="sum">Summary</a></li>
      </ul>
    </td>
  </tr>
</table>

<p>&nbsp;</p>

<a id="install"> </a>

<h2>Installing the database application</h2>

<p>Follow the steps below to install the database core server.</p>

<h2>MySQL installation</h2>

<p>Install the MySQL server through the CentOS package manager by running the following commands at a command prompt:</p>

<pre>sudo yum install mysql-server
sudo /sbin/service mysqld start</pre>

<p>Then, run the following command:</p>

<pre>sudo /usr/bin/mysql_secure_installation</pre>

<p>Press enter to give no password for root when that program asks for it. To apply some reasonable security to your new MySQL server answer "yes" to all the questions that the program asks. In order, those questions enable you set the root password, remove anonymous users, disable remote root logins, delete the test database that the installer included, and then reload the privileges so that your changes will take effect.</p>

<h3>MariaDB installation</h3>

<pre>sudo yum install mariadb-server mariadb</pre>

<a id="allow"> </a>

<h2>Allow remote access</h2>

<p>If you have iptables enabled and want to connect to the MySQL database from another machine, you need to open a port in your server's firewall (the default port is 3306). You don't need to do this if the application using MySQL is running on the same machine.</p>

<p>If you do need to open a port, you can use the following rules in iptables to open port 3306:</p>

<pre>-I INPUT -p tcp --dport 3306 -m state --state NEW,ESTABLISHED -j ACCEPT
-I OUTPUT -p tcp --sport 3306 -m state --state ESTABLISHED -j ACCEPT</pre>

<p><strong>Note:</strong> The `iptables` command was deliberately left out of the iptables rules in the instructions above. Some people using distributions that do not have their own iptables service might instead have a rules file they can import using `iptables-restore`. The format of the lines in that file would be similar to the format used above: iptables options without the `iptables` command in front of them. For this reason, the instructions in this article represent a compromise. It is easy to paste the lines into a rules file, and they can be used with the `iptables` command instead.</p>

<a id="launch"> </a>

<h2>Starting and stopping the database service</h2>

<p>When you've completed the installation, you can start the service by using the commands shown below. If the system is already started, you will see a message telling you that the service is already running.</p>

<h3>Starting and stopping MySQL</h3>

<p>Use the following command to start MySQL:</p>

<pre>sudo /sbin/service mysqld start</pre>

<p> use the following command to stop MySQL:</p>

<h3>Starting and stopping MariaDB</h3>

<p>Use the following command to start MariaDB:</p>

<pre>sudo systemctl start mariadb.service</pre>

<p>Use the following command to stop MariaDB:</p>

<pre>sudo systemctl stop mariadb.service</pre>

<a id="boot"> </a>

<h2>Launching at reboot</h3>

<p>To ensure that the database server launches after a reboot, you must enable the chkconfig utility. Use the following commands to do this.</p>

<p><strong>Enable chkconfig on MySQL</strong></p>

<pre>sudo chkconfig mysqld on</pre>

<p><strong>Enable chkconfig on MariaDB</strong></p>

<pre>sudo systemctl enable mariadb.service</p>


<p>&nbsp;</p>

<a id="shell"> </a>

<h2>The MySQL shell</h2>

<p>There is more than one way to work with a MySQL server, but this article focuses on the most basic and compatible approach: The `mysql` shell. At the command prompt, run the following command to launch the `mysql` shell and enter it as the root user:</p>

<pre>/usr/bin/mysql -u root -p</pre>

<p>When you're prompted for a password, enter the one that you set at installation or, if you haven't set one, just press enter to submit no password. The following `mysql` shell prompt should appear:</p>

<pre>mysql></pre>

<a id="root"> </a>

<h2>Set the root password</h2>

<p>Since you have just installed your MySQL database server, the root account within MySQL has no password set yet. You should change that by running the following commands:</p>

<pre>/usr/bin/mysqladmin -u root password 'new-password'
/usr/bin/mysqladmin -u root --password='new-password' -h hostname-of-your-server 'new-password'</pre>

<p><strong>Note:</strong> This article shows SQL commands in all capitals, but you can also type them in lowercase. The commands are shown capitalized by convention, to make them stand out from field names and other data that's being manipulated.</p>

<a id="users"> </a>

<h2>Viewing users</h2>

<p>As mentioned in the preceding section, MySQL stores the user information in its own database. The name of the database is "mysql". Inside that database, the user information is in a "table", a dataset, named "User". If you want to see what users are set up in MySQL table, or dataset, named "user".</p>

<pre>SELECT User, Host, Password FROM mysql.user;</pre>

<p>The list below lists the descriptions for the parts of that command:</p>

<ul>
  <li><strong>SELECT</strong>  - tells MySQL that you are asking for data.<br /><br /></li>
  <li><strong>User, Host, Password</strong> - tells MySQL what fields you want it to look in. Fields are categories for the data in a table. In this case, you are looking for the username, the host associated with the username, and the encrypted password entry.</li>
  <li><strong>FROM mysql.user</strong> - tells MySQL to get the data from the mysql database and the user table.</li>
  <li><strong>;</strong> - The command ends with a semicolon.</li>
</ul>

<h3>Ending SQL queries with a semicolon</h3>

<p>All SQL queries end in a semicolon. MySQL does not process a query until you type a semicolon.</p>

<p>This means that you can break up queries onto multiple lines to make them easier to read. For example, the preceding command also works if you enter it on multiple lines in the `mysql` shell, as follows:</p>

<pre>mysql> SELECT User, Host, Password
    -> FROM mysql.user;</pre>

<p>When you press enter after the Password part, you get a new line, so you can keep typing. The `>` symbol indicates that you are still in the middle of a statement. You can type a semicolon by itself to end a command if you forget to type it on the same line as the command.</p>

<h3>User hosts</h3>

<p>Following is example output for the preceding query:</p>

<pre>SELECT User, Host, Password FROM mysql.user;
+------------------+-----------+-------------------------------------------+
| User             | Host      | Password                                  |
+------------------+-----------+-------------------------------------------+
| root             | localhost | *2470C0C06DEE42FD1618BB99005ADCA2EC9D1E19 |
| root             | demohost  | *2470C0C06DEE42FD1618BB99005ADCA2EC9D1E19 |
| root             | 127.0.0.1 | *2470C0C06DEE42FD1618BB99005ADCA2EC9D1E19 |
|                  | %         |                                           |
+------------------+-----------+-------------------------------------------+</pre>

<p>Users are associated with a host, specifically the host to which they connect. The "root" user in this example is defined for localhost, for the IP address of localhost, and the hostname of the server ("demohost" in this example). You usually need to set a user for only one host, the one from which you typically connect.</p>

<p>If you're running your application on the same machine as the MySQL server the host it connects to by default is "localhost". Any new users that you create must have "localhost" in their "host" field.</p>

<p>If your application connects remotely, the "host" entry that MySQL looks for is the IP address or DNS hostname of the remote machine (the one from which the client is coming).</p>

<p>A special value for the host is `%`, as you can see in the preceding output for the blank, or anonymous, user (see the following section). The `%` symbol is a wildcard that applies to any host value. You usually don't want to use that because it's more secure to limit access specifically to trusted hosts.</p>

<h3>Anonymous users</h3>

<p>In the example output, one entry has a host value but no username or password. That's an "anonymous user". When a client connects with no username specified, it's trying to connect as an *anonymous* user.<p>

<p>You usually don't want any anonymous users, but some MySQL installations include one by default. If you see one, you should either delete the user (refer to the username with empty quotes, like '') or set a password for it. Both tasks are covered later in this series of articles.</p>

<a id="db"> </a>

<h2>Create a database</h2>

<p>There is a difference between database server and an actual database, even though those terms are often used interchangeably. MySQL is a database server, meaning that it keeps track of databases and controls access to them. An actual database is where all the data goes is stored, and it is the database that applications are trying to access when they interact with MySQL.</p>

<p>Some applications create a database as part of their setup process, but others require you to create a database and tell the application about it. Fortunately, creating a database is simple.</p>

<p>To create a database, log in to the `mysql` shell and run the following command, replacing demodb with the name of the database that you want to create:</p>

<pre>CREATE DATABASE demodb;</pre>

<p>The database is created. You can verify its creation by running a query to list all databases. The following example shows the query and example output:</p>

<pre>SHOW DATABASES;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| demodb             |
| mysql              |
+--------------------+
3 rows in set (0.00 sec)</pre>

<a id="users"> </a>

<h2>Adding users and permissions</h2>

<p>When applications connect to the database using the root user, they usually have more privileges than they need. You can create a new user that applications can use to connect to the new database. In the following example, a user named demouser is created.</p>

<p>To create a new user, run the following command in the `mysql` shell:</p>

<pre>CREATE USER 'demouser'@'localhost' IDENTIFIED BY 'demopassword';</pre>

<p>You can verify that the user was created by running that "SELECT" query again:</p>

<pre>SELECT User, Host, Password FROM mysql.user;
+------------------+-----------+-------------------------------------------+
| User | Host | Password                                                   |
+------------------+-----------+-------------------------------------------+
| root     | localhost | *2470C0C06DEE42FD1618BB99005ADCA2EC9D1E19         |
| root     | demohost  | *2470C0C06DEE42FD1618BB99005ADCA2EC9D1E19         |
| root     | 127.0.0.1 | *2470C0C06DEE42FD1618BB99005ADCA2EC9D1E19         |
| demouser | localhost | *0756A562377EDF6ED3AC45A00B356AAE6D3C6BB6         |
+------------------+-----------+-------------------------------------------+</pre>

<h3>Grant database user permissions</h3>

<p>Right after you create a new user, it has no privileges. The user can be used to log in to MySQL, but it can't be used to make any database changes. Give the user full permissions for your new database by running the following commmand:</p>

<pre>GRANT ALL PRIVILEGES ON demodb.* to demouser@localhost;</pre>

<p>Then, flush the privileges to make the change take effect.</p>

<pre>FLUSH PRIVILEGES;</pre>

<p>To verify that the privileges were set, run the following command:</p>

<pre>SHOW GRANTS FOR 'demouser'@'localhost';</pre>

<p>MySQL returns the commands needed to reproduce that user's permissions if you were to rebuild the server. The "USAGE on *.*" part basically means that the user gets no privileges on anything by default. That command is overridden by the second command, which is the grant you ran for the new database.</p>

<pre>+-----------------------------------------------------------------------------------------------------------------+
| Grants for demouser@localhost                                                                                   |
+-----------------------------------------------------------------------------------------------------------------+
| GRANT USAGE ON *.* TO 'demouser'@'localhost' IDENTIFIED BY PASSWORD '*0756A562377EDF6ED3AC45A00B356AAE6D3C6BB6' |
| GRANT ALL PRIVILEGES ON `demodb`.* TO 'demouser'@'localhost'                                                    |
+-----------------------------------------------------------------------------------------------------------------+
2 rows in set (0.00 sec)</pre>

<h3>Revoking privileges</h3>

<p>Sometimes you might need to revoke (remove) privileges form a user, for different reason. For example: you were granting `ALL` privileges to 'demouser'@'localhost', but by accident (can happen to the best of us any time!) instead of granting them only on the demodb database, you granted them to all other databases too:</p>

<pre>+-----------------------------------------------------------------------------------------------------------------+
| Grants for demouser@localhost                                                                                   |
+-----------------------------------------------------------------------------------------------------------------+
| GRANT USAGE ON *.* TO 'demouser'@'localhost' IDENTIFIED BY PASSWORD '*0756A562377EDF6ED3AC45A00B356AAE6D3C6BB6' |
| GRANT ALL PRIVILEGES ON *.* TO 'demouser'@'localhost'                                                           |
+-----------------------------------------------------------------------------------------------------------------+
2 rows in set (0.00 sec)</pre>

<p>After realizing your mistake, you decided to do something to correct it. The easiest way is to use a <code>REVOKE</code> statement, followed by <code>GRANT</code> statement
to apply correct privileges.</p>

<pre>REVOKE ALL ON *.* FROM demouser@localhost;
GRANT ALL PRIVILEGES ON demodb.* to demouser@localhost;
SHOW GRANTS FOR 'demouser'@'localhost';

+-----------------------------------------------------------------------------------------------------------------+
| Grants for demouser@localhost                                                                                   |
+-----------------------------------------------------------------------------------------------------------------+
| GRANT USAGE ON *.* TO 'demouser'@'localhost' IDENTIFIED BY PASSWORD '*0756A562377EDF6ED3AC45A00B356AAE6D3C6BB6' |
| GRANT ALL PRIVILEGES ON *.* TO 'demouser'@'localhost'                                                           |
+-----------------------------------------------------------------------------------------------------------------+
2 rows in set (0.00 sec)</pre>

<p>Now your user has correct permission, and therefore your database server is slightly more secure (granting privileges like <code>ALL on *.*</code> is deemed as a very bad practice). You should also read official MySQL documentation regarding possible privilege choices, to grant only those privileges truly needed, rather than using <code>ALL</code>.</p>

<a id="sum"> </a>

<h2>Summary</h2>

<p>If you're just creating a database and a user, you are done. The concepts covered here should give you a solid grounding from which to learn more.</p>

<p>The articles linked below cover some basic security and stability checks by looking at the MySQL server's configuration files and a few key tools.</p>

  <ul>
    <li><a href="https://www.rackspace.com/knowledge_center/installing_mysql_server_on_linux">Installing MySQL server on Linux</a></li>
    <li><a href="http://www.rackspace.com/knowledge_center/article/installing-mysql-server-on-centos">Installing MySQL server on CentOS</a></li>
  </ul>
