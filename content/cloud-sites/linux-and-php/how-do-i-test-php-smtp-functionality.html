---
node_id: 650
title: How do I test PHP SMTP functionality?
permalink: article/how-do-i-test-php-smtp-functionality
type: article
created_date: '2011-03-16 21:57:40'
created_by: RackKCAdmin
last_modified_date: '2015-06-25 15:5922'
last_modified_by: kelly.holcomb
products: Cloud Sites
categories: Linux and PHP
body_format: tinymce
---

<p>You can test PHP SMTP functions with the following two examples. The first one is standard SMTP while the second one is SMTP with SSL.</p><p>We strongly recommend using an SMTP relay that requires authentication. Sending mail through unauthenticated SMTP servers (including the localhost relay on Cloud Sites) can result in delays or undelivered email due to stringent anti-spam filters.</p><h2><a id="Sending_with_PHP_SMTP" name="Sending_with_PHP_SMTP"></a><span class="mw-headline">Sending with PHP SMTP</span></h2><p>You will only need to change the following variables:</p><ul><li>$from</li><li>$to</li><li>$subject</li><li>$body</li><li>$host</li><li>$username</li><li>$password</li></ul><p>The host, username, and password values will depend on the provider you're using to send your email. &nbsp;If you have a legacy Sites email account or are using Rackspace Email the host would be "mail.emailsrvr.com" and the username would be your email address. &nbsp;If you're using another service such as Mailgun or Gmail to send email, you'll need to fill in the SMTP server for that service. Mailgun server information can be accessed via your Mailgun control panel.</p><pre>&lt;?php
require_once "Mail.php";
 
$from = "Web Master &lt;webmaster@example.com&gt;";
$to = "Nobody &lt;nobody@example.com&gt;";
$subject = "Test email using PHP SMTP\r\n\r\n";
$body = "This is a test email message";
 
$host = "mail.emailsrvr.com";
$username = "webmaster@example.com";
$password = "yourPassword";
 
$headers = array ('From' =&gt; $from,
  'To' =&gt; $to,
  'Subject' =&gt; $subject);
$smtp = Mail::factory('smtp',
  array ('host' =&gt; $host,
    'auth' =&gt; true,
    'username' =&gt; $username,
    'password' =&gt; $password));
 
$mail = $smtp-&gt;send($to, $headers, $body);
 
if (PEAR::isError($mail)) {
  echo("&lt;p&gt;" . $mail-&gt;getMessage() . "&lt;/p&gt;");
} else {
  echo("&lt;p&gt;Message successfully sent!&lt;/p&gt;");
}
?&gt;
</pre><p><a id="Sending_with_PHP_SMTP_with_SSL" name="Sending_with_PHP_SMTP_with_SSL"></a></p><h2><span class="mw-headline">Sending with PHP SMTP with SSL</span></h2><p>You will only need to change the following variables:</p><ul><li>$from</li><li>$to</li><li>$subject</li><li>$body</li><li>$host</li><li>$username</li><li>$password</li></ul><pre> 
&lt;?php
require_once "Mail.php";
 
$from = "Web Master &lt;webmaster@example.com&gt;";
$to = "Nobody &lt;nobody@example.com&gt;";
$subject = "Test email using PHP SMTP with SSL\r\n\r\n";
$body = "This is a test email message";
 
$host = "ssl://secure.emailsrvr.com";
$port = "465";
$username = "webmaster@example.com";
$password = "yourPassword";
 
$headers = array ('From' =&gt; $from,
  'To' =&gt; $to,
  'Subject' =&gt; $subject);
$smtp = Mail::factory('smtp',
  array ('host' =&gt; $host,
    'port' =&gt; $port,
    'auth' =&gt; true,
    'username' =&gt; $username,
    'password' =&gt; $password));
 
$mail = $smtp-&gt;send($to, $headers, $body);
 
if (PEAR::isError($mail)) {
  echo("&lt;p&gt;" . $mail-&gt;getMessage() . "&lt;/p&gt;");
} else {
  echo("&lt;p&gt;Message successfully sent!&lt;/p&gt;");
}
?&gt;
</pre><p><strong>Note</strong>: <a class="external text" title="http://pear.php.net/package/Mail" href="http://pear.php.net/package/Mail" rel="nofollow">Mail.php</a> is a <a class="external text" title="http://pear.php.net/" href="http://pear.php.net/" rel="nofollow">PEAR</a> module and is installed on the server. It is included in the default <a class="external text" title="http://www.php.net/manual/en/ini.core.php#ini.include-path" href="http://www.php.net/manual/en/ini.core.php" rel="nofollow">include_path</a> for PHP, so <a class="external text" title="http://php.net/manual/en/function.require.php" href="http://php.net/manual/en/function.require.php" rel="nofollow">requiring</a> it here will work by default without any additional effort on your part.</p><p><a id="See_Also" name="See_Also"></a></p><h2><span class="mw-headline">See Also</span></h2><ul><li><a title="How do I test CDOSYS SMTP functionality?" href="/knowledge_center/index.php/How_do_I_test_CDOSYS_SMTP_functionality%3F">How do I test CDOSYS SMTP functionality?</a></li></ul>
