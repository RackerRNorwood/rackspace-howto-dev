---
node_id: 3630
title: How to Change the MySQL Timeout on a Server
permalink: article/how-to-change-the-mysql-timeout-on-a-dedicated-server
type: article
created_date: '2013-07-24 14:30:15'
created_by: rose.contreras
last_modified_date: '2014-03-10 17:5609'
last_modified_by: kyle.laffoon
products: Cloud Servers
categories: MySQL
body_format: tinymce
---

<p>A MySQL server timeout can occur for many reasons, but happens most often when a command is sent to MySQL over a closed connection. The connection could have been closed by the MySQL server because of an idle-timeout; however, in most cases it is caused by either an application bug, a network timeout issue (on a firewall, router, etc.), or due to the MySQL server restarting. Rarely does the <code>wait_timeout</code> value cause the problem, and changing the value does not fix the problem. For cases where an application fails to close a connection it is no longer using, a low <code>wait_timeout</code> value can help to avoid hitting <code>max_connections</code> simply due to "sleeping" idle connections that are not in a transaction and will not be reused.</p><p>Follow these steps to resolve the issue:</p><ol><li><p>Login to your server using SSH.</p></li><li><p>Edit <code>my.cnf</code> (the MySQL configuration file).</p><pre>sudo vi /etc/my.cnf</pre></li><li><p>Locate the timeout configuration and adjust it to fit your server.</p><pre>wait_timeout = 28800
interactive_timeout = 28800</pre><ul type="disc"><li><p>The interactive timeout does not affect any web application connections. A high <code>interactive_timeout</code> but a low <code>wait_timeout</code> is normal and is the best practice.</p></li><li><p>Choose a reasonable <code>wait_timeout</code> value. Stateless PHP environments do well with a 60 second timeout or less. Stateful applications that use a connection pool (Java, .NET, etc.) will need to adjust <code>wait_timeout</code> to match their connection pool settings. The default 8 hours (<code>wait_timeout = 28800</code>) works well with properly configured connection pools.</p></li><li><p>Configure the <code>wait_timeout</code> to be slightly longer than the application connection pool's expected connection lifetime. This is a good safety check.</p></li><li><p>Consider changing the <code>wait_timeout</code> value online. This does not require a MySQL restart, and the <code>wait_timeout</code> can be adjusted in the running server without incurring downtime. You would issue <code>set global wait_timeout=60</code> and any new sessions created would inherit this value. Be sure to preserve the setting in <code>my.cnf</code>. Any existing connections will need to hit the old value of <code>wait_timeout</code> if the application abandoned the connection. If you do have reporting jobs that will do longer local processing while in a transaction, you might consider having such jobs issue <code>set session wait_timeout=3600</code> upon connecting.</p></li></ul></li><li><p>Save the changes and exit the editor.</p></li><li><p>Restart MySQL to apply the changes as follows:</p><pre>sudo /etc/init.d/mysql restart</pre></li></ol><p>Once the restart completes, the new changes are applied.</p>
