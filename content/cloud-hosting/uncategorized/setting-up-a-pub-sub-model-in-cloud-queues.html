---
node_id: 3656
title: Setting Up a Pub-Sub Model in Cloud Queues
permalink: article/setting-up-a-pub-sub-model-in-cloud-queues
type: article
created_date: '2013-08-21 04:00:14'
created_by: megan.meza
last_modified_date: '2013-12-09 22:0203'
last_modified_by: kyle.laffoon
products: Cloud Hosting
categories: Uncategorized
body_format: tinymce
---

<p>Characteristics of the Publish-Subscribe model in Cloud Queues are:</p><ul type="disc"><li>All subscribers listen to the messages on the queue.</li><li>Messages are not claimed.</li><li>Subscribers can send a marker/cursor to skip messages already seen.</li><li>TTL deletes messages eventually.</li><li>Ideal for notification of events to multiple listeners at once.</li></ul><p><strong>Posting Messages to Queue</strong></p><p>Queues support posting 10 messages at the same time, so lets try to post two within the same request.</p><p><em><strong>Request</strong></em></p><pre>    $ curl -i -X POST https://$ENDPOINT:443/v1/queues/samplequeue/messages -d '     [            {"ttl": 300, "body": {"event": "two"}},         {"ttl": 60, "body": {"event": "three"}}     ]     ' -H "Content-type: application/json" -H "Client-ID: e58668fc-26eb-11e3-8270-5b3128d43830" -H "X-Auth-Token: $TOKEN"</pre><p><em><strong>Response</strong></em></p><pre>    HTTP/1.1 201 Created     Content-Length: 153     Content-Type: application/json; charset=utf-8     Location: /v1/queues/samplequeue/messages?ids=51e840e71d10b2055fd565fb,51e840e71d10b2055fd565fc      {partial": false, "resources": ["/v1/queues/samplequeue/messages/51e840e71d10b2055fd565fb", "/v1/queues/samplequeue/messages/51e840e71d10b2055fd565fc"]}</pre><p>Above, if you check the response, you will see that the queue returned two ids. It is always a good practice to post messages in batches as network latency will be a smaller factor in overall performance compared to sending one message at a time.</p><p><strong>Listing Messages from Your Queue</strong></p><p>You can generate the list of messages from your queue through your terminal.</p><ul type="disc"><li>In your terminal enter the following request in your terminal to list your Cloud Queues:</li></ul><pre>    $ curl -i -X GET https://$ENDPOINT:443/v1/queues -H "X-Auth-Token: $TOKEN"</pre><ul type="disc"><li>Watch for your Queues to be listed in the format of the following response:</li></ul><pre>    HTTP/1.1 200 OK     Content-Length: 140     Content-Type: application/json; charset=utf-8     Content-Location: /v1/queues  {"queues": [{"href": "/v1/queues/samplequeue", "name": "samplequeue"}], "links": [{"href": "/v1/queues?marker=samplequeue", "rel": "next"}]}<br /><br /></pre><p>To avoid getting messages the subscriber has already read, use the marker semantics such as: /v1/queues/{queue_name}/messages?marker=63&nbsp; (these links can be retrieved with the marker by following the links section in the returned json for the next page).<strong><br /></strong></p><p><strong>Please Note</strong> : We have additional developer information available in our API documentation. Listed under Other Products, we have a <a href="http://docs.rackspace.com/queues/api/v1.0/cq-gettingstarted/content/DB_Overview.html">Getting Started Guide</a> and an <a href="http://docs.rackspace.com/queues/api/v1.0/cq-devguide/content/overview.html">API Developer Guide</a> for Cloud Queues.</p>
